!function(p){"use strict";var o=Object.create(null),u=[];function d(){return performance&&performance.now&&performance.now()||Date.now&&Date.now()||(new Date).getTime()}function m(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(c){var u={"`":{set:"border:1px solid;border-radius:.3em;padding:.1em.2em",reset:""},"*":{set:"font-weight:bolder",reset:""},_:{set:"font-style:italic",reset:""}},d=[],p=0,m=c.shift(),h=/%([Oosc]|(?:[0-9.]+)?[dif])/g;return d.unshift(m.replace(/([`*_])((?:(?!\1)[^`*_])+)\1(?![`*_A-zА-яЁё])/g,function(e,t,a,r){var n=u[t],s=(t=m.substring(p,r).match(h))?t.length:0,i=(t=a.match(h))?t.length:0;if(p=r,0<s)for(var o=0;o<s;o+=1)d.push(c.shift());if(d.push(n.set),0<i)for(var l=0;l<i;l+=1)d.push(c.shift());return d.push(n.reset),"%c"+a+"%c"})),d.concat(c)}var a={pluginName:"depotProto",DEBUG:!!window.location.host.match(/(127\.0\.0\.1|localhost|\.local|\.designdepot\.ru)/i),MARKUP:!!window.location.pathname.match(/\.html/i),BUILD:"2021-10-15T10:08:06",$WINDOW:p(window),$DOCUMENT:p(document),$HTML:p(document.documentElement),$BODY:p(document.body),$HTMLBODY:p([document.documentElement,document.body]),KEYS:{ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,ARROW_UP:38,ENTER:13,ESCAPE:27,SPACE:32,TAB:9},LANGUAGE:document.documentElement.lang||"ru",defaults:{processingClassName:"is-processing",selectedClassName:"is-selected",visibleClassName:"is-visible",activeClassName:"is-active",getElementsOutside:!1,dictionary:{month:{0:{full:{ru:"Январь",en:"January"},plural:{ru:"Января",en:"January"},short:{ru:"Янв",en:"Jan"}},1:{full:{ru:"Февраль",en:"February"},plural:{ru:"Февраля",en:"February"},short:{ru:"Фев",en:"Feb"}},2:{full:{ru:"Март",en:"March"},plural:{ru:"Марта",en:"March"},short:{ru:"Мар",en:"Mar"}},3:{full:{ru:"Апрель",en:"April"},plural:{ru:"Апреля",en:"April"},short:{ru:"Апр",en:"Apr"}},4:{full:{ru:"Май",en:"May"},plural:{ru:"Мая",en:"May"},short:{ru:"Май",en:"May"}},5:{full:{ru:"Июнь",en:"June"},plural:{ru:"Июня",en:"June"},short:{ru:"Июн",en:"June"}},6:{full:{ru:"Июль",en:"July"},plural:{ru:"Июля",en:"July"},short:{ru:"Июл",en:"July"}},7:{full:{ru:"Август",en:"August"},plural:{ru:"Августа",en:"August"},short:{ru:"Авг",en:"Aug"}},8:{full:{ru:"Сентябрь",en:"September"},plural:{ru:"Сентября",en:"September"},short:{ru:"Сен",en:"Sept"}},9:{full:{ru:"Октябрь",en:"October"},plural:{ru:"Октября",en:"October"},short:{ru:"Окт",en:"Oct"}},10:{full:{ru:"Ноябрь",en:"November"},plural:{ru:"Ноября",en:"November"},short:{ru:"Ноя",en:"Nov"}},11:{full:{ru:"Декабрь",en:"December"},plural:{ru:"Декабря",en:"December"},short:{ru:"Дек",en:"Dec"}}},weekday:{0:{full:{ru:"Воскресенье",en:"Sunday"},short:{ru:"Вс",en:"Su"}},1:{full:{ru:"Понедельник",en:"Monday"},short:{ru:"Пн",en:"Mo"}},2:{full:{ru:"Вторник",en:"Tuesday"},short:{ru:"Вт",en:"Tu"}},3:{full:{ru:"Среда",en:"Wednesday"},short:{ru:"Ср",en:"We"}},4:{full:{ru:"Четверг",en:"Thursday"},short:{ru:"Чт",en:"Th"}},5:{full:{ru:"Пятница",en:"Friday"},short:{ru:"Пт",en:"Fr"}},6:{full:{ru:"Суббота",en:"Saturday"},short:{ru:"Сб",en:"Sa"}}}},debounce:300,extend:null,mixins:[],beforeInit:null,onInit:null},clamp:function(e,t,a){return Math.max(e,Math.min(t,a))},getNameSpace:function(){return this.format(".${pluginName}-${hash}",this)},cleanObject:function(e){var a=Object.create(null);if(e&&"object"===m(e))a=p.extend(a,e);else try{p.each(e,function(e,t){a[e]=t})}catch(e){this.error(e)}return a},getInitialState:function(){return this.cleanObject()},getType:m,now:d,prefersReducedMotion:function(){var e=!1;return window.matchMedia&&(e=window.matchMedia("(prefers-reduced-motion: reduce)").matches),e},error:function(t,e){var a=this,r=Object.create({message:void 0,name:void 0,description:void 0,number:void 0,filename:void 0,lineNumber:void 0,columnNumber:void 0,stack:void 0});"error"===(s=m(t))?p.each(r,function(e){void 0!==t[e]&&(r[e]=t[e])}):"object"===s?r=p.extend(r,t):"string"===s&&(r.message=t,r.name="Error");var n,s={error:(s=r,JSON.parse(JSON.stringify(s).replace(/"(pass[^"]*)":"([^"]*)"/gi,'"$1":"***"').replace(/(pass[^/=]*)=([^&]*)/gi,"$1=***"))),telemetry:(s=a,(n=Object.create(null)).build=s&&s.BUILD,n.timestamp=d(),navigator&&(n.platform=navigator.platform,n.userAgent=navigator.userAgent,n.cookieEnabled=navigator.cookieEnabled,navigator.connection&&(n.connectionSaveData=navigator.connection.saveData,n.connectionDownlink=navigator.connection.downlink,n.connectionEffectiveType=navigator.connection.effectiveType),navigator.plugins&&(n.plugins=[],p.each(navigator.plugins,function(e,t){n.plugins.push(t.name)}))),screen&&(n.screenWidth=screen.width,n.screenHeight=screen.height),n)};return(!1===a.DEBUG||e)&&new Date(a.BUILD).getTime()+15768e6>Date.now()&&p.ajax({url:"https://logs.designdepot.ru/js/",type:"POST",data:{error:JSON.stringify(s)},global:!1,error:function(){a.warn("Автоматическая отправка отчета об ошибке провалилась.\nВы можете связаться с нами по е-mail: webmaster@designdepot.ru")}}),e=["%c♦ %c%s:%c "+a.format("#{if name}${name}: #{endif}#{if number}${number} - #{endif}${message}",r),"color:#"+a.hash,"color:tomato",a.pluginName,""],Function.prototype.apply.call(console.error,console,i(e.concat(s))),r},warn:function(){var e=this.pluginName,t=Array.prototype.slice.call(arguments);if(t.length){var a=t.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return;a=t.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(e+=a,a=t.shift()),a="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:orange",e,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:orange",e,"",a],Function.prototype.apply.call(console.warn,console,i(a.concat(t)))}},info:function(){var e=this.pluginName,t=Array.prototype.slice.call(arguments);if(t.length){var a=t.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return;a=t.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(e+=a,a=t.shift()),a="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:cyan",e,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:cyan",e,"",a],Function.prototype.apply.call(console.info,console,i(a.concat(t)))}},log:function(){var e=Array.prototype.slice.call(arguments),t=this.pluginName;if(e.length){var a=e.shift();if("string"==typeof a&&0===a.indexOf("--debug")){if(!this.DEBUG)return!1;a=e.shift()}return"string"==typeof a&&0===a.indexOf("::")&&(t+=a,a=e.shift()),a="string"==typeof a?["%c♦ %c%s:%c "+a,"color:#"+this.hash,"color:dodgerblue;",t,""]:["%c♦ %c%s:%c","color:#"+this.hash,"color:dodgerblue;",t,"",a],Function.prototype.apply.call(console.log,console,i(a.concat(e)))}},hashify:function(e,t){var a=e;return"object"!=typeof e&&("string"!=typeof e||e.length)||(e=JSON.stringify(e)),"function"==typeof e&&(e=e.toString()),t=t?12<t?12:t:6,"string"==typeof e?(a=0,e.split("").forEach(function(e,t){e=e.charCodeAt(0),a+=(e+t)/(2378757+e)})):void 0!==e&&void 0!==e||(a=Math.random()),((Math.abs(a)+1)/(2378757+a)).toString(16).substr(-1*t)},format:function(e,t){var u=this;function d(e,s){var i={hash:u.hashify,plural:function(e,t,a,r){return r=(e=e.toString()).match(/([^1]|^)(1)$/)?t:e.match(/([^1]|^)([234])$/)||void 0===r?void 0===a?"":a:r},digit:function(e,t){var t=(a=(void 0===t?e.toString():e.toFixed(t)).split("."))[0],a=a[1];return void 0!==e?t.split("").reverse().join("").split(/([0-9]{3})/).join(" ").split("").reverse().join("").trim()+(a?","+a:""):e},ft:function(e){return void 0!==e?e.toString().replace(/^[—]\s/gi,"&mdash;&nbsp;").replace(/\s[—]\s/gi,"&nbsp;&mdash;&thinsp;").replace(/[—]/gi,"&mdash;").replace(/([0-9])[x]+([0-9])/gi,"$1&times;$2").replace(/(?=[>])"([^"<>]+)"/gi,"&laquo;$1&raquo;").replace(/(^|\s|[^a-zа-яё0-9_-])([0-9]+|[a-zа-яё]{1,3})\s/gi,"$1$2&nbsp;"):e},fixed:function(e,t,a){var r=e;return isNaN(e)||(r=parseFloat(e).toFixed(t||1),a&&(r=parseFloat(r))),r},round:function(e){return isNaN(e)?e:Math.round(e)},zero:function(e){var t=e.toString().split("."),a=parseInt(t[0],10),t=t[1]?"."+t[1]:"";return!isNaN(e)&&a<10?("0"+a).substr(-2)+t:e},join:function(e,t){var a=e;return"array"===m(e)&&(a=e.join(t)),a},extra:function(e){var a=[];return"object"===m(e)&&p.each(e,function(e,t){a.push(e+'="'+t+'"')}),a.join(" ")},default:function(e,t){var a=e;if(!e)if(t)if(e=d(t,s))a=e;else try{a=JSON.parse(t)}catch(e){a=t}else a="";return a},substr:function(e,t,a){var r=e;return"string"===m(e)&&(r=e.substr(t,a)),r},length:function(e){var t,a=m(e);return"array"===a?t=e.length:"object"===a?t=Object.keys(e).length:"string"!==a&&"number"!==a||(t=e.toString().length),t},lower:function(e){return void 0!==e?e.toString().toLowerCase():e},upper:function(e){return void 0!==e?e.toString().toUpperCase():e},date:function(e,t){var a,r=e;return e&&(a="date"===m(e)?e:new Date(e),e=t?t.replace(/([a-z])/gi,"${$1}"):"${Y}-${m}-${d}",t={d:function(){return d("d|zero",{d:a.getDate()})},j:function(){return a.getDate()},D:function(){return u.getText("weekday."+a.getDay()+".short")},l:function(){return u.getText("weekday."+a.getDay()+".full")},w:function(){return a.getDay()},N:function(){var e=a.getDay();return 0===e?7:e+1},m:function(){return d("m|zero",{m:a.getMonth()+1})},n:function(){return a.getMonth()+1},M:function(){return u.getText("month."+a.getMonth()+".short")},E:function(){return u.getText("month."+a.getMonth()+".plural")},F:function(){return u.getText("month."+a.getMonth()+".full")},y:function(){return a.getFullYear().toString().substr(-2)},Y:function(){return a.getFullYear()},H:function(){return d("H|zero",{H:a.getHours()})},i:function(){return d("i|zero",{i:a.getMinutes()})},s:function(){return d("s|zero",{s:a.getSeconds()})}},r=u.format(e,t)),r},json:function(t){var a;try{a=JSON.stringify(t)}catch(e){a=t}return a},escapeHTML:function(e){var t={"&":"&amp","<":"&lt",">":"&gt",'"':"&quot","'":"&#39"},a=/[&<>"']/g;return void 0!==e&&a.test(e)?e.replace(a,function(e){return t[e]}):e}},a=u.cleanObject(s),e=(t=e.toString().split("|")).shift(),t=t,o=a[e];return-1!==e.indexOf(".")&&(p.each(e.split("."),function(e,t){return!!(a=a[t.trim()])}),o=a),"function"===m(o)&&(o=o.call(u)),void 0!==o&&t.length&&p.each(t,function(e,t){var a,r,n=t.match(/^([^(]+)(?:\(([^)]+)\))?$/,"g");n?(a=n[1],r=n[2]?n[2].split(/,[ ]*/):[],(n="function"===m(i[a])&&i[a])||"object"!==m(s.filters)||"function"!==m(s.filters[a])||(n=s.filters[a]),n?o=n.apply(null,Array.prototype.concat(o,r)):u.warn("Шаблонный фильтр _%s_ не найден",a)):u.warn("Ошибка в написании фильтра _|%s_",t)}),o}if(e){var r,s=e,a=s=function(e,l){var t=/#{if\s+([!]*)([^}!]+)}((((?!#{endif}).)*)#{else})?(((?!#{endif}).)*(((?!#{if\s+[^}]+}).)*))#{endif}/gm,a=e;function r(e,t,a,r,n,s,i){var o="",a=d(a,l);return!r&&(!t&&a||t&&!a)?o=u.format(i,l):r&&(!t&&a||t&&!a)?o=u.format(n,l):r&&(!t&&!a||t&&a)&&(o=u.format(i,l)),void 0===o?e:o}if(l)for(var n=a,s=!0;a.match(t)&&s;)s=n!==(a=a.replace(t,r))&&(n=a,!0);return a}(s=function(e,l){var t=/#{for\s+([^}!]+)}(((?:(?!#{(?:empty|endfor)}).)*)#{empty})?((?:(?!#{endfor}).)*(?:((?!#{for\s+[^}!]+}).)*))#{endfor}/gm,a=e;function c(a,e,r,n){var s,i=("array"===m(e)?e:Object.keys(e)).length,o=a;return i&&(o="",s=0,p.each(e,function(e,t){(e=p.extend(!0,u.cleanObject(n),{loop:{key:e,isFirst:0===s,isLast:s===i-1,index0:s,index:s+1,item:t,isOnly:1===i}}))[r]=t,o+=u.format(a,e),s+=1})),o}function r(e,t,a,r,n){var s,i=t.match(/^(.*)\s+in\s+(.*)$/i),o=i[1];return void 0===(i=(t=i[2])&&-1!==t.indexOf("..")?function(e){var t=[],a=e&&e.match(/^([0-9-]+)\.\.([0-9-]+)$/);if(a){var e=parseInt(a[1],10),r=parseInt(a[2],10);if(e<=r)for(var n=e;n<=r;n+=1)t.push(n);else if(r<e)for(var s=e;r<=s;--s)t.push(s)}return t}(t):d(t,l))||"array"!==m(i)&&"object"!==m(i)||(5e3<(t=("array"===m(i)?i:Object.keys(i)).length)&&u.warn("::format","Операция может занять много времени, вы не можете повлиять на это"),!a&&t?s=c(n,i,o,l):a&&t?s=c(r,i,o,l):a&&!t&&(s=c(n,i,o,l))),void 0===s?e:s}if(l)for(var n=a,s=!0;a.match(t)&&s;)s=n!==(a=a.replace(t,r))&&(n=a,!0);return a}(s=function(a){var e=/\${([^|$}]+(?:(?:\|)[^$}]*?)?)}/g,t=s;if(a)for(var r=t,n=!0;"string"===m(t)&&t.match(e)&&n;)n=r!==(t=t.replace(e,function(e,t){return void 0===(t=d(t,a))?e:t}))&&(r=t,!0);return t}(t||{}),t||{}),t||{});return(r=t||{})&&(a=a.replace(/_{([^|_}]+(?:(?:\|)[^_}]*?)?)}/g,function(e,t){var t=(a=t.split("|"))[0],a=a[1];return void 0===(a=u.getText(t,a,r.dictionary))?e:a})),a}u.error({action:"DepotProto.format",data:{template:e,context:t},name:"ArgumentError",message:"переменная _template_ не получена"})},translate:function(e){if(e)return function r(n,s){var e;return(n&&"object"===m(n)||"array"===m(n))&&((e=n[s])?n=e:(e||"object"!==m(n))&&"array"!==m(n)||p.each(n,function(e,t){var a;(t&&"object"===m(t)||"array"===m(t))&&(a=t[s],n[e]=a||r(t,s))})),n}(e,this.LANGUAGE);this.error({action:"DepotProto.translate",data:{dictionary:e},name:"ArgumentError",message:"переменная _dictionary_ не получена"})},getText:function(e,a,r){var n=this;if(e){var s="",t=e.split(".");return r=r||n.params.dictionary,p.each(t,function(e,t){if(s){if(!(s=s[t])){if(!a)return!1;s=n.getText(a,void 0,r)}}else s=r[t]}),s}n.error({action:"DepotProto.getText",data:{path:e,fallbackPath:a,dictionary:r},name:"ArgumentError",message:"переменная _path_ не получена"})},addEventNS:function(e,t){var a,r=this,n=[];switch(m(e)){case"array":a=e;break;case"object":a=[],p.each(e,function(e,t){a.push(t)});break;default:a=e&&"all"!==e?e.split(/[ ]+/):[""]}return p.each(a,function(){n.push(this+(r.eventNameSpace||"")+(t||""))}),n.join(" ")},throttle:function(e,t,a){var r,n,s,i=this;"function"==typeof e&&(a=t,t=e,e=i.hashify(t)),"function"==typeof t?(void 0===i.cache&&(i.cache=Object.create(null)),void 0===i.cache.throttleTimers&&(i.cache.throttleTimers=Object.create(null)),void 0===a&&(a=i.params.debounce),r=i.now(),s=function(){delete i.cache.throttleTimers[e]},void 0===(n=i.cache.throttleTimers[e])?(i.cache.throttleTimers[e]={timestamp:r,timeout:i.delay(s,a)},i.call(t,e)):r-n.timestamp>=a?(i.cancelDelay(n.timeout),delete i.cache.throttleTimers[e],i.call(t,e)):(i.cancelDelay(n.timeout),i.cache.throttleTimers[e].timeout=i.delay(s,a))):i.warn("::throttle","Функция обратного вызова для `%s` не передана",e)},debounce:function(e,t,a){var r=this;"function"==typeof e&&(a=t,t=e,e=r.hashify(t)),"function"==typeof t?(void 0===r.cache&&(r.cache=Object.create(null)),void 0===r.cache.debounceTimers&&(r.cache.debounceTimers=Object.create(null)),void 0===r.cache.debounceTimers[e]?r.call(t,e):r.cancelDelay(r.cache.debounceTimers[e]),void 0===a&&(a=r.params.debounce),r.cache.debounceTimers[e]=r.delay(function(){delete r.cache.debounceTimers[e]},a)):r.warn("::debounce","Функция обратного вызова для `%s` не передана",e)},delay:function(e,r,t){var n=this,s=n.hashify();function i(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(function(){e.call(window,s)})}).call(window,e),s}return r=r||0,o[s]={callback:e,onCancel:t},i(function e(t){var a;return o[s]&&(o[s].start||(o[s].start=t),a=t-o[s].start,r<=a?(n.call(o[s].callback,t),delete o[s]):i(e)),s})},getDelays:function(){return p.extend(!0,{},o)},cancelDelay:function(e){var t=o[e];return t&&"function"==typeof t.onCancel&&this.call(t.onCancel),t&&delete o[e]},animate:function(n,s,i){i=i||{done:null,cancel:null,easing:"linear"};var o=this,l=o.now(),c=0,e={linear:function(e){return e}},u={delayId:0,cancel:function(){o.cancelDelay(this.delayId),o.call(i.cancel)}},d="string"===m(i.easing)?e[i.easing]||e.linear:"function"===m(i.easing)?i.easing:e.linear;return u.delayId=o.delay(function e(t){var a=t-l,r=o.call(d,o.clamp(0,a/n,1)),t=r-c;o.call(s,t,r,n,a),(c=r)<1?u.delayId=o.delay(e):o.call(i.done)}),u},wait:function(e,t,a,r){var n=this,s=[10,100,200,500],i=100;function o(){n.params.debug&&n.info("отмена %c%s%c","color: deepskyblue;",e,""),n.state.waitingTimeouts[e]&&(n.state.waitingPhase[e]=n.state.waitingDelaysQuantity[e],n.state.waitingBusyBy&&n.state.waitingBusyBy===e&&(n.state.waitingBusyBy=""),n.cancelDelay(n.state.waitingTimeouts[e]))}function l(e){var t=e.waitingID,a=e.condition,r=e.callback;n.state.waitingBusyBy===t||e.parallel?(n.params.debug&&n.info("проверка %c%s%c","color: deepskyblue;",t,""),a.call(n,o)?(n.params.debug&&(a=parseFloat((d()-e.timestamp).toFixed(4)),n.info("%c%s%c готов%c (%dms)","color: deepskyblue;",t,"color: lime;","",a)),delete n.state.waitingTimes[t],delete n.state.waitingPhase[t],delete n.state.waitingDelaysQuantity[t],n.state.waitingBusyBy&&n.state.waitingBusyBy===t&&(n.state.waitingBusyBy=""),n.call(r),e.parallel||c()):-1===n.state.waitingPhase[t]?n.call(o):n.state.waitingPhase[t]<n.state.waitingDelaysQuantity[t]?(n.state.waitingTimes[t]<i?n.state.waitingTimes[t]+=1:(n.state.waitingTimes[t]=1,n.state.waitingPhase[t]+=1),n.state.waitingTimeouts[t]=n.delay(function(){l(e)},s[n.state.waitingPhase[t]])):(n.state.waitingBusyBy&&n.state.waitingBusyBy===t&&(n.state.waitingBusyBy=""),n.warn("Превышено время ожидания для %c%s%c","color: deepskyblue;",t,""))):n.delay(function(){l(e)})}function c(e){!n.state.waitingBusyBy&&n.state.waitingQueue.length&&(e=n.state.waitingQueue.shift(),n.state.waitingBusyBy=e.waitingID,l(e))}return"function"==typeof t&&"function"==typeof a?(n.params.debug&&n.info("ожидание %c%s%c...","color: deepskyblue;",e,""),void 0===n.state.waitingTimeouts&&(n.state.waitingTimeouts=Object.create(null),n.state.waitingDelaysQuantity=n.state.waitingDelaysQuantity||{},n.state.waitingTimes=n.state.waitingTimes||{},n.state.waitingPhase=n.state.waitingPhase||{},n.state.waitingQueue=n.state.waitingQueue||[],(!n.state.waitingBusyBy||n.state.waitingBusyBy&&n.state.waitingBusyBy===e)&&(n.state.waitingBusyBy="")),"array"===m(s)?n.state.waitingDelaysQuantity[e]=s.length:n.state.waitingDelaysQuantity[e]=1,void 0===n.state.waitingTimes[e]&&(n.state.waitingTimes[e]=0,n.state.waitingPhase[e]=0,a={timestamp:d(),waitingID:e,condition:t,callback:a,parallel:r,abort:o},r?(n.params.debug&&n.info("%c%s%c вне очереди","color: deepskyblue;",e,""),l(a)):(n.params.debug&&n.info("%c%s%c добавлен в очередь","color: deepskyblue;",e,""),n.state.waitingQueue=n.state.waitingQueue.concat(a),c()))):n.warn("wait(%c%s%c, condition, callback): condition || callback не являются функцией","color: deepskyblue;",e,""),{next:c,abort:o}},addScripts:function(e,r,t){var n=this,s=[],a=t||3e5;function i(e){return-1!==(e=s.indexOf(e.src))&&s.splice(e,1),Array.prototype.concat(s)}function o(e){var a=!0;return Array.prototype.concat(e.exports).forEach(function(e){var t=window;e.split(".").forEach(function(e){return void 0===(t=t[e])&&(a=!1),a})}),a}function l(e){var t;o(e)?(s=i(e),"array"===m(e.plugins)&&e.plugins.length&&(s=c(e.plugins)),0===s.length&&n.call(r,null)):n.now()-e.timestamp<a?n.delay(function(){l(e)}):(s=i(e),t=n.error({action:"DepotProto.addScripts",message:"Превышено время ожидания загрузки",name:"TimeoutError",data:e}),n.call(r,t))}function c(e){return Array.prototype.concat(e).forEach(function(a){var e,t;o(a)||-1!==u.indexOf(a.src)?(a.timestamp=n.now(),l(a)):(s=s.concat(a.src),e=a.src,(t=document.createElement("script")).onerror=function(e){s=i(a);var t=n.error({action:"DepotProto.addScripts",message:"Ошибка загрузки",name:"NetworkError",data:a});n.call(r,t)},t.onload=function(){n.delay(function(){a.timestamp=n.now(),l(a)})},u.push(e),t.src=e,document.head.appendChild(t))}),Array.prototype.concat(s)}return e?s=c(e):n.call(r,null),n},getElements:function(e,r){var n=this,s=/^([a-z0-9]+)Selector$/i;return void 0===r&&(r=n.params.getElementsOutside),p.each(e||n.params,function(e,t){var a;"string"!=typeof t||(a=e.toString().match(s))&&(!(e=n.$container.find(t)).length&&r&&(e=p(t)),"container"!==a[1]&&(n["$"+a[1]]=e))}),n},getSelector:function(e){var t,a,r;switch(m(e)){case"string":r="."+e;break;case"undefined":t=this.$container;break;case"object":t=e;break;default:t=p(e)}return!r&&t&&t.length&&(r=(a=t.attr("class").match(/(?:^|\s)(js-[a-z-]+)/))?"."+a[1]:""),r},on:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===m(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),p.fn.on.apply(t.$container,a),t},one:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===m(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),p.fn.one.apply(t.$container,a),t},off:function(e){var t=this;if(void 0===e)return t;var a=Array.prototype.slice.call(arguments,1);return e="array"===m(e)?t.addEventNS(e[0],e[1]):t.addEventNS(e),a.unshift(e),p.fn.off.apply(t.$container,a),t},bind:function(e){var t,a,r;return void 0===e||("string"===m(arguments[1])?(a=arguments[1],r=arguments[2],(t=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(e,a))):(r=arguments[1],(t=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(e))),p.fn.on.apply(r,t)),this},unbind:function(e){var t,a,r;return"string"===m(arguments[1])?(a=arguments[1],r=arguments[2],(t=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(e,a))):(r=arguments[1],(t=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(e))),p.fn.off.apply(r,t),this},trigger:function(e){var t=Array.prototype.slice.call(arguments,1);return 1===t.length&&(t=t[0]),this.$container.trigger(e,t),this},triggerTo:function(e,t){var a,r,n;switch(m(e)){case"string":n=this.$container.find(e);break;case"object":n=e;break;default:n=p(e)}return"string"===m(arguments[2])?(r=arguments[2],(a=Array.prototype.slice.call(arguments,3)).unshift(this.addEventNS(t,r))):(a=Array.prototype.slice.call(arguments,2)).unshift(this.addEventNS(t)),n.length&&p.fn.trigger.apply(n,a),this},call:function(e){var t=Array.prototype.slice.call(arguments);if(t.shift(),"function"==typeof e)return e.apply(this,t)},filterItems:function(e,i,o){var l,c=this;return e.each(function(e,t){var r=!1,n=!1,a=p(t),s=a.data();p.each(i,function(e,t){if(void 0!==e&&void 0!==t){if(e=e.toString(),"all"===(t=t.toString())&&(r=!0),!(e=s[e]))return!1;var e=e.toString().split(/[ ,]+/),a=t.split(/[ ,]+/);p.each(e,function(e,t){if(void 0!==t&&(t=t.toString(),-1!==a.indexOf(t)))return!(n=!0)})}else n=!1}),(n||r)&&(l?l.add(t):l=p(t)),c.call(o,a,n,r)}),l},applyMixins:function(){var a=this;return a.call(a.params.preInit),a.params.extend&&p.isPlainObject(a.params.extend)&&(a=p.extend(!0,a,a.params.extend)),a.params.mixins&&a.params.mixins.length&&p.each(a.params.mixins,function(e,t){p.isPlainObject(t)?a=p.extend(!0,a,t):a.error({action:"DepotProto.applyMixins",data:{mixin:t},name:"TypeError",message:"Миксин должен быть объектом"})}),a},proxyCallback:function(t,a){var r=this;return function(){var e;return"function"==typeof t&&(e=t.apply(r,arguments)),a.apply(e,arguments)}},hasPlugin:function(e){var t=p[e]||p.fn[e];return t||this.warn("Необходим плагин *%s*",e),t},sandbox:function(e,n,s){var i=this;return("object"==typeof e?e:p(e||document)).each(function(e,t){function a(){return this}a.prototype=p.extend(!0,{},i);var r=new a;r.pluginName+="::"+(s||"sandbox"),p.data(t,r.pluginName)||p.data(t,r.pluginName,r._init.call(r,t,n))}),n},prefixed:function(r){var n=Object.create(null);return window.Modernizr?p.each(r,function(e){var t=r[e],a=Modernizr.prefixedCSS(e);!1===a&&(a=e),!1===(e=Modernizr.prefixedCSSValue(a,t))&&(e=t),n[a]=e}):(n=r,this.warn("Необходим *Modernizr* с функциями _prefixedCSS()_ и _prefixedCSSValue()_\n","https://modernizr.com/download?prefixedcss-prefixedcssvalue")),n},unbindEvents:function(){var e=this;return e.off(""),e.unbind("",e.$WINDOW),e.unbind("",e.$DOCUMENT),e.unbind("",e.$HTMLBODY),e},_init:function(e,t){var a=this;return a.hash=a.hashify(),a.eventNameSpace=a.getNameSpace(),a.params=a.translate(p.extend(!0,Object.create(null),a.defaults,t)),a.applyMixins(),a.$container=p(e),a.container=e,a.call(a.swapContainer),a.getElements(),a.state=a.getInitialState(),a.cache=Object.create(null),a.one("destroy",function(){a.unbindEvents()}),a.call(a.params.beforeInit),a.call(a.bindEvents),a.call(a.init),a}};p.depotProto=a,p.depotSandbox=function(){var t=Array.prototype.slice.call(arguments);return a.sandbox.apply(a,t),function(e){t[0]=e||t[0],a.sandbox.apply(a,t)}}}(jQuery),function(t){"use strict";var e={dictionary:{buttons:{apply:{ru:"Применить",en:"Apply"}}},calendarMonthPicker:{monthPickerGridTemplate:'<div class="calendar__grid">#{for month in monthList}${monthPickerButtonTemplate}#{endfor}</div>',monthPickerButtonTemplate:'<button class="calendar__month button button_calendar#{if month.isActive} is-active#{endif} ${monthPickerButtonsSelector|substr(1)}" type="button" data-date="${month.dateTime|date(Y-m-d)}"#{if month.disabled} disabled#{endif}><span class="button__label">${month.label}</span></button>#{if month.rowComplete}<div class="calendar__break"></div>#{endif}',monthPickerApplyTemplate:'<button class="calendar__button button button_general button_secondary button_block button_small ${monthPickerApplySelector|substr(1)}" type="button"><span class="button__label">_{buttons.apply}</span></button>',monthPickerButtonsSelector:".js-calendar-picker-month",monthPickerApplySelector:".js-calendar-picker-apply",onInit:null,onApply:null}};t.calendarMonthPickerMixin={monthPickerChange:function(e){var t=this,a=t.parseDateTime(e);return t.state.calendarMonthPicker.year=a.getFullYear(),t.state.calendarMonthPicker.month=a.getMonth()+1,t.state.calendarMonthPicker.date=e,t.state.calendarMonthPicker.dateTime=a,t.$monthPickerButtons.removeClass(t.params.activeClassName).filter('[data-date="'+t.state.calendarMonthPicker.date+'"]').addClass(t.params.activeClassName),t},initCalendarMonthPicker:function(){var s=this;s.getInitialState=s.proxyCallback(s.getInitialState,function(){return t.extend(!0,s.cleanObject(this),{calendarMonthPicker:{year:s.state.dateTime.getFullYear(),month:s.state.dateTime.getMonth()+1,date:s.state.date,dateTime:s.state.dateTime}})}),s.params=t.extend(!0,{},s.translate(e),s.params),s.getElements(s.params.calendarMonthPicker),s.state=s.getInitialState(),s.processTemplateContext=s.proxyCallback(s.processTemplateContext,function(){var e=this;return e.monthPickerButtonTemplate=s.params.calendarMonthPicker.monthPickerButtonTemplate,e.monthPickerButtonsSelector=s.params.calendarMonthPicker.monthPickerButtonsSelector,e.monthPickerGridTemplate=s.params.calendarMonthPicker.monthPickerGridTemplate,e.monthPickerApplyTemplate=s.params.calendarMonthPicker.monthPickerApplyTemplate,e.monthPickerApplySelector=s.params.calendarMonthPicker.monthPickerApplySelector,e.monthList=function(){for(var e=[],t=s.state.dateTime.getFullYear(),a=0;a<=11;a+=1){var r=new Date(t,a,1),n=s.formatDate(r);e.push({value:a,label:s.getText("month."+a+".full"),dateTime:r,isActive:s.state.calendarMonthPicker.date===n,disabled:!s.dateTimeInRange(r,s.state.minDateTime,s.state.maxDateTime),rowComplete:(a+1)%3==0})}return e},e}),s.params.onChange=s.proxyCallback(s.params.onChange,function(){s.getElements(s.params.calendarMonthPicker)}),s.bindEvents=s.proxyCallback(s.bindEvents,function(){s.on("click",s.params.calendarMonthPicker.monthPickerButtonsSelector,function(e){e.preventDefault(),e.stopPropagation(),e=t(this).data("date"),s.monthPickerChange(e)}),s.on("click",s.params.calendarMonthPicker.monthPickerApplySelector,function(e){e.preventDefault(),e.stopPropagation(),s.call(s.params.calendarMonthPicker.onApply)})}),s.call(s.params.calendarMonthPicker.onInit)}}}(jQuery),function(a){"use strict";var e={dictionary:{buttons:{backwards:{ru:"Предыдущий",en:"Previous"},forwards:{ru:"Следующий",en:"Next"}}},calendarNavigation:{step:"month",beforeTemplate:'<div class="calendar__before">${monthTemplate}${yearTemplate}${buttonBackwardsTemplate}${buttonForwardsTemplate}</div>',afterTemplate:'<div class="calendar__after"></div>',monthSelectTemplate:'<select class="calendar__select ${monthSelector|substr(1)}">#{for option in monthSelect}<option value="${option.value}"#{if option.selected} selected#{endif}>${option.label}</option>#{endfor}</select>',yearSelectTemplate:'<select class="calendar__select ${yearSelector|substr(1)}">#{for option in yearSelect}<option value="${option.value}"#{if option.selected} selected#{endif}>${option.label}</option>#{endfor}</select>',buttonBackwardsTemplate:'<button class="calendar__button calendar__button_backwards button button_round button_secondary ${buttonBackwardsSelector|substr(1)}" type="button" aria-label="${backwardsLabel}" title="${backwardsLabel}" ${backwardsDisabled}><span class="button__icon button__icon_backwards"></span></button>',buttonForwardsTemplate:'<button class="calendar__button calendar__button_forwards button button_round button_secondary ${buttonForwardsSelector|substr(1)}" type="button" aria-label="${forwardsLabel}" title="${forwardsLabel}" ${forwardsDisabled}><span class="button__icon button__icon_forwards"></span></button>',monthSelector:".js-calendar-month",yearSelector:".js-calendar-year",buttonBackwardsSelector:".js-calendar-backwards",buttonForwardsSelector:".js-calendar-forwards",onInit:null}};a.calendarNavigationMixin={initCalendarNavigation:function(){var o=this;o.getInitialState=o.proxyCallback(o.getInitialState,function(){return a.extend(!0,o.cleanObject(this),{calendarNavigation:{}})}),o.params=a.extend(!0,{},o.translate(e),o.params),o.getElements(o.params.calendarNavigation),o.state=o.getInitialState(),o.processTemplateContext=o.proxyCallback(o.processTemplateContext,function(){var e=this;return e.monthSelect=function(){for(var e=[],t=o.state.dateTime,a=t.getFullYear(),r=t.getMonth(),n=0;n<=11;n+=1){var s=new Date(a,n,1);e.push({value:n,label:o.getText("month."+n+".full"),disabled:!o.dateTimeInRange(s,o.state.minDateTime,o.state.maxDateTime),selected:n===r})}return e},e.yearSelect=function(){for(var e=[],t=o.state.dateTime.getFullYear(),a=o.state.minDateTime,r=o.state.maxDateTime,n=(new Date).getFullYear(),s=a?a.getFullYear():n-100,i=r?r.getFullYear():n;s<=i;--i)e.push({value:i,label:i,selected:i===t});return e},e.monthSelectTemplate=o.params.calendarNavigation.monthSelectTemplate,e.yearSelectTemplate=o.params.calendarNavigation.yearSelectTemplate,e.monthSelector=o.params.calendarNavigation.monthSelector,e.yearSelector=o.params.calendarNavigation.yearSelector,e.buttonBackwardsTemplate=o.params.calendarNavigation.buttonBackwardsTemplate,e.buttonForwardsTemplate=o.params.calendarNavigation.buttonForwardsTemplate,e.buttonBackwardsSelector=o.params.calendarNavigation.buttonBackwardsSelector,e.buttonForwardsSelector=o.params.calendarNavigation.buttonForwardsSelector,e.backwardsLabel=o.getText("buttons.backwards"),e.forwardsLabel=o.getText("buttons.forwards"),e.backwardsDisabled=function(){var e=o.state.dateTime,e="year"===o.params.calendarNavigation.step?new Date(e.getFullYear()-1,e.getMonth(),1):new Date(e.getFullYear(),e.getMonth()-1,1);return o.dateTimeInRange(e,o.state.minDateTime,null)?"":"disabled"},e.forwardsDisabled=function(){var e=o.state.dateTime,e="year"===o.params.calendarNavigation.step?new Date(e.getFullYear()+1,e.getMonth(),1):new Date(e.getFullYear(),e.getMonth()+1,1);return o.dateTimeInRange(e,null,o.state.maxDateTime)?"":"disabled"},e}),o.params.onChange=o.proxyCallback(o.params.onChange,function(){o.getElements(o.params.calendarNavigation)}),o.bindEvents=o.proxyCallback(o.bindEvents,function(){o.on("click",o.params.calendarNavigation.buttonBackwardsSelector,function(e){e.preventDefault(),e.stopPropagation();var t=o.state.dateTime,a=o.state.minDateTime,e=o.state.maxDateTime,t="year"===o.params.calendarNavigation.step?new Date(t.getFullYear()-1,t.getMonth(),1):new Date(t.getFullYear(),t.getMonth()-1,1);(a&&a<=t||!a)&&(e&&t<=e||!e)&&o.render(t)}),o.on("click",o.params.calendarNavigation.buttonForwardsSelector,function(e){e.preventDefault(),e.stopPropagation();var t=o.state.dateTime,a=o.state.minDateTime,e=o.state.maxDateTime,t="year"===o.params.calendarNavigation.step?new Date(t.getFullYear()+1,t.getMonth(),1):new Date(t.getFullYear(),t.getMonth()+1,1);(a&&a<=t||!a)&&(e&&t<=e||!e)&&o.render(t)}),o.on("change input",o.params.calendarNavigation.monthSelector,function(e){e.preventDefault(),e.stopPropagation();var t=parseInt(a(this).val(),10),e=o.state.dateTime,e=new Date(e.getFullYear(),t,e.getDate());o.render(e)}),o.on("change input",o.params.calendarNavigation.yearSelector,function(e){e.preventDefault(),e.stopPropagation();var t=parseInt(a(this).val(),10),e=o.state.dateTime,e=new Date(t,e.getMonth(),e.getDate());o.render(e)})}),o.call(o.params.calendarNavigation.onInit)}}}(jQuery),function(s){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotAnchors",defaults:{stickySelector:".js-header",sectionsSelector:".js-anchors-section",buttonsSelector:".js-anchors-button",getElementsOutside:!0,paramName:"section"},getInitialState:function(){return{hashRe:RegExp(this.params.paramName+"=(.*)"),bounds:{},viewport:{},sectionId:null,isAnimated:!1}},setActive:function(e){var t=this,a=!1;return t.state.sectionId!==e&&(t.setPassive(t.state.sectionId),t.state.sectionId=e,t.$buttons.filter('[href="#'+e+'"]').addClass(t.params.activeClassName),a=!0),s.depotHash.replaceMatched(t.state.hashRe,t.params.paramName+"="+e),a},setPassive:function(e){return this.$buttons.filter('[href="#'+e+'"]').removeClass(this.params.activeClassName),this},goTo:function(e,t,a){var r,n=this,s=n.getBounds(e),i=n.getViewport();return s&&i&&(i=s.top-i.offsetTop,(n.setActive(e)||a)&&(n.state.isAnimated=!0,r="wheel mousewheel DOMMouseScroll touchmove pointermove MSPointerMove",n.bind(r,n.$BODY,function(e){("pointermove"!==e.type||"pointermove"===e.type&&"mouse"!==e.originalEvent.pointerType)&&(n.$HTMLBODY.stop(),n.unbind(r,n.$BODY))}),n.$HTMLBODY.stop().animate({scrollTop:i},t?0:n.params.duration,function(){n.state.isAnimated=!1,n.unbind(r,n.$BODY)}))),n},getBounds:function(e){return this.updateBounds(e),this.state.bounds[e]},getViewport:function(){return this.state.viewport},updateBounds:function(e){var n=this,t=n.$sections;return void 0!==e&&(t=n.$sections.filter('[id="'+e+'"]')),t.each(function(e,t){var a=s(t),r=t.id,a=(t=a.offset().top)+a.outerHeight(!0);n.state.bounds[r]={top:t,bottom:a}}),n},updateViewport:function(){var e=this,a=0;e.$sticky.each(function(e,t){a+=t.offsetHeight});var t=e.$WINDOW.scrollTop(),r=e.$WINDOW.height(),n=t+a,s=t+r-a,r=n+(r-a)/2;return e.state.viewport={top:t,bottom:s,middle:r,offsetTop:a,positionTop:n},e},checkBounds:function(){var e=this,i=e.getViewport(),o=null;return e.state.isAnimated||(s.each(e.state.bounds,function(e,t){var a=!0,r=t.top>=i.positionTop&&t.bottom<=i.bottom,n=t.top<=i.positionTop&&t.bottom>=i.bottom,s=t.top<=i.positionTop&&t.bottom>=i.middle,t=t.top<=i.middle&&t.bottom>=i.bottom;return(r||n||s||t)&&(o=e,a=!1),a}),o?e.setActive(o):s.depotHash.removeMatched(e.state.hashRe)),e},bindEvents:function(){var a=this;return a.bind("resize",a.$WINDOW,function(){a.throttle("resize",function(){a.updateViewport(),a.updateBounds()},15)}),a.bind("scroll",a.$WINDOW,function(){a.throttle("scroll",function(){a.updateViewport(),a.checkBounds()},15)}),a.bind("load",a.$WINDOW,function(){a.throttle("load",function(){a.updateBounds(),a.checkBounds()})}),a.$container.on("click",a.params.buttonsSelector,function(e){e.preventDefault();var t=s.depotHash.get(this);a.debounce("go",function(){a.goTo(t,!1,!0)})}),a},init:function(){var t=this;return t.updateViewport(),t.updateBounds(),s.depotHash.getMatched(t.state.hashRe,function(e){t.goTo(e.replace(t.state.hashRe,"$1"),!0)}),t.call(t.params.onInit),t}}),s.fn.depotAnchors=function(a){return this.each(function(e,t){s.data(this,"depotAnchors",new r(t,a))})}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}function u(e,t,a){if("array"===n.depotProto.getType(e))for(var r=1;r<=a;r+=1)e.push(t);return e}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"depotCalendar",defaults:{viewportSelector:".js-calendar-viewport",daysSelector:".js-calendar-day",template:'${beforeTemplate}<div class="calendar__viewport ${viewportSelector|substr(1)}">${gridTemplate}</div>${afterTemplate}',beforeTemplate:'<div class="calendar__before">${monthTemplate} ${yearTemplate}</div>',afterTemplate:'<div class="calendar__after"></div>',monthTemplate:'<div class="calendar__month">${month}</div>',yearTemplate:'<div class="calendar__year">${year}</div>',labelsTemplate:'<div class="calendar__labels">#{for label in labels}<div class="calendar__label">${label.short}</div>#{endfor}</div>',gridTemplate:'<div class="calendar__grid">${labelsTemplate}#{for day in days}#{if day.day}<div class="calendar__day ${day.className|join( )} ${daysSelector|substr(1)}" data-date="${day.dateTime}"#{if day.extra} ${day.extra|extra}#{endif}>${dayTemplate}</div>#{if day.weekComplete}<div class="calendar__break"></div>#{endif}#{else}<div class="calendar__day is-external"></div>#{endif}#{endfor}</div>',dayTemplate:'<time datetime="${day.dateTime}">${day.day}</time>'},dateTimeInRange:function(e,t,a){return(t&&t<=e||!t)&&(a&&e<=a||!a)},parseDateTime:function(e,t){return e instanceof Date?e:"string"!=typeof e?void 0!==t?t:new Date:(e=e.split(/[^0-9]/).map(function(e){return parseInt(e,10)}),new Date(e[0],e[1]-1,e[2],e[3]||null,e[4]||null,e[5]||null))},formatDate:function(e,t){return this.format("#{if format}${datetime|date(${format})}#{else}${datetime|date}#{endif}",{datetime:e,format:t})},processDayData:function(e){return e.dateTime===this.formatDate(new Date)&&e.className.push("is-current"),e},processTemplateContext:function(e){return e},getDaysArray:function(e){for(var t=e.getFullYear(),a=e.getMonth(),r=new Date(t,a,1),n=new Date(t,a+1,0),e=r.getDay(),r=n.getDay(),s=u([],!1,0<=e-1?e-1:6),i=s.length,o=1;o<=n.getDate();o+=1){i+=1;var l=new Date(t,a,o),c=this.formatDate(l),l=this.processDayData({year:t,month:a,day:o,dateTime:c,date:l,weekComplete:i%7==0&&l.getTime()!==n.getTime(),className:[],extra:{}});s.push(l)}return u(s,!1,0===r?0:7-r)},getLabelsArray:function(){for(var e=[],t=0;t<7;t+=1){var a=t+1;6<a&&(a=0),e.push(this.getText("weekday."+a))}return e},render:function(e){var t=this;e?(t.state.date=t.formatDate(e),t.state.dateTime=e):e=t.state.dateTime;var a=t.processTemplateContext({viewportSelector:t.params.viewportSelector,labelsTemplate:t.params.labelsTemplate,gridTemplate:t.params.gridTemplate,dayTemplate:t.params.dayTemplate,daysSelector:t.params.daysSelector,beforeTemplate:t.params.beforeTemplate,afterTemplate:t.params.afterTemplate,monthTemplate:t.params.monthTemplate,yearTemplate:t.params.yearTemplate,month:function(){return t.formatDate(e,"F")},year:function(){return t.formatDate(e,"Y")},days:function(){return t.getDaysArray(e)},labels:t.getLabelsArray,dictionary:t.params.dictionary}),a=t.format(t.params.template,a);return t.$container.html(a),t.call(t.params.onChange),t},bindEvents:function(){var a=this;return a.on("calendar:view",function(e,t){t=a.parseDateTime(t.dateTime),a.render(t)}),a},getInitialState:function(){var e=this,t=e.$container.data(),a=e.parseDateTime(t.date);return{date:e.formatDate(a),dateTime:a,minDateTime:e.parseDateTime(t.min,null),maxDateTime:e.parseDateTime(t.max,null)}},init:function(){var e=this;return e.render(e.state.dateTime),e.call(e.params.onInit),e}}),n.fn.depotCalendar=function(a){return this.each(function(e,t){n.data(this,"depotCalendar",new r(t,a))})}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotDropdown",defaults:{toggleSelector:".js-dropdown-toggle",panelSelector:".js-dropdown-panel",kickOff:!1,onClick:null,beforeExpand:null,onExpand:null,onCollapse:null},expand:function(){var t=this;return t.call(t.params.beforeExpand)||(t.state.expanded=!0,t.hasPlugin("aria")&&(t.$toggle.aria("expanded","true"),t.$panel.attr("hidden",!1)),t.params.kickOff&&(t.bind("click",t.$DOCUMENT,function(e){r(e.target).closest(t.$container.get(0)).length||t.collapse()}),t.bind("keyup",t.$DOCUMENT,function(e){e.which===t.KEYS.ESCAPE&&t.collapse()})),t.call(t.params.onExpand)),t},collapse:function(){var e=this;return e.state.expanded=!1,e.hasPlugin("aria")&&(e.$toggle.aria("expanded","false"),e.$panel.attr("hidden",!0)),e.params.kickOff&&(e.unbind("click",e.$DOCUMENT),e.unbind("keyup",e.$DOCUMENT)),e.call(e.params.onCollapse),e},toggle:function(){return this.state.expanded?this.collapse():this.expand(),this},bindEvents:function(){var t=this;return t.bind("click",t.$toggle,function(e){e.preventDefault(),e.stopPropagation(),t.debounce("toggle",function(){t.toggle()})}),t.on("click",t.params.panelSelector,function(e){t.call(t.params.onClick,e)}),t},init:function(){return this.call(this.params.onInit),this}}),r.fn.depotDropdown=function(a){return this.each(function(e,t){r.data(this,"depotDropdown",new n(t,a))})}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"depotFigure",defaults:{sourceSelector:".js-figure-source",captionSelector:".js-figure-caption",zoomSelector:".js-figure-zoom",playSelector:".js-figure-play",excludeSelector:".is-cloned",dataCollectionParam:"collection",dataTypeParam:"type"},getItemId:function(e){return e.data("id")},getItemType:function(e){return e.data("type")||e.attr("itemprop")},getItemSrc:function(e){return e.data("original")||e.attr("src")},getItemUrl:function(e){return e.data("url")||""},getItemThumb:function(e){return e.data("thumb")||e.data("poster")||e.attr("src")},getItemCaption:function(e){return e&&e.length?e.text().trim():void 0},getCollectionId:function(e){return e.data(this.params.dataCollectionParam)},getItemData:function(e){var t=this;void 0===e&&(e=t.$container);var a=e.find(t.params.sourceSelector),r=t.getItemId(e),n=t.getCollectionId(e);return{id:r,type:t.getItemType(e),src:t.getItemSrc(a),thumb:t.getItemThumb(a),url:t.getItemUrl(a),caption:t.getItemCaption(e.find(t.params.captionSelector)),collection:n}},getCollectionData:function(){var a=this,r={item:a.getItemData(),collection:{items:[]}},e=a.$container.data(a.params.dataCollectionParam);return"string"==typeof e&&e.length?(e=n(a.format('[data-${param}="${value}"]',{param:a.params.dataCollectionParam,value:e}))).length&&e.filter(function(e,t){return 0===n(t).closest(a.params.excludeSelector).length}).each(function(e,t){r.collection.items.push(a.getItemData(n(t)))}):r.collection.items.push(a.state.item),r},stop:function(){var e,t=this;return"video"===t.state.item.type?"function"==typeof(e=t.$source.get(0)).pause&&e.pause():"youtube"===t.state.item.type&&t.$iframe&&t.$iframe.length&&t.$iframe.remove(),t.$play.prop("disabled",!1),t},play:function(){var t=this;return t.$play.prop("disabled",!0),"video"===t.state.item.type?t.$source.get(0).play():"youtube"===t.state.item.type&&t.addScripts({src:"https://www.youtube.com/iframe_api",exports:"YT"},function(e){e||(t.$iframe=n('<div class="figure__iframe" id="'+t.state.item.url+'">'),t.$source.parent().append(t.$iframe),YT.ready(function(){var e=new YT.Player(t.state.item.url,{width:t.$iframe.width(),height:t.$iframe.height(),videoId:t.state.item.url,playerVars:{controls:1,enablejsapi:1,fs:0,hl:t.LANGUAGE,origin:window.location.origin,color:"white",rel:0,showinfo:0,autoplay:1}});t.$iframe=n(e.f)}))}),t},zoom:function(){return this.$WINDOW.trigger("screen:show",this.getCollectionData()),this},bindEvents:function(){var a=this;return a.on("click",a.params.zoomSelector,function(e){e.preventDefault(),a.stop(),a.zoom()}),a.on("click",a.params.playSelector,function(e){e.preventDefault(),a.play()}),a.on("figure:stop",a.stop.bind(a)),a.on("figure:getCollection",function(e,t){a.call(t.callback,a.getCollectionData())}),a},getInitialState:function(){return{item:this.getItemData()}},init:function(){var e=this;return n.depotHash.has(e.state.item.id)&&e.zoom(),e.call(e.params.onInit),e}}),n.fn.depotFigure=function(a){return this.each(function(e,t){n.data(this,"depotFigure",new r(t,a))})},n.depotProto.$DOCUMENT.on("figure:added",function(e,t){(e=(e=n(e.target)).is(".js-figure")?e:e.find(".js-figure"))&&e.length&&e.depotFigure(t)})}(jQuery),function(d){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=d.extend(!0,{},d.depotProto,{pluginName:"depotForm",defaults:{fields:'input:not([type="hidden"]), textarea, select',fieldSelector:".js-form-field",fieldErrorSelector:".js-form-field-error",submitButtonSelector:'.js-form-submit, [type="submit"]',busyClassName:"is-busy",validClassName:"is-valid",invalidClassName:"is-invalid",processingClassName:"is-processing",preventBadSubmit:!0,preventRepeatedSubmit:!0,ajax:!1,dataType:"json",processData:null,validation:!0,validatorClassNamePrefix:"is-",forceValidation:!1,changeDebounce:100,requestHeaders:[],validators:{"is-required":{test:function(e,t,a){return a&&Boolean(a.length)},messagePath:"errors.required"},"is-string":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^([a-zа-яё.'" -]{1,256})$/gi.test(a)},messagePath:"errors.value"},"is-number":{test:function(e,t,a){return!(a&&a.length)||/^([0-9-]{1,256})$/gi.test(t)},messagePath:"errors.number"},"is-email":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^[a-z0-9](['_.-a-z0-9]+)[@]([a-z0-9]+)([.-a-z0-9]+)+[.]([a-z]{2,})$/i.test(t)},messagePath:"errors.email"},"is-tel":{test:function(e,t,a){var r=a&&Boolean(a.length),n=a.replace(/[^0-9+]/g,""),s=""!==a.replace(/[0-9() +-]/g,""),a=/([() +-]+)\1+/g.test(a),n=/^[+]?[0-9]{7,}$/i.test(n);return!r||!s&&!a&&n},messagePath:"errors.tel"},"is-date":{test:function(e,t,a){var r,n,s,i=a&&Boolean(a.length),o=!1,l=a.replace(/[^0-9.]/g,"").match(/^([0-3][0-9])\.([0-1][0-9])\.([1-2][09][0-9]{2})$/);return l&&4===l.length&&(r=parseInt(l[1],10),n=parseInt(l[2],10)-1,s=parseInt(l[3],10),isNaN(r)||isNaN(n)||isNaN(s)||(a=new Date(s,n,r)||!1,l=(new Date).getFullYear(),o=r===a.getDate()&&n===a.getMonth()&&s===a.getFullYear()&&l-100<=s&&s<=l+100)),!i||Boolean(o)},messagePath:"errors.value"},"is-message":{test:function(e,t,a){var r=a&&Boolean(a.length),n=e.minLength&&-1!==e.minLength?e.minLength:0,e=e.maxLength&&-1!==e.maxLength?e.maxLength:"",e=new RegExp("^(.{"+n+","+e+"})","g");return!r||e.test(a)},messagePath:"errors.message"},"is-password":{test:function(e,t,a){return!(a&&Boolean(a.length))||/^([^а-яё ])/gi.test(a)},messagePath:"errors.password"},"is-minlength":{test:function(e,t,a){return!(a&&Boolean(a.length))||a.length>=e.minLength},messagePath:"errors.minlength"},"is-maxlength":{test:function(e,t,a){return!(a&&Boolean(a.length))||a.length<=e.maxLength},messagePath:"errors.maxlength"},"is-same":{test:function(a,e,t){var r,n=this,s=!1,i=t&&Boolean(t.length);return(t=(t=a.className.match(/is-same:([^ ]+)/))?t[0]:void 0)&&(n.state.same[t]||(n.state.same[t]={elements:[],name:void 0,isSame:!0}),r=!1,d.each(n.state.same[t].elements,function(e,t){return a.name===t.name&&(r=!0),!r}),r||(n.state.same[t].elements.push(a),void 0===n.state.same[t].name&&(n.state.same[t].name=n.state.same[t].elements[0].name,n.state.same[t].value=n.state.same[t].elements[0].value)),1<n.state.same[t].elements.length&&(n.state.same[t].name===a.name?(n.state.same[t].value=e,s=!0,d.each(n.state.same[t].elements,function(e,t){e&&n.validateField(t)})):s=n.state.same[t].value===e)),!i||s},messagePath:"errors.match"},"is-external":{test:function(e,t,a){return a=a&&Boolean(a.length),e=d.data(e,"external")||[],t=t.replace(/[^a-zа-яё0-9]/gi,""),!a||-1===e.indexOf(t)}},"is-select":{test:function(e,t,a){return""!==a&&"0"!==a&&"-1"!==a},messagePath:"errors.choose"},"is-checked":{test:function(e,t,a){return this.state.choose=this.state.choose||{},(e=this.$container.find(this.params.fields).filter('[name="'+e.name+'"]'))&&!!e.filter(":checked").length},messagePath:"errors.choose"}},formatters:{"to-date":{patterns:["([0-9]{2})","([0-9]{2})"],separators:[".","."],permitted:"0-9."},"to-time":{patterns:["([0-9]{2})"],separators:[":"],permitted:"0-9:"},"to-card":{patterns:["([0-9]{4})","([0-9]{5})","([0-9]{4})"],separators:[" "," "],permitted:"0-9 "},"to-tel":{patterns:["([+]?)","([0-9])","([0-9]{3})","([0-9]{3})","([0-9]{2})"],separators:[""," (",") ","-","-"],permitted:"0-9+)(-"}},modifiers:{"to-upper":function(e,t,a,r,n){var s=e.key,e=t.maxLength&&t.value.length>=t.maxLength;!s.length||e&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(r+s+n).toUpperCase(),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)},"to-number":function(e,t,a,r,n){var s=/[^0-9-.,]/g,i=e.key.replace(s,""),e=-1!==t.maxLength&&t.value.length>=t.maxLength;!i.length||e&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(r+i+n).replace(s,""),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)},"to-phone":function(e,t,a,r,n){var s=/[^0-9( )+-]/g,i=e.key.replace(s,""),e=t.maxLength&&t.value.length>=t.maxLength;!i.length||e&&t.selectionStart===t.selectionEnd?(t.selectionStart=a,t.selectionEnd=a):(t.value=(r+i+n).replace(s,""),t.selectionStart=a+1,t.selectionEnd=t.selectionStart)}},dictionary:{errors:{required:{ru:"Обязательное поле",en:"Required"},value:{ru:"Недопустимое значение",en:"Invalid value"},email:{ru:"Некорректный e-mail",en:"Invalid e-mail"},number:{ru:"Только числа",en:"Only numbers"},tel:{ru:"Некорректный формат номера",en:"Incorrect number format"},message:{ru:"Сообщение слишком короткое",en:"The message is too short"},password:{ru:"Пароль должен содержать латинские буквы, символы и цифры",en:"Password must contain latin letters, symbols and numbers"},minlength:{ru:"Минимум ${minLength} ${minLength|plural(символ,символа,символов)}",en:"Minimum length ${minLength} ${minLength|plural(character,characters)}"},maxlength:{ru:"Максимум ${maxLength} ${maxLength|plural(символ,символа,символов)}",en:"Maximum length ${maxLength} ${minLength|plural(character,characters)}"},choose:{ru:"Необходимо выбрать",en:"Choose"},match:{ru:"Поля должны совпадать",en:"Fields must match"}}},onChangeSubmit:!1,onChange:null,onSubmit:null,onReset:null,onError:null,onProgress:null,onValidation:null},normalizeFieldName:function(e){return e&&e.replace(/[\[\]]/gi,"-")||e},filterArray:function(a,r){var n=[];return Array.prototype.filter?n=a.filter(r):d.each(a,function(e,t){r(t,e,a)&&n.push(t)}),n},startProcessingForm:function(){return this.state.processing=!0,this.$container.addClass(this.params.processingClassName),this},stopProcessingForm:function(){return this.state.processing=!1,this.$container.removeClass(this.params.processingClassName),this},storeFields:function(){var a=this;return a.state.fields=a.state.fields||{},a.$container.find(a.params.fields).each(function(e,t){a.addField(t)}),a},addField:function(e){var t=this;return e&&e.id&&t.state.fields&&!t.state.fields[e.id]&&(t.state.fields[e.id]={canValidate:!1,changed:t.isChangedField(e),busy:t.isBusyField(e)}),t},removeField:function(e){var t=this;return e&&e.id&&(t.state.fields&&!t.state.fields[e.id]&&delete t.state.fields[e.id],t.state.errors&&!t.state.errors[e.id]&&delete t.state.errors[e.id]),t},switchValidation:function(e){return(e=this.state.fields[e.id])&&e.changed&&(e.canValidate=!0),this},checkFieldChanges:function(e){var t=this.state.fields[e.id];return t&&!t.changed&&this.isChangedField(e)&&(t.changed=!0,this.removeExternalErrorFor(e)),this},busyField:function(e){var t=this,a=t.state.fields[e.id];return a&&(a.busy=!0,t.delay(function(){!0===a.busy&&d(e).closest(t.params.fieldSelector).addClass(t.params.busyClassName)})),t},freeField:function(e,t){var a=this,r=a.state.fields[e.id];return r&&(r.busy=!1,a.delay(function(){!1!==r.busy&&!t||d(e).closest(a.params.fieldSelector).removeClass(a.params.busyClassName)})),a},isMultipart:function(){return this.container.enctype&&"multipart/form-data"===this.container.enctype.toLocaleLowerCase()},isBusyField:function(e){var t=-1!==e.type.indexOf("select");return!t&&0<e.value.length||t&&"0"!==e.value&&"-1"!==e.value&&""!==e.value},isChangedField:function(e){var t=-1!==e.type.indexOf("select"),a="checkbox"===e.type,r="radio"===e.type;return e=t?"0"!==e.value&&"-1"!==e.value&&""!==e.value:a||r?e.checked!==e.defaultChecked:e.value!==e.defaultValue},updateBusynessField:function(e){return this.isBusyField(e)?this.busyField(e):this.freeField(e),this},updateBusynessForm:function(){var e=this;return e.$container.find(e.params.fields).each(function(){e.updateBusynessField(this)}),e},validateForm:function(){var e=this;return e.$container.find(e.params.fields).each(function(){e.validateField(this)}),e.checkSubmit(),e.call(e.params.onValidation,e.state.errors),e},validateField:function(s){var e,t,a,i=this,o=!0;return i.params.validators&&(t=d(s),(a=((s.required?i.params.validatorClassNamePrefix+"required ":"")+s.className).trim().split(/[ ]+/)||[]).length&&(e=t.closest(i.params.fieldSelector),t=i.state.fields[s.id],a=i.filterArray(a,function(e){return 0===e.indexOf(i.params.validatorClassNamePrefix)}),d.each(a,function(e,t){var a,r,n=i.params.validators[t.replace(/:(.*)/,"")];n?"function"==typeof n.test&&(r=(a=s.value).trim(),i.call(n.test,s,a,r)||s.disabled?i.removeErrorFor(s,t):(o=!1,i.setErrorFor(s,t,n.message,n.messagePath))):0!==t.indexOf(i.params.validatorClassNamePrefix+"external-")||(r=d.data(s,"external")||[]).length&&(n=d.data(s,"message"),t=s.value.replace(/[^a-zа-яё0-9]/gi,""),-1===r.indexOf(t)||s.disabled?i.removeExternalErrorFor(s):(o=!1,i.setExternalErrorFor(s,n)))}),o&&t&&t.canValidate&&t.changed&&t.busy?e.addClass(i.params.validClassName):e.removeClass(i.params.validClassName))),o},setExternalErrorFor:function(e,t){var a,r,n;return e&&(a=this.params.validatorClassNamePrefix+"external-"+this.normalizeFieldName(e.name),r=d.data(e,"external")||[],n=e.value.replace(/[^a-zа-яё0-9]/gi,""),-1===r.indexOf(n)&&(r.push(n),d.data(e,"external",r),d.data(e,"message",t)),this.setErrorFor(e,a,t)),this},removeExternalErrorFor:function(e){var t=this.params.validatorClassNamePrefix+"external-"+this.normalizeFieldName(e.name);return this.removeErrorFor(e,t),this},setErrorFor:function(e,t,a,r){var n,s,i=this;return e&&(s=(n=e.id).split(":")[0],i.state.errors[s]||(i.state.errors[s]=[]),-1===i.state.errors[s].indexOf(t)&&i.state.errors[s].push(t),i.state.fields[n]&&i.state.fields[n].canValidate||i.state.submitted?(i.showErrorMessage(e,t,a,r),void 0!==e.willValidate&&!0===e.willValidate&&e.setCustomValidity(i.getValidatorMessage(a,r,e))):i.hideErrorMessage(e,t,a,r)),i},removeErrorFor:function(e,t){var a,r,n=this;return e&&(a=e.id.split(":")[0],n.state.errors[a]&&(r=t+"-"+n.normalizeFieldName(e.name),t=n.state.errors[a].indexOf(t),r=n.state.errors[a].indexOf(r),-1!==t&&n.state.errors[a].splice(t,1),-1!==r&&n.state.errors[a].splice(r,1),n.state.errors[a].length||(n.removeErrorsFor(e),void 0!==e.willValidate&&e.setCustomValidity("")))),n},removeErrorsFor:function(e,t){var a;return e&&(a=e.id.split(":")[0],(this.state.errors[a]||t)&&(delete this.state.errors[a],this.hideErrorMessage(e))),this},showErrorMessage:function(n,e,s,i){var o=this;return n&&o.delay(function(){var e,t=d(n),a=t.closest(o.params.fieldSelector),r=a.find(o.params.fieldErrorSelector);a.removeClass(o.params.validClassName),a.addClass(o.params.invalidClassName),t.trigger(o.addEventNS("invalid")),r&&r.length&&(e=o.getValidatorMessage(s,i,n))&&(a.attr("title",e),r.text(e),r.aria("hidden","false")),t.aria("invalid","true"),t.aria("describedby",r.attr("id"))}),o},hideErrorMessage:function(r){var n=this;return r&&n.delay(function(){var e=d(r),t=e.closest(n.params.fieldSelector),a=t.find(n.params.fieldErrorSelector);t.removeClass(n.params.invalidClassName),t.removeAttr("title"),e.aria("invalid","false"),e.removeAria("describedby"),a.text(""),a.aria("hidden","true")}),n},calculateErrors:function(){var a=0;return d.each(this.state.errors,function(e,t){t&&t.length&&(a+=t.length)}),a},getValidatorMessage:function(e,t,a){return e&&(e.length||!t)||(e=this.format(this.getText(t),a)),e},checkSubmit:function(){var e=this;return e.params.preventBadSubmit&&(e.calculateErrors()?(e.state.submitDisabled=!0,e.$submitButton.prop("disabled",!0)):(e.state.submitDisabled=!1,e.$submitButton.prop("disabled",!1))),e},getSelectionRange:function(e,t){var a,r,n=e.type,s=0,i=0;return-1!==["text","search","url","tel","email","password"].indexOf(n)&&(i="number"==typeof e.selectionStart?(s=e.selectionStart,e.selectionEnd):(a=document.selection.createRange(),r=e.createTextRange(),n=e.createTextRange(),e=e.value.length,r.moveToBookmark(a.getBookmark()),n.collapse(!1),-1<r.compareEndPoints("StartToEnd",n)?s=e:(s=-r.moveStart("character",-e),-r.moveEnd("character",-e)))),t?{begin:s,end:i}:s},setSelection:function(e,t){"function"==typeof e.setSelectionRange&&-1!==["text","search","URL","tel","password"].indexOf(e.type)?(e.focus(),e.setSelectionRange(t.begin,t.end)):"function"==typeof e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t.begin),e.moveStart("character",t.end),e.select())},getCursorPosition:function(e){return this.getSelectionRange(e,!1)},setCursorPosition:function(e,t){return this.setSelection(e,{begin:t,end:t})},maskField:function(n,s){var i,o=this;return o.params.formatters&&(n.ctrlKey||n.shiftKey||n.metaKey||n.altKey||-1!==[8,9,16,35,36,37,38,39,40,46].indexOf(n.which)||s.className&&s.className.length&&(i=s.className.split(" "),d.each(o.params.formatters,function(e,t){var a,r;return-1!==i.indexOf(e)&&t&&t.patterns&&t.separators&&(n.which&&(r=(a=o.getCursorPosition(s))===s.value.length),o.formatField(s,t.patterns,t.separators,t.permitted),n.which&&(r?o.setCursorPosition(s,s.value.length):o.setCursorPosition(s,a))),!0}))),o},formatField:function(r,n,s,e){var i,o=this,t=r.value,a="";d.each(s.join("").split(""),function(e,t){-1===a.indexOf(t)&&(a+=t)}),a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var l=t.replace(new RegExp("["+a+"]","ig"),"");e&&(l=l.replace(new RegExp("[^"+e+"]","ig"),""));var c="",u="$1";d.each(n,function(e){var t=n[e]||"",a=s[e]||"";c+=t,(t=new RegExp(c,"i")).test(l)&&(i=l.replace(t,u+a),r.value!==i&&(r.value=i,d(r).trigger(o.addEventNS("masked")))),u+=a+"$"+(e+2)})},modifyField:function(n,s){var i=this;return i.params.modifiers&&(n.ctrlKey||n.metaKey||!n.key||1!==n.key.length||d.each(i.params.modifiers,function(e,t){var a,r;return s.className&&s.className.length&&-1!==s.className.split(" ").indexOf(e)&&t&&"function"==typeof t&&(n.preventDefault(),a=Math.min(s.selectionStart,s.selectionEnd),r=s.value.substr(0,s.selectionStart),e=s.value.substr(s.selectionEnd,s.value.length),i.call(t,n,s,a,r,e)),!0})),i},deleteFormData:function(){return delete this.state.formData},getFormData:function(e){var t=this,a=t.call(t.params.processData);return a||(t.isMultipart()?(a=new FormData(t.container),e&&(a=d.depotParse(a,{reverse:!0}))):a=t.$container.serialize()),a},submit:function(e){var r,n=this;return n.state.processing||(n.state.submitted=!0,n.startProcessingForm(),n.params.validation&&(n.state.validation=!0,n.validateForm()),n.params.validation&&n.calculateErrors()?(e&&"function"==typeof e.preventDefault&&e.preventDefault(),n.stopProcessingForm()):"function"==typeof n.params.onSubmit?(r=n.getFormData(),n.params.preventRepeatedSubmit&&n.state.formData===r?(n.params.ajax&&e&&"function"==typeof e.preventDefault&&e.preventDefault(),n.stopProcessingForm(),n.call(n.params.onSubmit,n.state.response)):(n.state.formData=r,n.params.ajax?(e&&"function"==typeof e.preventDefault&&e.preventDefault(),d.ajax(d.extend(!0,n.isMultipart()?{processData:!1,contentType:!1}:{},{url:n.$container.attr("action")||"",type:n.$container.attr("method")||"GET",data:r,dataType:n.params.dataType,cache:n.params.cache,xhr:function(){var e=d.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){n.call(n.params.onProgress,e)},!0),e},beforeSend:function(t){n.params.requestHeaders.length&&n.params.requestHeaders.forEach(function(e){t.setRequestHeader(e.name,e.value)})},success:function(e,t,a){n.stopProcessingForm(),n.state.response=e,n.call(n.params.onSubmit,e,t,a)},error:function(e,t,a){n.stopProcessingForm(),n.deleteFormData(),n.call(n.params.onError,e,t,a),n.error({action:"DepotForm.submit",data:{url:n.container.action||"",type:n.container.method||"GET",data:r},name:t,number:e.status,message:a})}}))):(n.call(n.params.onSubmit,e),n.stopProcessingForm()))):n.nativeSubmit()),n},reset:function(e){var t=this;return e&&e.preventDefault(),t.$container.find(t.params.fields).each(function(e,t){d(t).trigger("reset")}),t.state=t.getInitialState(),t.delay(function(){t.storeFields(),t.validateForm()},0),e&&"object"==typeof e&&"reset"===e.type&&t.call(t.params.onReset,e),t},resetField:function(e){var a=this,t=d(e);return t.is("select")?t.find("option").each(function(e,t){a.delay(function(){t.selected=t.defaultSelected})}):t.is('[type="radio"]')||t.is('[type="checkbox"]')?e.checked=e.defaultChecked:e.value=e.defaultValue,a.state.fields[e.id]={canValidate:!1,changed:a.isChangedField(e),busy:a.isBusyField(e)},a},clearField:function(e){var t=d(e);return t.is("select")?t.find("option").each(function(e,t){t.selected=0===e,t.defaultSelected=!1}):t.is('[type="radio"]')||t.is('[type="checkbox"]')?(e.checked=!1,e.defaultChecked=!1):(e.value="",e.defaultValue=""),this},update:function(){return this.updateBusynessForm(),this.validateForm(),this},bindEvents:function(){var r=this;return r.nativeSubmit=r.container.submit.bind(r.container),r.nativeReset=r.container.reset.bind(r.container),r.container.submit=r.submit.bind(r),r.container.reset=r.reset.bind(r),r.on("focusout",r.params.fields,function(){var e=this,t=e.id;r.throttle(["focusout",t].join("-"),function(){r.switchValidation(e),r.params.validation&&r.validateField(e)})}),r.on("keypress",r.params.fields,function(e){r.modifyField(e,this)}),r.on("keyup",r.params.fields,function(e){var t=this,a=t.id;r.throttle([e.type,a].join("-"),function(){r.maskField(e,t)},r.params.changeDebounce)}),r.on("change input keyup invalid update",r.params.fields,function(e){var t=this,a=t.id;r.throttle([e.type,a].join("-"),function(){r.updateBusynessField(t),r.checkFieldChanges(t),r.params.validation&&(r.validateField(t),r.checkSubmit())},r.params.changeDebounce),r.throttle(["onChange",a].join("-"),function(){r.call(r.params.onChange,e,t)}),r.params.onChangeSubmit&&r.submit()}),r.on("submit",function(e){r.state.processing?e.preventDefault():r.submit(e)}),r.on("reset",r.params.fields,function(e){var t=e.target;e.stopPropagation(),r.freeField(t,!0),r.removeErrorsFor(t,!0),r.resetField(t),r.validateField(t),r.checkSubmit()}),r.on("clear",r.params.fields,function(e){var t=e.target;e.stopPropagation(),r.freeField(t,!0),r.removeErrorsFor(t,!0),r.clearField(t),r.validateField(t)}),r.on("reset",function(e){r.reset(e)}),r.on("error",function(e){r.call(r.params.onError,e.data.error)}),r.$container.on("form:update",function(){r.throttle("form:update",function(){r.update()})}),r},getInitialState:function(){var e=Array.prototype.concat(this.params.requestHeaders||[]);return{fields:{},errors:{},same:{},submitted:!1,submitDisabled:!1,validation:this.params.forceValidation,requestHeaders:e}},init:function(){var e=this;return e.storeFields(),e.$submitButton.prop("disabled",Boolean(e.params.preventBadSubmit)),e.$container.prop("novalidate",Boolean(e.params.validation)),e.updateBusynessForm(),e.validateForm(),e.call(e.params.onInit),e}}),d.fn.depotForm=function(a){return this.each(function(e,t){d.data(t,"depotForm",new r(t,a))})}}(jQuery),function(s){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotGallery",defaults:{viewportSelector:".js-gallery-viewport",listSelector:".js-gallery-list",itemsSelector:".js-gallery-item",navigationSelector:".js-gallery-navigation",clonedClassName:"is-cloned",transitionClassName:"is-transition",slowTransitionClassName:"is-slow-transition",ratio:460/700,startFrom:0,swipe:!0,swipeThreshold:30,loop:!0,beforeChange:null,onChange:null,onTransitionEnd:null},getInitialState:function(){var n=[];return this.$items.each(function(e,t){var a=s(t),r=s(t).data()||{};a.attr("data-index",e+1),n.push(s.extend(!0,r,{index:e+1,item:t}))}),{items:n,$current:null,current:null,currentDOMIndex:0,currentRealIndex:1,direction:0,isTransition:!1,itemsQuantity:this.$items.length,preventClick:!1,transitionDelay:null}},onTransitionEnd:function(){var e,t=this;t.cancelDelay(t.state.transitionDelay);var a=Math.abs(t.state.direction);return t.$list.removeClass(t.params.transitionClassName),t.$list.removeClass(t.params.slowTransitionClassName),t.state.isTransition=!1,t.state.preventClick=!1,t.state.$current.attr("tabindex","0"),0<t.state.direction?(e=t.$items.slice(0,t.state.direction),t.$list.append(e),t.state.currentDOMIndex-=a,t.$items=t.$list.find(t.params.itemsSelector),t.moveListTo(t.$list,t.state.$current,t.state,!0)):t.state.direction<0&&(e=t.$items.slice(t.state.direction),t.$list.prepend(e),t.state.currentDOMIndex+=a,t.$items=t.$list.find(t.params.itemsSelector),t.moveListTo(t.$list,t.state.$current,t.state,!0)),t.call(t.params.onTransitionEnd),t},moveListToPositionLeft:function(e,t,a,r){var n=this;return r||(a.isTransition=!0,a.transitionDelay=n.delay(function(){e.trigger("transitionend")},3e3),1<Math.abs(a.direction)?e.addClass(n.params.slowTransitionClassName):e.addClass(n.params.transitionClassName)),(a=n.cleanObject())[Modernizr.prefixedCSS("transform")]=Modernizr.prefixedCSSValue("transform","translateX("+t+"px)"),e.css(a),n},getItemPosition:function(e){return-1*e.position().left},moveListTo:function(e,t,a,r){return t=this.getItemPosition(t),this.moveListToPositionLeft(e,t,a,r),this},getClosestDOMIndex:function(e){var t=this,a=t.state.$current;return e>t.state.currentRealIndex?a=t.state.$current.nextAll('[data-index="'+e+'"]'):e<t.state.currentRealIndex&&(a=t.state.$current.prevAll('[data-index="'+e+'"]')),a.index()},goTo:function(e,t){var a=this,r=a.$items.eq(e);return r.data("index")===a.state.currentRealIndex&&!t||(a.state.preventClick=!t,r.length&&!a.state.isTransition&&(a.call(a.params.beforeChange,e,t),a.state.$current&&a.state.$current.length&&(a.state.$current.aria("current","false"),a.state.$current.attr("tabindex","-1"),a.state.$current.find(".js-figure").trigger("figure:stop")),r.aria("current","true"),r.find('[loading="lazy"]').trigger("lazy:load"),a.state.current=r.get(0),a.state.$current=r,a.state.direction=e-a.state.currentDOMIndex,a.state.currentDOMIndex=e,a.state.currentRealIndex=r.data("index"),a.moveListTo(a.$list,r,a.state,t),a.call(a.params.onChange,e,t))),a},goForwards:function(){var e=this.state.currentDOMIndex+1;return this.goTo(e)},goBackwards:function(){var e=this.state.currentDOMIndex-1;return this.goTo(e)},loop:function(){var e=this;function t(e,t){s(t).attr("loading","lazy")}var a=e.$items.clone().addClass(e.params.clonedClassName),r=e.$items.clone().addClass(e.params.clonedClassName);return a.find("img").each(t),r.find("img").each(t),e.$list.prepend(a),e.$list.append(r),a.trigger("lazy:added").trigger("figure:added"),r.trigger("lazy:added").trigger("figure:added"),e.getElements(),e},bindEvents:function(){var a=this;return a.on("transitionend",a.params.listSelector,function(e){e.stopPropagation(),s(e.target).is(a.params.listSelector)&&a.onTransitionEnd()}),a.on("click",a.params.itemsSelector,function(e){var t=s(this).index();a.state.currentDOMIndex===t||a.state.preventClick||(e.preventDefault(),e.stopPropagation(),a.throttle("goTo",function(){a.goTo(t)}))}),a.on("keydown",function(e){switch(e.which){case a.KEYS.ARROW_LEFT:e.preventDefault(),a.throttle("forwards",a.goForwards);break;case a.KEYS.ARROW_RIGHT:e.preventDefault(),a.throttle("backwards",a.goBackwards)}}),a.bind("resize",a.$WINDOW,function(){a.throttle("resize",function(){a.goTo(a.state.currentDOMIndex,!0)},15)}),a.params.swipe&&a.hasPlugin("depotSwipe")&&a.$viewport.depotSwipe({targetSelector:a.params.listSelector,touchThreshold:a.params.swipeThreshold,mouse:!0,onStart:function(e){e.preventDefault(),a.state.preventClick=!0},onMove:function(e,t){e.preventDefault(),e=a.getItemPosition(a.state.$current),0!=(t=t.current.left-t.start.left)&&a.moveListToPositionLeft(a.$list,e+t,a.state,!0)},onEnd:function(e,t){e.preventDefault(),e.stopPropagation(),0<t.delta?a.goBackwards():a.goForwards()},onCancel:function(e,t){0!==t.delta?(a.state.direction=0,a.state.preventClick=!0,a.moveListToPositionLeft(a.$list,a.getItemPosition(a.state.$current),a.state,!0)):a.state.preventClick=!1}}),a},init:function(){var e=this;return e.params.loop&&(e.loop(),e.params.startFrom+=e.state.itemsQuantity),e.goTo(e.params.startFrom,!0),e.call(e.params.onInit),e}}),s.fn.depotGallery=function(a){return this.each(function(e,t){s.data(t,"depotGallery",new r(t,a))})}}(jQuery),function(t){"use strict";var a={},n={},r=[];function s(e){return e&&e.replace(/^[#]?[!]?/,"")}function i(e){return e?e.sort().join("&"):""}function e(){return window.addEventListener("hashchange",function(t){r.forEach(function(e){e.call(null,t)})},!1),this}e.prototype={onChange:function(e){return"function"==typeof e&&r.push(e),this},offChange:function(e){return-1!==(e=r.indexOf(e))&&r.splice(e,1),this},get:function(e){var t;return e?e.hash?t=s(e.hash):"string"==typeof e&&(t=s(e)):void 0===e&&(t=s(window.location.hash)),t},create:function(e){var n,t="#!";return"string"==typeof e||"number"==typeof e?t+=e:Array.isArray(e)?t+=i(e):"object"==typeof e&&(t+=(n=e)?i(Object.keys(n).reduce(function(e,t){var a=n[t],r=!0===a?t:t+"="+a;return Array.isArray(a)&&(r=a.map(function(e){return t+"="+e})),Array.prototype.concat(e,r)},[])):""),t},set:function(e,t){return(e=this.create(e))!==window.location.hash&&(t?window.location.hash=e:(t=window.location.toString().split("#")[0]+e,window.location.replace(t))),e},add:function(e,t){var a=this.toObject(),r=this.toObject(e);return Object.keys(r).forEach(function(e){a[e]=r[e]}),this.set(a,t)},replace:function(e,t,a){var r=this.indexOf(e),n=this.indexOf(t);return-1===r||-1!==n?-1!==r&&-1!==n&&r!==n?this.remove(e,a):-1===r&&-1===n&&this.add(t,a):((n=this.toArray())[r]=t,this.set(n,a))},remove:function(e,t){var a=this.indexOf(e);return-1!==a&&((e=this.toArray()).splice(a,1),this.set(e,t))},clear:function(e){return this.set("",e)},toArray:function(e){var t=[];return(e=e||this.get())&&(a[e]?t=a[e]:(e.split("&").forEach(function(e){-1===t.indexOf(e)&&(t=t.concat([e]))}),a[e]=t)),t.concat()},toObject:function(e){var r={};return e=e||this.get(),Array.isArray(e)&&(e=i(e)),"string"==typeof e||"number"==typeof e?n[e]?r=n[e]:(e.split("&").sort().forEach(function(e){var t=e.split("="),a=t[0],e=t[1];""!==a&&(void 0===r[a]?r[a]=void 0===e||e:-1===(t=Array.prototype.concat(r[a])).indexOf(e)&&(r[a]=Array.prototype.concat(t,e)))}),n[e]=r):"object"==typeof e&&(r=e),t.extend(null,r)},indexOf:function(e){var t=this.toArray();return void 0!==e&&t.length?t.indexOf(e.toString()):-1},has:function(e){return e instanceof RegExp?!!this.getMatched(e).length:-1!==this.indexOf(e)},replaceMatchedCompile:function(t,a,e){var r=this.toArray();return this.set(r.map(function(e){return t.test(e)?e.replace(t,function(e,t){return e.replace(t,a)}):(t.toString().replace(t,a),e)}),e)},getMatched:function(a,r){var e=this.toArray(),n=[];return e.forEach(function(e){var t=e.match(a);t&&e.length&&(n.push(e),"function"==typeof r&&r.call(null,e,t))}),n},removeMatched:function(t,e){var a=this.toArray(),r=[];return a.forEach(function(e){!t.test(e)&&e.length&&r.push(e)}),this.set(r,e)},replaceMatched:function(t,e,a){var r=this.toArray(),n=[];return r.forEach(function(e){!t.test(e)&&e.length&&n.push(e)}),void 0!==e&&e.length&&n.push(e),this.set(n,a)}},t.depotHash=new e}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotLazy",defaults:{headerSelector:".js-header",rootMargin:{top:500,left:300,right:300,bottom:500}},hasIntersectionObserver:function(){var e=!1;return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}}),e=!0),e},onload:function(){return this.$container.trigger("lazy:done"),this.unbindEvents(),this},onerror:function(){return this.unbindEvents(),this},initLoad:function(t){var e=r(t).data(),a=e.depotLazy;return a.unbindEvents(),e&&e.src?(t.onload=function(e){return a.observer&&a.observer.unobserve(t),a.onload(t,e)},t.onerror=function(e){return a.observer&&a.observer.unobserve(t),a.onerror(t,e)},e.srcset&&(t.srcset=e.srcset),r.data(t,"thumb",t.src),t.loading="eager",t.src=e.src):a.observer&&a.observer.unobserve(t),a},getViewport:function(){var e=this,t=0;e.$header.length&&(t=parseFloat(e.$header.outerHeight()));var a=Math.round(e.$container.offset().top),r=Math.round(e.$container.offset().left),n=Math.round(a+e.$container.outerHeight(!0)),s=Math.round(r+e.$container.outerWidth(!0)),i=e.$WINDOW.scrollTop()-e.params.rootMargin.top,o=i+e.$WINDOW.innerHeight()+e.params.rootMargin.bottom,l=e.$WINDOW.scrollLeft()-e.params.rootMargin.left;return{headerHeight:t,containerTop:a,containerRight:s,containerBottom:n,containerLeft:r,windowTop:i,windowRight:l+e.$WINDOW.innerWidth()+e.params.rootMargin.right,windowBottom:o,windowLeft:l}},updateViewport:function(){return this.state.viewport=this.getViewport(),this},inViewport:function(){var e=this.state.viewport.containerBottom<this.state.viewport.windowTop,t=this.state.viewport.containerTop>this.state.viewport.windowBottom,a=this.state.viewport.containerLeft<this.state.viewport.windowLeft,r=this.state.viewport.containerRight>this.state.viewport.windowRight,n=!this.isCSSVisible(this.image);return!(e||t||a||r||n)},isCSSVisible:function(e){return"visible"===window.getComputedStyle(e).visibility},getObserver:function(){var t=this,e={rootMargin:t.format("${top}px ${right}px ${bottom}px ${left}px",t.params.rootMargin),threshold:0};return window.lazyObserver=new window.IntersectionObserver(function(e){e.forEach(function(e){(e.isIntersecting||0<e.intersectionRatio)&&(t.isCSSVisible(e.target)?t.initLoad(e.target):t.delay(function(){t.isCSSVisible(e.target)&&t.initLoad(e.target)},300))})},e),window.lazyObserver},initObserver:function(){var e=this;return e.observer=window.lazyObserver||e.getObserver(),e.observer.observe(e.image),e},bindEvents:function(){var e=this;return e.hasIntersectionObserver()?e.initObserver():e.bind("load scroll resize lazy:check",e.$WINDOW,function(){e.updateViewport(),e.inViewport()&&e.initLoad(e.image)}),e.one("lazy:load",function(){e.initLoad(e.image)}),e},getInitialState:function(){return this.image=this.container,{viewport:this.getViewport()}},init:function(){var e=this;return e.$header=r(e.params.headerSelector),e.delay(function(){e.triggerTo(e.$WINDOW,"lazy:check")}),e}}),r.fn.depotLazy=function(a){return this.each(function(e,t){r(t).data("src")&&r.data(t,"depotLazy",new n(t,a))})}}(jQuery),function(n){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=n.extend(!0,{},n.depotProto,{pluginName:"depotLevel",defaults:{itemsSelector:".js-level-item",toggleSelector:".js-level-toggle",deepSelector:".js-level-deep"},getInitialState:function(){return{}},isOpen:function(e){return"true"===e.aria("expanded")},close:function(e,t){return e.aria("expanded","false"),t.attr("hidden",!0),t.find(this.params.toggleSelector).trigger("level:close"),this.unbind("click",this.$DOCUMENT),this},open:function(t,a){var r=this;return t.aria("expanded","true"),a.attr("hidden",!1),r.bind("click",r.$DOCUMENT,function(e){n(e.target).closest(a.get(0)).length||r.close(t,a)}),r},toggle:function(e,t){return this.isOpen(e)?this.close(e,t):this.open(e,t),this},getItems:function(e){var t=e.closest(this.params.itemsSelector),a=t.find(this.format('${selector}[aria-labelledby="${id}"]',{selector:this.params.deepSelector,id:e.attr("id")}));return{$item:t,$toggle:e,$deep:a}},bindEvents:function(){var a=this;return a.on("click",a.params.toggleSelector,function(e){e.preventDefault(),e.stopPropagation();var t=a.getItems(n(this));a.throttle("toggle",function(){a.toggle(t.$toggle,t.$deep)})}),a.on("level:close",a.params.toggleSelector,function(e){e.preventDefault(),e.stopPropagation();var t=a.getItems(n(this));a.throttle("close",function(){a.close(t.$toggle,t.$deep)})}),a.on("level:open",a.params.toggleSelector,function(e){e.preventDefault(),e.stopPropagation();var t=a.getItems(n(this));a.throttle("open",function(){a.open(t.$toggle,t.$deep)})}),a},init:function(){return this.call(this.params.onInit),this}}),n.fn.depotLevel=function(a){return this.each(function(e,t){n.data(this,"depotLevel",new r(t,a))})}}(jQuery),function(s){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotLoaderMore",defaults:{buttonSelector:".js-load-more-button",targetSelector:".js-load-more-here",processingClassName:"is-processing",lastSelector:".is-last",method:"GET",dataType:"html",dataParam:"base",pageParam:"page",inheritGetParams:!0,onSuccess:null,onError:null},getSearch:function(e){e?"object"==typeof e?t=e.search:"string"==typeof e&&(t=e):t=window.location.search;var t=t&&t.match(/^[?](.*)/);return t&&t.length?t[1]:""},checkButton:function(){var e=this;return"html"===e.params.dataType&&e.$target.find(e.params.lastSelector).length&&e.$button.detach(),e},loadMore:function(e){var r,n=this;return n.state.busy||(n.startProcess(),r=n.cleanObject(),n.params.inheritGetParams?(n.state.get=s.depotParse(window.location.search),r=s.extend(!0,n.state.get,e)):e&&(r=e),n.state.request=s.ajax({url:n.cache.requestUrl,type:n.params.method,dataType:n.params.dataType,data:r,success:function(e){n.stopProcess(),e&&(n.increasePage(),"function"==typeof n.params.onSuccess?n.call(n.params.onSuccess,e):"html"===n.params.dataType&&n.$target.append(e),n.checkButton())},error:function(e,t,a){n.stopProcess(),n.error({action:"DepotLoaderMore.loadMore",data:{url:n.cache.requestUrl,type:n.params.method,data:r},name:t,number:e.status,message:a}),n.call(n.params.onError,e)}})),n},increasePage:function(){var e=this,t=e.$button.get(0),a=e.getSearch(t),r=s.depotParse(a),a=parseInt(r[e.params.pageParam]);return isNaN(a)||(r[e.params.pageParam]=a+1,t.search="?"+s.param(r,!0)),e},startProcess:function(){return this.state.busy=!0,this.$container.addClass(this.params.processingClassName).aria("busy","true"),this},stopProcess:function(){return this.state.busy=!1,this.$container.removeClass(this.params.processingClassName).aria("busy","false"),this},bindEvents:function(){var a=this;return a.bind("online",a.$WINDOW,function(){a.state.offline=!1,a.$button.removeClass("is-disabled").prop("disabled",!1)}),a.bind("offline",a.$WINDOW,function(){a.state.offline=!0,a.$button.addClass("is-disabled").prop("disabled",!0)}),a.$button.on("click",function(e){e.preventDefault();var t=this;a.state.offline?a.hasPlugin("depotNotifications")&&s.depotNotifications.warn({ru:"Проверьте подключение к сети.",en:"Check your network connection."}):a.debounce("click",function(){var e;a.state.search=a.getSearch(t),a.hasPlugin("depotParse")&&(e=s.depotParse(a.state.search),a.loadMore(e))})}),a},init:function(){var e=this;return e.cache.requestUrl=e.$button.data(e.params.dataParam),e.call(e.params.onInit),e}}),s.fn.depotLoaderMore=function(a){return this.each(function(e,t){s.data(this,"depotLoaderMore",new r(t,a))})}}(jQuery),function(l){"use strict";function e(){this.$container=l(".js-notifications"),this.$container.on("click",".js-notification-close",function(e){e.preventDefault(),l(this).closest(".js-notification").attr("hidden",!0)})}e.prototype={template:'<div class="notification notification_default notification_${mod}" role="alert" hidden><div class="notification__container"><div class="notification__row"><div class="notification__text"><p>${text}</p></div><button class="notification__close js-notification-close" type="button" aria-label="${close}"></button></div></div></div>',timeout:7500,minTimeout:2500,maxTimeout:6e4,log:function(e,t){var a=this,r=t&&t.mod||"log",n=l.depotProto.clamp(a.minTimeout,t&&t.timeout||a.timeout,a.maxTimeout),s=t&&t.context||{},i=t&&t.callback||null,o=l(l.depotProto.format(a.template,{mod:r,text:l.depotProto.format(l.depotProto.translate(e),s),close:l.depotProto.translate({ru:"Закрыть",en:"Close"})}));a.$container.prepend(o),l.depotProto.delay(function(){function t(){o.on("animationend",function(e){e.preventDefault(),e.stopPropagation(),o.remove(),"function"==typeof i&&i.call(null)}),o.attr("hidden",!0)}o.get(0).style.setProperty("--timeout",n+"ms"),o.attr("hidden",!1);var a=l.depotProto.delay(t,n);o.on("click",".js-notification-close",function(e){e.preventDefault(),l.depotProto.cancelDelay(a),t.call()})},100)},warn:function(e,t){return window.navigator&&"function"==typeof window.navigator.vibrate&&window.navigator.vibrate(200),this.log(e,l.extend(t,{mod:"warning"}))},info:function(e,t){return this.log(e,l.extend(t,{mod:"info"}))}},l.depotNotifications=new e}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotOverflow",defaults:{containerSelector:".js-overflow",contentSelector:".js-overflow-content",scrollbarSelector:".js-overflow-scrollbar",thumbSelector:".js-overflow-thumb",containerTemplate:'<div class="overflow ${containerSelector|substr(1)}"></div>',scrollbarTemplate:'<div class="overflow__scrollbar ${scrollbarSelector|substr(1)}">${thumbTemplate}</div>',thumbTemplate:'<div class="overflow__thumb ${thumbSelector|substr(1)}"></div>',contentClassName:"overflow__content",overflowClassName:"is-overflow"},swapContainer:function(){var e=this;return e.$container.wrap(e.format(e.params.containerTemplate,e.params)),e.$content=e.$container,e.$content.addClass(e.params.contentClassName),e.$container=e.$container.parent(),e.container=e.$container.get(0),e},getInitialState:function(){return{hasScrollbar:!1,context:this.getContext(),scrollTop:0,scrollbarScale:1}},checkScrollbar:function(){return this.$content.get(0).scrollHeight>this.$content.height()},getContext:function(){return r.extend(!0,this.cleanObject(this.params),{})},update:function(){var e,t,n=this,a=n.checkScrollbar();return a!==n.state.hasScrollbar&&(n.state.hasScrollbar?n.$container.removeClass(n.params.overflowClassName):(n.$scrollbar.length||(n.$container.append(n.format(n.params.scrollbarTemplate,n.state.context)),n.getElements(n.params),n.$scrollbar.depotSwipe({targetSelector:n.params.thumbSelector,onStart:function(e,t){var a=n.$content.get(0).scrollHeight,r=n.$scrollbar.height();n.state.scrollTop=n.$content.scrollTop(),n.state.scrollbarScale=a/r},onMove:function(e,t){var a;t.isActive&&(a=n.state.scrollTop,t=(t.current.top-t.start.top)*n.state.scrollbarScale,n.$content.scrollTop(a+t),n.update())}})),n.$container.addClass(n.params.overflowClassName)),n.state.hasScrollbar=a),n.state.hasScrollbar&&(t=n.$content.height(),e=n.$content.get(0).scrollHeight,a=n.$content.scrollTop(),e=parseFloat((t/e*100).toFixed(6)),t=parseFloat((a/t*100).toFixed(6)),n.$thumb.css(n.prefixed({height:e+"%",transform:"translate3d(0,"+t+"%,0)"}))),n},bindEvents:function(){var e=this;return e.bind("click",e.$HTMLBODY,function(){e.delay(e.update)}),e.on("wheel update",function(){e.update()}),e},init:function(){return this.update(),this.call(this.params.onInit),this}}),r.fn.extend({depotOverflow:function(a){return r(this).each(function(e,t){r.data(this,"depotOverflow",new n(t,a))})}})}(jQuery),function(o){"use strict";function l(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}o.depotParse=function a(e,t){var r,n,s=o.extend(!0,{merge:!1,empty:!0,split:"&",assign:"=",reverse:!1,traditional:!0,encode:!1},t),i=null;return"object"===l(e)?(t="",(r=s).reverse&&(n=[],o.each(e,function(a,e){void 0===e?r.empty&&n.push(a):e instanceof Array?o.each(e,function(e,t){r.traditional?n.push(a+r.assign+t):n.push(a+"[]"+r.assign+t)}):r.traditional?n.push(a+r.assign+e):o.each(e,function(e,t){n.push(a+"["+e+"]"+r.assign+t)})}),t=r.encode?encodeURI(n.join(r.split)):n.join(r.split)),i=t):"string"===l(e)?i=function(e,t){var a=null;if(e.length){var r=(0===e.indexOf("?")?e.substr(1):e).split(t.split),n=r.length;if(n)for(var s=0;s<n;s+=1){var i=new RegExp("([^"+t.assign+"]*)"+t.assign+"?(.*)","i"),o=r[s].match(i);o&&o.length&&(i=decodeURIComponent(o[1]),void 0===(o=(o=o[2])&&!isNaN(o)?parseFloat(o):o?decodeURIComponent(o.toString()):void 0)&&!0!==t.empty||i&&i.length&&((a=a||{})[i]?a[i]instanceof Array?!0===t.merge&&-1!==a[i].indexOf(o)||a[i].push(o):!0===t.merge&&a[i]===o||(a[i]=[a[i],o]):a[i]=o))}}return a}(e,s):"array"===l(e)&&o.each(e,function(e,t){i=o.extend(!0,i,a(t,s))}),i}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"depotPopup",defaults:{buttonSelector:".js-popup-toggle",bodySelector:".js-popup-body",closeButtonSelector:".js-popup-close",fieldsSelector:'input:not([type="hidden"]), textarea, select',visibleClassName:"is-visible",addBodyClass:"is-cropped",hideDebounce:300,resetScroll:!1,mediaQuery:"",kickOff:!0,useHash:!0,hashRe:!1,onHashChange:null,beforeShow:null,beforeHide:null,onShow:null,onHide:null,onToggle:null},getID:function(){return this.$container.attr("id")},onHashChange:function(){var e=this,t=r.depotHash.has(e.params.hashRe||e.state.hash);return t?(e.state.isVisible||e.debounce("hashChange",e.show),e.call(e.params.onHashChange)):!t&&e.state.isVisible&&(e.debounce("hashChange",e.hide),e.call(e.params.onHashChange)),e},preventShow:function(){return this.state.preventShow=!0,this},startProcessing:function(){return this.$body.addClass(this.params.processingClassName),this},stopProcessing:function(){return this.$body.removeClass(this.params.processingClassName),this},preventKickOff:function(){var e=this;return e.params.hideDebounce&&(e.state.hideDebounce=!0,e.delay(function(){delete e.state.hideDebounce},e.params.hideDebounce)),e},hide:function(e,t){var a=this;return a.state.isVisible&&(a.call(a.params.beforeHide,e,t),a.state.isVisible=!1,a.$container.removeClass(a.params.visibleClassName),a.$container.attr("hidden",!0),a.$container.attr("tabindex","-1"),a.params.useHash&&a.hasPlugin("depotHash")&&(a.params.hashRe?r.depotHash.has(a.params.hashRe)&&r.depotHash.removeMatched(a.params.hashRe):r.depotHash.remove(a.state.hash)),a.params.addBodyClass&&!a.state.preventRemoveBodyClass&&(a.$BODY.removeClass(a.params.addBodyClass),a.$WINDOW.trigger("resize")),a.$container.scrollTop(0),a.$container.scrollLeft(0),a.state=a.getInitialState(),a.call(a.params.onHide,e,t)),a},show:function(e,t){var a=this;return a.state.isVisible||(a.call(a.params.beforeShow,e,t),a.state.preventShow?a.state.preventShow=!1:(a.preventKickOff(),a.state.isVisible=!0,a.$container.addClass(a.params.visibleClassName),a.$container.attr("hidden",!1),a.$container.attr("tabindex","0"),a.params.useHash&&a.hasPlugin("depotHash")&&(a.params.hashRe?r.depotHash.has(a.params.hashRe)?a.state.hash=r.depotHash.getMatched(a.params.hashRe)[0]:r.depotHash.add(a.state.hash):r.depotHash.has(a.state.hash)||r.depotHash.add(a.state.hash)),a.params.resetScroll&&window.scrollTo(0,0),a.params.addBodyClass&&(a.delay(function(){a.state.isVisible&&(a.$BODY.hasClass(a.params.addBodyClass)?a.state.preventRemoveBodyClass=!0:(a.state.preventRemoveBodyClass=!1,a.$BODY.addClass(a.params.addBodyClass)),a.$WINDOW.trigger("resize"))},10),a.delay(function(){a.state.isVisible&&(a.$fields.length?a.$fields:a.$container).get(0).focus()},100)),a.call(a.params.onShow,e,t))),a},toggle:function(){var e=this;return e.state.isVisible?e.hide():e.show(),e.call(e.params.onToggle),e},bindEvents:function(){var a=this;return a.bind("click",a.$BODY,a.params.buttonSelector,function(e){e.preventDefault(),a.debounce("toggle",a.toggle)}),a.on("click",a.params.closeButtonSelector,function(e){e.preventDefault(),a.debounce("close",a.hide)}),a.on("popup:show",function(e,t){a.debounce("show",function(){a.show(e,t)})}),a.on("popup:hide",function(e,t){a.debounce("hide",function(){a.hide(e,t)})}),a.params.useHash&&a.hasPlugin("depotHash")&&r.depotHash.onChange(function(){a.onHashChange()}),a.params.kickOff&&a.bind("click",a.$BODY,function(e){a.state.hideDebounce||r(e.target).closest("body").length&&!r(e.target).closest(a.params.bodySelector).length&&a.state.isVisible&&a.hide()}),a.params.mediaQuery&&(window.matchMedia(a.params.mediaQuery).onchange=function(e){a.state.isVisible&&!e.matches&&a.hide()}),a.bind("keyup",a.$BODY,function(e){a.state.isVisible&&e.which===a.KEYS.ESCAPE&&(e.preventDefault(),a.hide())}),a},getInitialState:function(){var e=this,t=e.getID(),a=t;return e.params.useHash&&e.hasPlugin("depotHash")&&e.params.hashRe&&r.depotHash.has(e.params.hashRe)&&(a=r.depotHash.getMatched(e.params.hashRe)[0]||a),{id:t,hash:a,isVisible:!1,hideDebounce:!1,preventShow:!1,preventRemoveBodyClass:!1}},init:function(){var e=this;return e.$fields=e.$container.find(e.params.fieldsSelector),e.params.useHash&&e.hasPlugin("depotHash")&&r.depotHash.has(e.params.hashRe||e.state.hash)&&e.show(),e.call(e.params.onInit),e}}),r.fn.depotPopup=function(a){return this.each(function(e,t){r.data(t,"depotPopup",new n(t,a))})}}(jQuery),function(u){"use strict";var s=[],d={type:"local",path:"/"};function p(e){return e="object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)}function l(e){var t,a=decodeURIComponent(e);try{t=JSON.parse(a)}catch(e){"NaN"===a?t=NaN:"undefined"!==a&&(t=a)}return t}function m(t,a,r,n){s.forEach(function(e){"function"==typeof e&&e.call(t,a,r,n)})}function c(){var t=u.depotProto.cleanObject();return document.cookie.split(/\s?;\s?/).forEach(function(e){(e=e.match(/^([^=]+)=([^=;]+)$/))&&(t[e[1]]=e[2])}),t}function e(){var t=this;return u(window).on("storage.depotStorage",function(e){m(t,"local",e.originalEvent.key,e.originalEvent)}),t}e.prototype={onChange:function(e){return"function"==typeof e&&-1===s.indexOf(e)&&s.push(e),this},offChange:function(e){return"function"==typeof e&&-1!==s.indexOf(e)?s.splice(s.indexOf(e),1):"all"===e&&(s=[]),this},setItem:function(e,t,a){var r,n=!1,s=u.extend(!0,{},d,a),i=p(t);switch(s.expires&&(r=s.expires,a=!1,(r=(r=(r||"").toString().replace(/^([0-9.-]+)(Y|M|D|h|m|s|ms)$/,function(e,t,a){var t=parseFloat(t),r=1;switch(a){case"Y":r=31536e6;break;case"M":r=2592e6;break;case"D":r=864e5;break;case"h":r=36e5;break;case"m":r=6e4;break;case"s":r=1e3;break;default:r=1}return isNaN(t)?0:t*r}),r=parseFloat(r),isNaN(r)?0:r))&&(a=new Date).setTime(a.getTime()+r),t=a,s.expires=t?t.toUTCString():0),s.type){case"cookie":var o=e+"="+i;s&&Object.keys(s).forEach(function(e){var t=s[e];"type"!==e&&(o+="; "+e+"="+t)});try{document.cookie=o,n=!0}catch(e){}break;case"session":var l=p(u.extend(!0,s,{value:i}));try{sessionStorage.setItem(e,l),n=!0}catch(e){}break;default:var c=p(u.extend(!0,s,{value:i}));try{localStorage.setItem(e,c),n=!0}catch(e){}}return m(this,s.type,e),n},getItem:function(e,t){var a;switch("object"==typeof t&&(t=t.type),t){case"cookie":try{var r=c();r[e]&&(a=l(r[e]))}catch(e){}break;case"session":try{var n,s=l(sessionStorage.getItem(e));s&&("object"==typeof s?(n=Date.parse(s.expires))&&n<Date.now()?this.removeItem(e,t):a=l(s.value):a=s)}catch(e){}break;default:try{var i,o=l(localStorage.getItem(e));o&&("object"==typeof o?(i=Date.parse(o.expires))&&i<Date.now()?this.removeItem(e,t):a=l(o.value):a=o)}catch(e){}}return a},getItemMeta:function(e,t){var a;switch("object"==typeof t&&(t=t.type),t){case"cookie":break;case"session":try{a=l(sessionStorage.getItem(e))}catch(e){}break;default:try{a=l(localStorage.getItem(e))}catch(e){}}return a},removeItem:function(e,t,a){switch("object"==typeof t&&(a=t=t.type),t){case"cookie":try{var r={type:t,expires:"-1Y"};a&&a.domain&&(r.domain=a.domain),this.setItem(e,null,r)}catch(e){}break;case"session":try{sessionStorage.removeItem(e)}catch(e){}break;default:try{localStorage.removeItem(e)}catch(e){}}m(this,t,e)},removeMatched:function(t,a){var r=this;switch("object"==typeof a&&(a=a.type),a){case"cookie":try{var e=c();Object.keys(e).forEach(function(e){new RegExp(t,"i").test(e)&&r.removeItem(e,a)})}catch(e){}break;case"session":try{Object.keys(sessionStorage).forEach(function(e){new RegExp(t,"i").test(e)&&sessionStorage.removeItem(e)})}catch(e){}break;default:try{Object.keys(localStorage).forEach(function(e){new RegExp(t,"i").test(e)&&localStorage.removeItem(e)})}catch(e){}}m(r,a)},clear:function(t){var a=this;switch(t){case"cookie":try{var e=c();Object.keys(e).forEach(function(e){a.removeItem(e,t)})}catch(e){}break;case"session":try{sessionStorage.clear()}catch(e){}break;default:try{localStorage.clear()}catch(e){}}m(a,t)}},navigator.cookieEnabled||u.depotNotifications.warn({ru:"Для полной функциональности этого сайта необходимо включить файлы cookie.",en:"For full functionality of this site it is necessary to enable cookies."},{timeout:6e4}),u.depotStorage=new e}(jQuery),function(s){"use strict";var e={START:{pointer:["pointerdown"],touch:["touchstart"],ms:["mspointerdown"],mouse:["mousedown"]},MOVE:{pointer:["pointermove"],touch:["touchmove"],ms:["mspointermove"],mouse:["mousemove"]},END:{pointer:["pointerup"],touch:["touchend"],ms:["mspointerup"],mouse:["mouseup"]},CANCEL:{pointer:["pointerleave","pointercancel"],touch:["touchcancel"],ms:["mspointercancel"],mouse:["mouseleave"]}};function r(e,t){return this.call(this._init,e,t)}r.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotSwipe",defaults:{targetSelector:!1,mouse:!0,swipeThreshold:30,onStart:null,onMove:null,onEnd:null,onCancel:null},getInitialState:function(){return{EVENTS:this.detectEvents()}},detectEvents:function(){var n=this.cleanObject();return s.each(e,function(r,e){s.each(e,function(e,t){var a=!0;return s.each(t,function(e,t){"on"+t in document.documentElement&&(a=!1,n[r]?n[r].push(t):n[r]=[t])}),a})}),n},normalizePointer:function(e){var t=new RegExp("pointer","i"),a=new RegExp("pointer","i"),r=t.test(e.originalEvent.type),n=a.test(e.originalEvent.type),s=e.pageX,t=e.pageY,a=!0;return e.originalEvent&&n?(a="mouse"===e.pointerType,s=e.originalEvent.pageX,t=e.originalEvent.pageY):e.originalEvent&&e.originalEvent.touches?(a=!1,e.originalEvent.touches.length&&(s=e.originalEvent.touches[0].pageX,t=e.originalEvent.touches[0].pageY)):e.targetTouches?(a=!1,e.targetTouches.length&&(s=e.targetTouches[0].pageX,t=e.targetTouches[0].pageY)):e.originalEvent&&r&&this.params.mouse&&(s=e.originalEvent.pageX,t=e.originalEvent.pageY),{left:parseInt(s,10),top:parseInt(t,10),isMouse:a}},getPosition:function(){var e=this.$container.parent().offset();return{top:this.state.current.top-e.top,left:this.state.current.left-e.left}},getState:function(){return this.cleanObject(this.state)},start:function(e){var t=this;return t.state.isActive||(t.state.isActive=!0,t.state.start=t.normalizePointer(e),t.state.current=t.state.start,t.state.last=t.state.start,t.state.path=[t.state.start],t.state.position=t.getPosition(),t.call(t.params.onStart,e,t.getState())),t},move:function(e){var t=this;return t.state.isActive&&(t.state.last=t.cleanObject(t.state.current),t.state.current=t.normalizePointer(e),t.state.delta={top:t.state.last.top-t.state.current.top,left:t.state.last.left-t.state.current.left},t.state.path.push(t.state.current),t.state.position=t.getPosition(),t.call(t.params.onMove,e,t.getState())),t},end:function(e){var t=this;return t.state.isActive&&(t.state.isActive=!1,t.state.delta=t.state.current.left-t.state.start.left,Math.abs(t.state.delta)>=t.params.swipeThreshold?t.call(t.params.onEnd,e,t.getState()):t.call(t.params.onCancel,e,t.getState())),t},cancel:function(e){var t=this;return t.state.isActive&&(t.state.isActive=!1,t.state.delta=t.state.current.left-t.state.start.left,t.call(t.params.onCancel,e,t.getState())),t},bindEvents:function(){var e=this;return e.bind(e.state.EVENTS.START,e.$container,e.params.targetSelector,e.start.bind(e)),e.bind(e.state.EVENTS.MOVE,e.$DOCUMENT,e.move.bind(e)),e.bind(e.state.EVENTS.END,e.$DOCUMENT,e.end.bind(e)),e.bind(e.state.EVENTS.CANCEL,e.$DOCUMENT,e.cancel.bind(e)),e},init:function(){return this.call(this.params.onInit),this}}),s.fn.depotSwipe=function(a){return this.each(function(e,t){s.data(this,"depotSwipe",new r(t,a))})}}(jQuery),function(s){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=s.extend(!0,{},s.depotProto,{pluginName:"depotTabs",defaults:{tabListSelector:".js-tabs-list",tabsSelector:".js-tabs-tab",panelsSelector:".js-tabs-panel",useHash:!1,hashParam:"tab",cache:!0,beforeChange:null,onChange:null},getHashRe:function(e){return void 0===e&&(e=this.params.hashParam),new RegExp("^"+e+"=(.*)$","i")},getHashString:function(e,t){return void 0===t&&(t=this.params.hashParam),[t,e].join("=")},getTabSlug:function(e){var t;return e&&e.length&&(t=e.aria("controls")),t},getFirstTabSlug:function(){var e=this,t=(e.params.cache?e.$tabs:e.$container.find(e.params.tabListSelector)).first();return e.getTabSlug(t)},getValidTabSlug:function(e){var t,a=this;return a.params.cache?a.cache.tabs[e]&&a.cache.panels[e]?t=e:a.state.activeTabSlug||(t=a.getFirstTabSlug()):a.getTab(e).length?t=e:a.state.activeTabSlug||(t=a.getFirstTabSlug()),t},getActiveTabSlug:function(){var e=this.getActiveTab();return this.getTabSlug(e)},getPanelSlug:function(e){var t;return e&&e.length&&(t=e.attr("id")),t},getNextPanelSlug:function(){var e=this;e.params.cache||(e.$panels=e.$container.children(e.params.panelsSelector)),e.state.$activePanel||(e.state.$activePanel=e.$panels.first());var t=e.state.$activePanel.next(e.params.panelSelector);return t&&t.length||(t=e.$panels.first()),e.getPanelSlug(t)},getPrevPanelSlug:function(){var e=this;e.params.cache||(e.$panels=e.$container.children(e.params.panelsSelector)),e.state.$activePanel||(e.state.$activePanel=e.$panels.first());var t=e.state.$activePanel.prev(e.params.panelSelector);return t&&t.length||(t=e.$panels.last()),e.getPanelSlug(t)},cacheTabs:function(){var a=this;a.cache.tabs=a.cleanObject(),a.$tabs.each(function(){var e=s(this),t=a.getTabSlug(e);a.cache.tabs[t]=e})},cachePanels:function(){var a=this;a.cache.panels=a.cleanObject(),a.$panels.each(function(){var e=s(this),t=a.getPanelSlug(e);a.cache.panels[t]=e})},getTab:function(e){return this.$tabList.find(this.params.tabsSelector+'[aria-controls="'+e+'"]')},getPanel:function(e){return this.$container.children(this.params.panelsSelector+'[id="'+e+'"]')},getActiveTab:function(){return this.params.cache?this.$tabs.filter('[aria-selected="true"]'):this.$tabList.find(this.params.tabsSelector+'[aria-selected="true"]')},getActivePanel:function(){return this.params.cache?this.$panels.filter('[aria-hidden="false"]'):this.$container.children(this.params.panelsSelector+'[aria-hidden="false"]')},changeTo:function(e){var t,a,r,n=this;return n.state.activeTabSlug&&n.state.activeTabSlug===e||(a=n.state.activeTabSlug,r=n.params.cache?(t=n.cache.tabs[e],n.cache.panels[e]):(t=n.getTab(e),n.getPanel(e)),t&&r&&t.length&&r.length&&(n.call(n.params.beforeChange,n.$container,n.state.$activePanel),n.setInactiveTab(n.getActiveTab()),n.setInactivePanel(n.getActivePanel()),n.setActiveTab(t),n.setActivePanel(r),n.state.activeTabSlug=e,n.state.$activeTab=t,n.state.$activePanel=r,n.$WINDOW.trigger("update"),n.params.useHash&&n.hasPlugin("depotHash")&&(a?s.depotHash.replaceMatched(n.getHashRe(),n.getHashString(e),!1):s.depotHash.add(n.getHashString(e),!1)),n.call(n.params.onChange,n.$container,n.state.$activePanel))),n},changeToFirst:function(){this.changeTo(this.getFirstTabSlug())},setActivePanel:function(e){return e&&e.length&&(e.aria("hidden","false"),e.attr("tabindex","0")),e},setInactivePanel:function(e){return e&&e.length&&(e.aria("hidden","true"),e.attr("tabindex","-1")),e},setActiveTab:function(e){return e&&e.length&&e.aria("selected","true"),e},setInactiveTab:function(e){return e&&e.length&&e.aria("selected","false"),e},disableTab:function(e){return e&&e.length&&e.aria("disabled","true"),e},enableTab:function(e){return e&&e.length&&e.aria("disabled","false"),e},bindEvents:function(){var r=this;return r.$tabList.on("click",r.params.tabsSelector,function(e){e.target===this&&e.preventDefault();var t=s(this);r.debounce("tabClick",function(){r.changeTo(r.getTabSlug(t))})}),r.$tabList.on("keydown",r.params.tabsSelector,function(e){var t;e.which!==r.KEYS.SPACE&&e.which!==r.KEYS.ENTER||(e.target===this&&e.preventDefault(),t=s(this),r.debounce("tabClick",function(){r.changeTo(r.getTabSlug(t))}))}),r.params.useHash&&r.hasPlugin("depotHash")&&s.depotHash.onChange(function(){var a;s.depotHash.getMatched(r.getHashRe(),function(e,t){t&&t[1]&&(a=r.getValidTabSlug(t[1]))}),a&&r.changeTo(a)}),r},init:function(){var a=this;a.params.cache&&(a.state.$activeTab=a.getActiveTab(),a.state.$activePanel=a.getActivePanel(),a.cacheTabs(),a.cachePanels());var r=(r=a.getActiveTabSlug())||a.getFirstTabSlug();return a.params.useHash&&(a.hasPlugin("depotHash")?s.depotHash.getMatched(a.getHashRe(),function(e,t){t&&t[1]&&(r=a.getValidTabSlug(t[1]))}):a.params.useHash=!1),a.changeTo(r),a.call(a.params.onInit),a}}),s.fn.depotTabs=function(a){return this.each(function(e,t){s.data(this,"depotTabs",new r(t,a))})}}(jQuery),function(n){"use strict";var s=[],i={type:"local",lang:n.depotProto.LANGUAGE,name:"favorites",version:2},o=n.depotProto.format("/${name}/v${version}/${lang}/",i),e=i.type;function t(){var r=this;return n.depotStorage.onChange(function(e,t){var a;e===i.type&&t===o&&(a=r.getAll(),s.forEach(function(e){"function"==typeof e&&e.call(null,a)}))}),r}t.prototype={onChange:function(e){return"function"==typeof e&&-1===s.indexOf(e)&&s.push(e),this},offChange:function(e){return"function"==typeof e&&-1!==s.indexOf(e)?s.splice(s.indexOf(e),1):"all"===e&&(s=[]),this},generateKey:function(e){var t=document.createElement("a");return t.href=e,t=new URL(t.href),n.depotProto.hashify(t.pathname,12)},getAll:function(){return n.depotStorage.getItem(o,e)||{}},getItem:function(e){return this.getAll()[e]},setItem:function(e,t){var a=this.getAll();return a[e]=t,n.depotStorage.setItem(o,a,i)},removeItem:function(e){var t=this.getAll();return delete t[e],n.depotStorage.setItem(o,t,i)},toggleItem:function(e,t){return this.getAll()[e]?this.removeItem(e):this.setItem(e,t)}},n.favorites=new t}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"fixHeader",defaults:{headerSelector:".js-header",scrolledClassName:"is-scrolled",fixedClassName:"is-fixed",scrollThreshold:20,mediaQuery:"",onChange:null},getParams:function(){return{headerTop:this.$container.offset().top,headerHeight:this.$container.outerHeight(),scrollTop:this.$WINDOW.scrollTop()}},free:function(){var e=this;return(e.state.isFixed||e.state.isScrolled)&&(e.state.isFixed=!1,e.state.isScrolled=!1,e.$container.removeClass(e.params.fixedClassName),e.$container.removeClass(e.params.scrolledClassName),e.call(e.params.onChange)),e},scroll:function(){var e=this;return e.state.isScrolled||(e.state.isFixed=!1,e.state.isScrolled=!0,e.$container.removeClass(e.params.fixedClassName),e.$container.addClass(e.params.scrolledClassName),e.call(e.params.onChange)),e},fix:function(){var e=this;return e.state.isFixed||(e.state.isFixed=!0,e.state.isScrolled=!1,e.$container.removeClass(e.params.scrolledClassName),e.$container.addClass(e.params.fixedClassName),e.call(e.params.onChange)),e},update:function(){var e,t,a,r=this,n=window.matchMedia(r.params.mediaQuery);return n&&n.matches?(e=r.getParams(),t=r.state.params,a=e.scrollTop-t.scrollTop,n=Math.abs(a),r.state.scrollTimeout&&clearTimeout(r.state.scrollTimeout),e.scrollTop<=t.headerTop||e.scrollTop<=e.headerHeight+r.params.scrollThreshold?(r.free(),r.state.params=e):a<0&&n>r.params.scrollThreshold&&e.scrollTop>2*e.headerHeight+e.headerTop?(r.fix(),r.state.params=e):0<a&&n>r.params.scrollThreshold&&e.scrollTop>2*e.headerHeight+e.headerTop?(r.scroll(),r.state.params=e):e.scrollTop>t.scrollTop&&n>r.params.scrollThreshold&&(r.free(),r.state.params=e),r.state.scrollTimeout=setTimeout(function(){r.state.params=r.getParams()},r.params.debounce)):r.free(),r},bindEvents:function(){var e=this;return e.bind("scroll resize",e.$WINDOW,function(){e.update()}),e},getInitialState:function(){return{isFixed:!1,isScrolled:!1,params:this.getParams()}}}),r.fn.extend({fixHeader:function(a){return r(this).each(function(e,t){r.data(this,"fixHeader",new n(t,a))})}})}(jQuery),function(a){"use strict";var r={formCSRF:{onInit:null}};a.formCSRFMixin={initFormCSRF:function(){var e=this;e.params=a.extend(!0,{},e.translate(r),e.params);var t=a.depotStorage.getItem("csrftoken","cookie");t&&(e.params.requestHeaders=e.params.requestHeaders.concat({name:"X-CSRFToken",value:t})),e.call(e.params.formCSRF.onInit)}}}(jQuery),function(r){"use strict";function n(e,t){return this.call(this._init,e,t)}n.prototype=r.extend(!0,{},r.depotProto,{pluginName:"formFieldFile",defaults:{labelSelector:".js-form-field-label",valueSelector:".js-form-field-value",elementSelector:".js-form-field-element",valueTemplate:'#{if hasFiles}<div class="field__list">#{for file in files}<div class="field__item"><span>${file.name|escapeHTML}</span> (${file.size})</div>#{endfor}</div>#{endif}',dictionary:{units:{b:{ru:"б",en:"b"},kb:{ru:"Кб",en:"Kb"},mb:{ru:"Мб",en:"Mb"}}}},getInitialState:function(){return{hasFiles:!1,files:[]}},render:function(){var e=this,t=e.format(e.params.valueTemplate,e.state);return e.$value.html(t),e},toFileSize:function(e){for(var t=0,a=["b","kb","mb"];1e3<=e&&t<a.length-1;)e/=1e3,++t;return this.format("${size|fixed(1, false)|digit}_{units.${unit}}",{unit:a[t],size:e})},update:function(){var e=this,t=[],a=e.$element.get(0).files,r=a&&a.length||0;if(r){e.$container.addClass(e.params.busyClassName);for(var n=0;n<r;n+=1){var s=a.item(n);t.push({name:s.name,size:e.toFileSize(s.size)})}}return e.state.hasFiles=0<r,e.state.files=t,e.render(),e},bindEvents:function(){var t=this;return t.on("input change reset",t.params.elementSelector,function(e){t.update()}),t},init:function(){return this.call(this.params.onInit),this}}),r.fn.formFieldFile=function(a){return r(this).each(function(e,t){r.data(this,"formFieldFile",new n(t,a))})}}(jQuery),function(i){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=i.extend(!0,{},i.depotProto,{pluginName:"formFieldRange",defaults:{labelSelector:".js-form-field-label",valueSelector:".js-form-field-value",elementSelector:".js-form-field-element",minThumbSelector:".js-form-field-thumb-min",maxThumbSelector:".js-form-field-thumb-max",template:"${minThumbTemplate}#{if isMultiple}${maxThumbTemplate}#{endif}#{for step in steps}${stepTemplate}#{endfor}",stepTemplate:'<span class="field__step" style="left:${step.left|fixed(6, true)}%;">${step.value}</span>',minThumbTemplate:'<span class="field__thumb ${minThumbSelector|substr(1)}" tabindex="0" style="left:${minLeft|default(0)|fixed(6, true)}%"></span>',maxThumbTemplate:'<span class="field__thumb ${maxThumbSelector|substr(1)}" tabindex="0" style="left:${maxLeft|default(100)|fixed(6, true)}%"></span>',valueTemplate:"${min|zero}:00#{if max}-${max|zero}:00#{endif}",getInitialValue:null,onChange:null},getInitialState:function(){var e=this,t=e.$element.data("min"),a=e.$element.data("max"),r=e.$element.data("step"),n=(a-t)/r,s=e.call(e.params.getInitialValue,t,a,r);return{$target:null,isMultiple:e.isMultiple(),isDisabled:e.isDisabled(),steps:n,step:r,min:t,max:a,value:i.extend(!0,e.cleanObject({min:t,max:a}),s)}},isMultiple:function(){return this.$element.data("multiple")||!1},isDisabled:function(){return this.$element.prop("disabled")},valueToPosition:function(e){return(e-this.state.min)/this.state.steps*100},positionToValue:function(e){return Math.round(e*this.state.steps+this.state.min)},render:function(){var a=this,e=i.extend(!0,a.cleanObject(a.params),{isMultiple:a.isMultiple(),steps:function(){for(var e=[],t=a.state.min;t<=a.state.max;t+=a.state.step)e.push({left:(t-a.state.min)/a.state.steps*100,value:a.format(a.params.valueTemplate,{min:t})});return e},minLeft:a.valueToPosition(a.state.value.min),maxLeft:a.valueToPosition(a.state.value.max)}),e=a.format(a.params.template,e);return a.$value.html(e),a.getElements(),a.update(),a},update:function(){var e=this,t=e.valueToPosition(e.state.value.min),a=e.valueToPosition(e.state.value.max);return e.$element.val(e.format(e.params.valueTemplate,e.state.value)),e.$minThumb.css({left:t+"%"}),e.$maxThumb.css({left:a+"%"}),e.$value.css(e.prefixed({backgroundImage:e.format("linear-gradient(to right, transparent 0%, transparent ${minLeft|fixed(6, true)}%, currentColor ${minLeft|fixed(6, true)}%, currentColor ${maxLeft|fixed(6, true)}%, transparent ${maxLeft|fixed(6, true)}%, transparent 100%)",{minLeft:t,maxLeft:a})})),e},reset:function(e){return e&&e.stopPropagation(),this.state=this.getInitialState(),this.update(),this},bindEvents:function(){var s=this;return s.on("reset",s.reset.bind(s)),s.on("reset",s.params.elementSelector,s.reset.bind(s)),s.on("keyup",[s.params.minThumbSelector,s.params.maxThumbSelector],function(e){var t,a=i(e.target),r=!1,n=0;e.which===s.KEYS.ARROW_UP||e.which===s.KEYS.ARROW_LEFT?n=-1:e.which!==s.KEYS.ARROW_DOWN&&e.which!==s.KEYS.ARROW_RIGHT||(n=1),a.is(s.params.minThumbSelector)?(t=s.clamp(s.state.min,s.state.value.min+n*s.state.step,s.state.isMultiple?s.state.value.max-s.state.step:s.state.value.max))!==s.state.value.min&&(r=!0,s.state.value.min=t):a.is(s.params.maxThumbSelector)&&(t=s.clamp(s.state.isMultiple?s.state.value.min+s.state.step:s.state.value.min,s.state.value.max+n*s.state.step,s.state.max))!==s.state.value.max&&(r=!0,s.state.value.max=t),r&&s.update()}),s.$value.depotSwipe({targetSelector:[s.params.minThumbSelector,s.params.maxThumbSelector],onStart:function(e,t){((e=i(e.target)).is(s.params.minThumbSelector)||e.is(s.params.maxThumbSelector))&&(s.$container.addClass(s.params.activeClassName),s.state.$target=e)},onMove:function(e,t){var a;t.isActive&&s.state.$target&&(a=t.position.left/s.$value.width(),t=!1,a=s.positionToValue(a),s.state.$target.is(s.params.minThumbSelector)?(a=s.clamp(s.state.min,a,s.state.isMultiple?s.state.value.max-s.state.step:s.state.value.max))!==s.state.value.min&&(t=!0,s.state.value.min=a):(a=s.clamp(s.state.isMultiple?s.state.value.min+s.state.step:s.state.value.min,a,s.state.max))!==s.state.value.max&&(t=!0,s.state.value.max=a),t&&s.update())},onEnd:function(){s.$container.removeClass(s.params.activeClassName),s.state.$target=null},onCancel:function(){s.$container.removeClass(s.params.activeClassName),s.state.$target=null}}),s},init:function(){return this.render(),this.call(this.params.onInit),this}}),i.fn.formFieldRange=function(a){return i(this).each(function(e,t){i.data(this,"formFieldRange",new r(t,a))})}}(jQuery),function(i){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=i.extend(!0,{},i.depotProto,{pluginName:"formFieldSelect",defaults:{labelSelector:".js-form-field-label",valueSelector:".js-form-field-value",elementSelector:".js-form-field-element",valueTemplate:"#{for item in selected}#{if item.icon}#{endif}${item.text}#{if !loop.isLast}, #{endif}#{endfor}",dropDown:{template:'<div class="field__dropdown ${dropDown.selector|substr(1)}">${dropDown.listTemplate}#{if isMultiple}${dropDown.actionsTemplate}#{endif}</div>',listTemplate:'<ul class="field__list" id="${id}" role="listbox" aria-multiselectable="${isMultiple}" aria-orientation="vertical">${dropDown.listItemsTemplate}</ul>',listItemsTemplate:'#{for item in items}<li class="field__item ${dropDown.itemSelector|substr(1)}" data-icon="${item.icon}" data-value="${item.value}" role="option" aria-selected="${item.selected}" aria-disabled="${item.disabled}" tabindex="0">${item.text}</li>#{endfor}',actionsTemplate:'<div class="field__actions">${dropDown.buttonApplyTemplate}${dropDown.buttonResetTemplate}</div>',buttonApplyTemplate:'<button class="field__button field__button_apply ${dropDown.applySelector|substr(1)}" type="button">_{buttons.apply}</button>',buttonResetTemplate:'<button class="field__button field__button_reset ${dropDown.resetSelector|substr(1)}" type="button">_{buttons.reset}</button>',selectedClassName:"is-selected",selector:".js-form-field-dropdown",itemSelector:".js-form-field-item",applySelector:".js-form-field-apply",resetSelector:".js-form-field-reset",mediaQuery:"(min-width: 740px)"},dictionary:{buttons:{apply:{ru:"Применить",en:"Apply"},reset:{ru:"Сбросить",en:"Reset"}}},nullValue:"",onChangeSubmit:!1,onChange:null},isMultiple:function(){return this.$element.prop("multiple")},isDisabled:function(){return this.$element.prop("disabled")},getItemData:function(e){var t=i(e);return(t={text:e.textContent.trim(),value:t.data("value")||"",icon:t.data("icon")||"",selected:"true"===t.aria("selected"),disabled:"true"===t.aria("disabled")}).hash=this.hashify(t,12),t},getOptionData:function(e){return(e={text:e.textContent.trim(),value:e.value,icon:i(e).data("icon")||"",selected:e.selected,disabled:e.disabled}).hash=this.hashify(e,12),e},getSelectData:function(){var a=this,r={items:[],selected:[]};return a.$element.find("option").each(function(e,t){t=a.getOptionData(t),r.items=r.items.concat(t),t.selected&&(r.selected=r.selected.concat(t))}),r.selected.length||(r.selected=r.selected.concat(r.items[0])),r.hash=a.hashify(r,12),r},getDropDownData:function(){var a=this,r={items:[],selected:[]};return a.$dropDown.find(a.params.dropDown.itemSelector).each(function(e,t){t=a.getItemData(t),r.items=r.items.concat(t),t.selected&&(r.selected=r.selected.concat(t))}),r.selected.length||(r.selected=r.selected.concat(r.items[0])),r.hash=a.hashify(r,12),r},updateValue:function(){var e=this;return e.$value.html(e.format(e.params.valueTemplate,e.state.data)),e},updateTabindex:function(){var e=this;return e.state.mediaQuery.matches?(e.$element.attr("tabindex","-1"),e.$value.attr("tabindex","0")):(e.$element.attr("tabindex","0"),e.$value.attr("tabindex","-1")),e},updateState:function(){var e=this,t=e.getSelectData();return e.state.data.hash!==t.hash&&(e.state.data=t,e.updateValue()),e},update:function(){var n,s=this,e=s.getDropDownData();return e.hash!==s.state.data.hash&&(n=s.$element.find("option"),i.each(e.items,function(e,t){var a=s.state.data.items[e],r=n.eq(e);t.hash!==a.hash&&(s.state.data.items[e]=t,r.prop("disabled",t.disabled),r.prop("selected",t.selected))}),s.$element.trigger("change"),s.$element.trigger("focusout")),s},buildDropDown:function(){var e=this;e.$dropDown&&e.$dropDown.remove();var t=i.extend({id:e.eventNameSpace.substr(1),isMultiple:e.isMultiple(),dropDown:e.params.dropDown},e.state.data),a=e.format(e.params.dropDown.template,t),a=i(a);return e.$value.aria("controls",t.id),e.$container.append(a),a},expandDropDown:function(){var t=this;return t.state.isExpanded=!0,t.$dropDown=t.buildDropDown(),t.delay(function(){var e=t.$dropDown.find(t.params.dropDown.itemSelector+'[aria-selected="true"]').first();t.$container.addClass(t.params.activeClassName),t.$value.aria("expanded","true"),t.$dropDown.aria("hidden","false"),e.length&&e.focus(),t.$BODY.on(t.addEventNS("click",".kickoff"),function(e){t.state.isExpanded&&!i(e.target).closest(t.params.dropDown.selector).length&&t.collapseDropDown()}),t.call(t.params.onExpand)}),t},collapseDropDown:function(e){var t=this;return t.state.isExpanded=!1,t.$container.removeClass(t.params.activeClassName),t.$value.aria("expanded","false"),t.$dropDown.aria("hidden","true"),t.$BODY.off(t.addEventNS("click",".kickoff")),e||t.update(),t.$value.focus(),t.call(t.params.onCollapse,e),t},toggleDropDown:function(){return this.state.isExpanded?this.collapseDropDown():this.expandDropDown(),this},toggleItem:function(e,t){var a=this,r=a.$dropDown.find(a.params.dropDown.itemSelector+'[data-value="'+a.params.nullValue+'"]'),n="true"===e.aria("selected");return"true"===e.aria("disabled")||(e.data("value")!==a.params.nullValue?a.isMultiple()?n?(e.aria("selected","false"),a.$dropDown.find(a.params.dropDown.itemSelector+'[aria-selected="true"]').length||r.aria("selected","true").focus()):(e.aria("selected","true").focus(),r.aria("selected","false")):(e.aria("selected","true").focus(),e.siblings().aria("selected","false")):(r.aria("selected","true").focus(),r.siblings().aria("selected","false"))),a.isMultiple()&&!t||a.collapseDropDown(),a},reset:function(e){var t=this;return e&&e.stopPropagation(),t.$element.html(t.state.initialHTML),t.delay(function(){t.$element.trigger("clear"),t.updateState()},10),t},bindEvents:function(){var r=this;return r.bind("resize",r.$WINDOW,r.updateTabindex.bind(r)),r.on("reset",r.params.elementSelector,r.reset.bind(r)),r.on("change",r.params.elementSelector,function(e){r.updateState(),r.call(r.params.onChange),r.params.onChangeSubmit&&r.$container.closest("form").trigger("submit")}),r.on("click",r.params.valueSelector,function(e){r.state.mediaQuery.matches&&(r.isDisabled()||(e.preventDefault(),r.toggleDropDown()))}),r.on("keyup",r.params.valueSelector,function(e){r.state.mediaQuery.matches&&(r.state.isExpanded||r.isDisabled()||(e.keyCode!==r.KEYS.ARROW_DOWN&&e.keyCode!==r.KEYS.ARROW_UP||(e.preventDefault(),r.expandDropDown()),e.keyCode===r.KEYS.ESCAPE&&(e.preventDefault(),e.stopPropagation(),r.collapseDropDown(!0))))}),r.on("keydown",r.params.valueSelector,function(e){r.state.mediaQuery.matches&&(e.keyCode!==r.KEYS.SPACE&&e.keyCode!==r.KEYS.ENTER&&e.keyCode!==r.KEYS.ARROW_DOWN||(e.preventDefault(),r.state.isExpanded||r.expandDropDown()))}),r.on("transitionend",r.params.dropDown.selector,function(e){r.$dropDown.find(r.params.dropDown.itemSelector+'[aria-selected="true"]').first().focus()}),r.on("keydown",r.params.dropDown.selector,function(e){var t,a=r.$dropDown.find(r.params.dropDown.itemSelector+":focus");e.keyCode!==r.KEYS.TAB&&e.keyCode!==r.KEYS.ARROW_DOWN&&e.keyCode!==r.KEYS.ARROW_UP||(e.preventDefault(),e.keyCode===r.KEYS.ARROW_DOWN||!e.shiftKey&&e.keyCode===r.KEYS.TAB?((t=a.next()).length||(t=r.$dropDown.find(r.params.dropDown.itemSelector).first()),t.focus()):(e.keyCode===r.KEYS.ARROW_UP||e.shiftKey&&e.keyCode===r.KEYS.TAB)&&((t=a.prev()).length||(t=r.$dropDown.find(r.params.dropDown.itemSelector).last()),t.focus())),e.keyCode===r.KEYS.SPACE&&(e.preventDefault(),r.toggleItem(a)),e.keyCode===r.KEYS.ENTER&&(e.preventDefault(),r.toggleItem(a),r.collapseDropDown()),e.keyCode===r.KEYS.ESCAPE&&(e.preventDefault(),e.stopPropagation(),r.collapseDropDown(!0))}),r.on("click",r.params.dropDown.applySelector,function(e){e.preventDefault(),r.collapseDropDown()}),r.on("click",r.params.dropDown.resetSelector,function(e){e.preventDefault(),r.collapseDropDown(!0)}),r.on("click",r.params.dropDown.itemSelector,function(e){e.preventDefault(),r.toggleItem(i(this))}),r},getInitialState:function(){return{data:{items:[],selected:[]},mediaQuery:window.matchMedia(this.params.dropDown.mediaQuery),initialHTML:this.$element.html(),isDisabled:this.isDisabled()}},init:function(){var e=this;return e.updateState(),e.updateTabindex(),e.call(e.params.onInit),e}}),i.fn.formFieldSelect=function(a){return i(this).each(function(e,t){i.data(this,"formFieldSelect",new r(t,a))})}}(jQuery),function(r){"use strict";var t={formGRecaptcha:{formGRecaptchaSelector:".js-form-field-grecaptcha > div",render:!1,onInit:null,onError:null,onRefresh:null},dictionary:{errors:{grecaptcha:{ru:"Пройдите проверку",en:"Get Verified"}}}};r.formGRecaptchaMixin={loadFormGRecaptchaAPI:function(e){var t,a=this;return void 0===window.formGRecaptchaReady&&(window.formGRecaptchaReady=!1,window.onGRecaptchaLoadCallback=function(){window.formGRecaptchaReady=!0},(t=document.createElement("script")).src="https://www.google.com/recaptcha/api.js?"+r.param({onload:"onGRecaptchaLoadCallback",render:"explicit",hl:document.documentElement.lang}),document.head.appendChild(t)),a.delay(function(){!0===window.formGRecaptchaReady?"function"==typeof e&&(e(),a.$formGRecaptcha.removeClass("is-processing")):a.loadFormGRecaptchaAPI(e)},300),a},renderFormGRecaptcha:function(){var t=this;return t.$formGRecaptcha.addClass("is-processing"),t.loadFormGRecaptchaAPI(function(){void 0===t.cache.formGRecaptcha.id&&(t.setErrorFor(t.cache.formGRecaptcha.field,"is-required",t.getText("errors.grecaptcha")),t.checkSubmit(),t.cache.formGRecaptcha.id=window.grecaptcha.render(t.state.formGRecaptcha.elementID,{sitekey:t.state.formGRecaptcha.key,callback:function(e){t.cache.formGRecaptcha.field.value=e,t.removeErrorFor(t.cache.formGRecaptcha.field,"is-required"),t.checkSubmit()}}))}),t},refreshFormGRecaptcha:function(){var t=this;if(!0===window.formGRecaptchaReady&&void 0!==t.cache.formGRecaptcha.id)try{window.grecaptcha.reset(t.cache.formGRecaptcha.id),t.setErrorFor(t.cache.formGRecaptcha.field,"is-required",t.getText("errors.grecaptcha")),t.checkSubmit()}catch(e){t.error(e),t.renderFormGRecaptcha()}else t.renderFormGRecaptcha();return t},initFormGRecaptcha:function(){var e=this;e.getInitialState=e.proxyCallback(e.getInitialState,function(){return r.extend(!0,{},this,{formGRecaptcha:{elementID:e.$formGRecaptcha.attr("id"),key:e.$formGRecaptcha.data("key")}})}),e.params=r.extend(!0,{},e.translate(t),e.params),e.getElements(e.params.formGRecaptcha),e.state=e.getInitialState(),e.cache.formGRecaptcha=e.cleanObject(),e.$formGRecaptcha&&e.$formGRecaptcha.length&&(e.cache.formGRecaptcha.field={id:e.state.formGRecaptcha.elementID,type:"hidden",value:""},e.reset=e.proxyCallback(e.reset,function(){return e.refreshFormGRecaptcha()}),e.on("grecaptcha:refresh",function(){e.refreshFormGRecaptcha()}),e.on("click",e.params.formGRecaptcha.formGRecaptchaSelector,function(){e.refreshFormGRecaptcha()}),e.params.formGRecaptcha.render&&e.refreshFormGRecaptcha(),e.call(e.params.formGRecaptcha.onInit))}}}(jQuery),function(r){"use strict";var t={formMessage:{formBodySelector:".js-form-body",formMessageSelector:".js-form-message",formMessageBodySelector:".js-form-message-body",formMessageLabelSelector:".js-form-message-label",formMessageTextSelector:".js-form-message-text",formMessageCloseSelector:".js-form-message-close",successTimeout:1e4,errorTimeout:1e4,timeout:1e4,onInit:null,onShow:null,onHide:null}};r.formMessageMixin={showFormMessage:function(e,t){var a=this;return a.state.formMessage.isVisible||(a.state.formMessage.isVisible=!0,e&&(a.$formMessageLabel.html(e.label||e.title||""),a.$formMessageText.html(e.body||"")),a.$formMessage.aria("hidden","false"),a.$formBody.length&&a.$formBody.aria("hidden","true"),!0===e.success?a.$formMessageBody.attr("data-success","true"):!1===e.success?a.$formMessageBody.attr("data-success","false"):a.$formMessageBody.removeAttr("data-success"),void 0===t&&(t=!0===e.success?a.params.formMessage.successTimeout:!1===e.success?a.params.formMessage.errorTimeout:a.params.formMessage.timeout),t&&(a.state.formMessage.hideTimeout&&a.cancelDelay(a.state.formMessage.hideTimeout),"number"==typeof t&&(a.$formMessageBody.attr("data-autohide","true"),a.$formMessageBody.get(0).style.setProperty("--autohide-delay",t+"ms"),a.state.formMessage.hideTimeout=a.delay(function(){a.hideFormMessage(!0)},t),a.$BODY.on(a.addEventNS("click",".message:click"),function(e){a.state.formMessage.isVisible&&r(e.target).closest("body").length&&!r(e.target).closest(a.params.formMessage.formMessageBodySelector).length&&a.hideFormMessage()}))),a.call(a.params.formMessage.onShow,e)),a},hideFormMessage:function(e){var t=this;return(t.state.formMessage.isVisible||e)&&(t.state.formMessage.isVisible=!1,t.$formMessage.aria("hidden","true"),t.$formMessageBody.removeAttr("data-success"),t.$formMessageLabel.empty(),t.$formMessageText.empty(),t.$formBody.length&&t.$formBody.aria("hidden","false"),t.$BODY.off(t.addEventNS("click",".message:click")),t.call(t.params.formMessage.onHide)),t},bindFormMessageEvents:function(){var r=this;return r.on("click",r.params.formMessage.formMessageCloseSelector,function(e){e.preventDefault(),r.hideFormMessage()}),r.on("message:show",function(e,t,a){r.showFormMessage(t||e.message,a||e.timeout)}),r.on("message:hide",function(e,t){r.hideFormMessage(t||e.force)}),r.$BODY.on(r.addEventNS("keyup",".message:key"),function(e){r.state.formMessage.isVisible&&e.which===r.KEYS.ESCAPE&&(e.preventDefault(),r.hideFormMessage())}),r},initFormMessage:function(){var e=this;e.getInitialState=e.proxyCallback(e.getInitialState,function(){return r.extend(!0,{},this,{formMessage:{isVisible:!1}})}),e.params=r.extend(!0,{},e.translate(t),e.params),e.getElements(e.params.formMessage),e.state=e.getInitialState(),e.params.onReset=e.proxyCallback(e.params.onReset,function(){return e.hideFormMessage(!0)}),e.bindFormMessageEvents(),e.call(e.params.formMessage.onInit)}}}(jQuery),function(i){"use strict";var e={formResponse:{responseErrorsSelector:".js-form-response-error",responseLabelSelector:".js-form-response-label",responseBodySelector:".js-form-response-body",message:{success:!0,error:!0},reset:!0,onInit:null,onSuccess:null,onError:null}};i.formResponseMixin={initFormResponse:function(){var s=this;s.getInitialState=s.proxyCallback(s.getInitialState,function(){return i.extend(!0,{},this,{formResponse:{}})}),s.params=i.extend(!0,{},s.translate(e),s.params),s.getElements(s.params.formResponse),s.state=s.getInitialState(),s.params.onSubmit=s.proxyCallback(s.params.onSubmit,function(e){var t,a,r,n;e&&(t=(r=i(e).closest('form[name="'+s.$container.attr("name")+'"]')).find(s.params.formResponse.responseErrorsSelector),a=r.find(s.params.formResponse.responseLabelSelector).text(),r=r.find(s.params.formResponse.responseBodySelector).text(),n={},a&&r?(n.label=a,n.body=r,s.call(s.params.formResponse.onSuccess,n),s.params.formResponse.message.success&&n.body&&s.showFormMessage(n),s.params.formResponse.reset&&s.reset()):t.length?(n.errors={},t.each(function(e,t){var t=(a=i(t)).text(),a=a.data("field");n.errors[a]?n.errors[a].push(t):n.errors[a]=[t]}),s.call(s.params.formResponse.onError,n),i.each(n.errors,function(e,t){s.setExternalErrorFor(s.container[e],t[0])})):(s.deleteFormData(),s.call(s.params.formResponse.onError,e),s.error({action:"depotForm.onSubmit",data:{response:e},name:"UnexpectedError",message:"Неожиданный ответ сервера"})))}),s.params.onError=s.proxyCallback(s.params.onError,function(e,t,a){return s.showFormMessage({title:t,body:a},1e4),s}),s.call(s.params.formResponse.onInit)}}}(jQuery),function(n){"use strict";var r={dictionary:{},galleryContent:{targetElements:["~ *"],headElements:["title",'meta[name="description"]','meta[name="keywords"]'],onInsert:null,onInit:null}};n.galleryContentMixin={createHistoryState:function(e){var t=window.history&&window.history.state||{};return n.extend(!0,{},t,{galleryContent:e})},contentInsert:function(e,n){var s=this;s.params.galleryContent.headElements&&s.params.galleryContent.headElements.length&&s.params.galleryContent.headElements.forEach(function(e){var t=s.$DOCUMENT.find("head"),a=n.find("head"),r=t.find(e),e=a.find(e);r&&r.length?r.replaceWith(e.clone()):t.append(e.clone())});var t,a=n.find(s.getSelector()+s.params.galleryContent.targetElements).clone();return s.$container.nextAll().trigger("destroy").remove(),s.$container.after(a),a.trigger("lazy:added").trigger("figure:added"),s.state.galleryContent.pushStateEnabled?window.history&&"function"==typeof window.history.pushState&&(t=n.get(0).title||"",a=s.createHistoryState({currentRealIndex:s.state.currentRealIndex}),window.history.pushState(a,t,e)):s.state.galleryContent.pushStateEnabled=!0,s.call(s.params.galleryContent.onInsert),s},contentRequest:function(a){var r=this;r.state.galleryContent.request&&r.state.galleryContent.request.abort();var e=r.cache.galleryContent.documents[a];return e?r.contentInsert(a,e):r.state.galleryContent.request=n.ajax({url:a,type:"GET",dataType:"html",complete:function(e,t){200===e.status&&"success"===t&&(t=new DOMParser,e=n(t.parseFromString(e.responseText,"text/html")),r.cache.galleryContent.documents[a]=e,r.contentInsert(a,e))}}),r},initGalleryContent:function(){var e,t,a=this;a.cache.galleryContent={documents:a.params.cachedDocuments||{}},a.getInitialState=a.proxyCallback(a.getInitialState,function(){return n.extend(!0,{},this,{galleryContent:{pushStateEnabled:!0,request:null}})}),a.params=n.extend(!0,{},a.translate(r),a.params),a.state=a.getInitialState(),a.params.beforeChange=a.proxyCallback(a.params.beforeChange,function(e,t){t||(e=a.$items.eq(e).data("url"),a.contentRequest(e))}),a.bind("popstate",a.$WINDOW,function(e){var t;(e=e.originalEvent.state)&&e.galleryContent&&(a.state.galleryContent.pushStateEnabled=!1,t=a.getClosestDOMIndex(e.galleryContent.currentRealIndex),a.throttle("goTo",function(){a.goTo(t)}))}),window.history&&"function"==typeof window.history.replaceState&&(e=a.$DOCUMENT.get(0).title||"",t=a.createHistoryState({currentRealIndex:a.state.currentRealIndex}),window.history.replaceState(t,e)),a.call(a.params.galleryContent.onInit)}}}(jQuery),function(s){"use strict";var e={dictionary:{favorites:{add:{ru:"Добавить в избранное",en:"Add to favourites"},active:{ru:"В избранном",en:"Favorite"}}},galleryFavorites:{favoriteButtonSelector:".js-gallery-favorite",favoriteButtonTemplate:'<button class="carousel__favorite button button_inline ${favoriteButtonSelector|substr(1)}#{if isFavorite} is-active#{endif}" type="button" data-key="${key}">#{if isFavorite}_{favorites.active}#{else}_{favorites.add}#{endif}</button>',onInit:null}};s.galleryFavoritesMixin={updateFavorites:function(){var n=this;return n.$container.find(n.params.galleryFavorites.favoriteButtonSelector).each(function(e,t){var a=s(t),r=a.closest(n.params.itemsSelector).data("url"),t=s.favorites.generateKey(r),r=n.state.galleryFavorites.favorites[t],r=s.extend(!0,n.cleanObject(n.params.galleryFavorites),{key:t,isFavorite:r}),r=n.format(n.params.galleryFavorites.favoriteButtonTemplate,r);a.replaceWith(r)}),n},initGalleryFavorites:function(){var n=this;n.getInitialState=n.proxyCallback(n.getInitialState,function(){return s.extend(!0,{},this,{galleryFavorites:{favorites:s.favorites.getAll()}})}),n.params=s.extend(!0,{},n.translate(e),n.params),n.state=n.getInitialState(),n.bindEvents=n.proxyCallback(n.bindEvents,function(){s.favorites.onChange(function(e){n.state.galleryFavorites.favorites=e,n.updateFavorites()}),n.on("click",n.params.galleryFavorites.favoriteButtonSelector,function(e){e.preventDefault();var t=s(this).closest(n.params.itemsSelector),a=t.data("url"),e=s.favorites.generateKey(a),a={label:document.title,text:t.find(".slide__text").text(),image:t.find(".slide__image").attr("src"),url:a};s.favorites.toggleItem(e,a)})}),n.$items.each(function(e,t){var a=s(t),r=a.data("url"),t=s.favorites.generateKey(r),r=n.state.galleryFavorites.favorites[t],r=s.extend(!0,n.cleanObject(n.params.galleryFavorites),{key:t,isFavorite:r}),r=n.format(n.params.galleryFavorites.favoriteButtonTemplate,r);a.append(r)}),n.call(n.params.galleryContent.onInit)}}}(jQuery),function(a){"use strict";var r={galleryItems:{variable:"galleryItems",onInit:null}};a.galleryItemsMixin={fetchGalleryItems:function(e){return this},galleryItemsInit:function(){},initGalleryItems:function(e){var t=this;t.getInitialState=t.proxyCallback(t.getInitialState,function(){return a.extend(!0,{},this,{galleryItems:{items:[]}})}),t.params=a.extend(!0,{},r,t.params),t.state=t.getInitialState(),t.cache.galleryItems={init:t.init,documents:{}},t.init=t.galleryItemsInit,t.fetchGalleryItems(function(){t.call(e),t.galleryItemsInit()}),t.call(t.params.galleryItems.onInit)}}}(jQuery),function(r){"use strict";var e={dictionary:{buttons:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},galleryNavigation:{template:'<div class="gallery__navigation">${buttonBackwardsTemplate}${buttonForwardsTemplate}</div>${bulletsTemplate}',buttonBackwardsTemplate:'<button class="gallery__button gallery__button_backwards ${backwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"#{if backwardsDisabled} disabled#{endif}></button>',buttonForwardsTemplate:'<button class="gallery__button gallery__button_forwards ${forwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"#{if forwardsDisabled} disabled#{endif}></button>',bulletsTemplate:'#{if showNavigation}<div class="gallery__bullets">#{for bullet in 1..${bullets}}${bulletTemplate}#{endfor}</div>#{endif}',bulletTemplate:'<button class="gallery__bullet ${bulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',backwardsSelector:".js-gallery-backwards",forwardsSelector:".js-gallery-forwards",bulletsSelector:".js-gallery-bullet",onInit:null}};r.galleryNavigationMixin={navigationRender:function(){var e=this,t=r.extend(!0,{},e.params.galleryNavigation,{showNavigation:1<e.state.itemsQuantity,backwardsDisabled:e.state.galleryNavigation.backwardsDisabled,forwardsDisabled:e.state.galleryNavigation.forwardsDisabled,bullets:e.state.itemsQuantity}),t=e.format(e.params.galleryNavigation.template,t);return e.$viewport.after(t),e.getElements(e.params.galleryNavigation),e},navigationUpdate:function(){var e=this;return e.state.galleryNavigation.backwardsDisabled=!e.params.loop&&1===e.state.currentRealIndex,e.state.galleryNavigation.forwardsDisabled=!e.params.loop&&e.state.currentRealIndex===e.state.itemsQuantity,e.navigationBulletsUpdate(),e.navigationButtonsUpdate(),e},navigationBulletsUpdate:function(){return this.$bullets.filter('[aria-current="true"]').removeAria("current"),this.$bullets.filter('[data-index="'+this.state.currentRealIndex+'"]').aria("current","true"),this},navigationButtonsUpdate:function(){var e=this;return e.$backwards.prop("disabled",e.state.galleryNavigation.backwardsDisabled),e.$forwards.prop("disabled",e.state.galleryNavigation.forwardsDisabled),e},navigationBindEvents:function(){var a=this;return a.on("click",a.params.galleryNavigation.backwardsSelector,function(e){e.preventDefault(),a.throttle("backwards",a.goBackwards)}),a.on("click",a.params.galleryNavigation.forwardsSelector,function(e){e.preventDefault(),a.throttle("forwards",a.goForwards)}),a.on("click",a.params.galleryNavigation.bulletsSelector,function(e){e.preventDefault();var e=r(this).data("index"),t=a.getClosestDOMIndex(e);a.throttle("goTo",function(){a.goTo(t)})}),a},initGalleryNavigation:function(){var a=this;a.getInitialState=a.proxyCallback(a.getInitialState,function(){return r.extend(!0,{},this,{galleryNavigation:{backwardsDisabled:!0,forwardsDisabled:!0}})}),a.params=r.extend(!0,{},a.translate(e),a.params),a.state=a.getInitialState(),a.params.onChange=a.proxyCallback(a.params.onChange,function(e,t){t||a.navigationUpdate()}),a.navigationRender(),a.navigationUpdate(),a.navigationBindEvents(),a.call(a.params.galleryNavigation.onInit)}}}(jQuery),function(s){"use strict";var e={dictionary:{},galleryRotation:{bodyCroppedClassName:"is-cropped",delay:500,onInit:null}};s.galleryRotationMixin={inViewport:function(){var e=s("js-sticky"),a=0;e.each(function(e,t){a+=s(t).outerHeight()});var t=(t=(r=this.$container.offset().top)+this.$container.outerHeight(!0))<(e=this.$WINDOW.scrollTop()+a),e=e+this.$WINDOW.innerHeight()<r,r=this.$BODY.hasClass(this.params.galleryRotation.bodyCroppedClassName),n="hidden"!==document.visibilityState;return!(t||e||r)&&n},startRotation:function(){var t=this;return!t.state.galleryRotation.isRunning&&1<t.$items.length&&(t.state.galleryRotation.isRunning=!0,t.inViewport()&&(t.state.galleryRotation.isRunning=!0,t.state.galleryRotation.animation=t.animate(1e5,function(){var e;t.state.galleryRotation.isPaused||t.state.preventClick||(e=t.now(),t.state.galleryRotation.timestamp||(t.state.galleryRotation.timestamp=e),e-t.state.galleryRotation.timestamp>=t.params.galleryRotation.delay&&(t.state.galleryRotation.timestamp=e,t.goForwards()))}))),t},resumeRotation:function(){return this.state.galleryRotation.isPaused=!1,this},pauseRotation:function(){return this.state.galleryRotation.isPaused=!0,this},bindGalleryRotationEvents:function(){var e=this;return e.bind("scroll resize",e.$WINDOW,function(){e.throttle("scroll",function(){e.state.galleryRotation.isRunning&&(e.inViewport()?e.resumeRotation():e.pauseRotation())})}),e.bind("visibilitychange",e.$DOCUMENT,function(){e.state.galleryRotation.isRunning&&(e.inViewport()?e.resumeRotation():e.pauseRotation())}),e},initGalleryRotation:function(){var a=this;a.getInitialState=a.proxyCallback(a.getInitialState,function(){return s.extend(!0,{},this,{galleryRotation:{isPaused:!1,isRunning:!1,animation:null,timestamp:null}})}),a.params=s.extend(!0,{},a.translate(e),a.params),a.params.beforeChange=a.proxyCallback(a.params.beforeChange,function(e,t){t||a.pauseRotation()}),a.params.onTransitionEnd=a.proxyCallback(a.params.onTransitionEnd,function(){a.state.galleryRotation.timestamp=a.now(),a.resumeRotation()}),a.state=a.getInitialState(),a.bindGalleryRotationEvents(),a.startRotation(),a.call(a.params.galleryRotation.onInit)}}}(jQuery),function(n){"use strict";var e={dictionary:{thumbs:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},galleryThumbs:{template:'<div class="gallery__thumbs thumbs"><div class="thumbs__viewport ${thumbsViewportSelector|substr(1)}"><ul class="thumbs__list ${thumbsListSelector|substr(1)}">#{for item in items}${thumbTemplate}#{endfor}</ul></div>${thumbsButtonBackwardsTemplate}${thumbsButtonForwardsTemplate}${thumbsBulletsTemplate}</div>',thumbTemplate:'<li class="thumbs__item ${thumbsSelector|substr(1)}" data-index="${item.index}"><img class="thumbs__image js-thumbs-image" src="${item.thumb}" alt="${item.index}"></li>',thumbsButtonBackwardsTemplate:'#{if buttonsEnabled}<button class="thumbs__button thumbs__button_backwards ${thumbsBackwardsSelector|substr(1)}" type="button" aria-label="_{thumbs.backwards}" title="_{thumbs.backwards}" disabled></button>#{endif}',thumbsButtonForwardsTemplate:'#{if buttonsEnabled}<button class="thumbs__button thumbs__button_forwards ${thumbsForwardsSelector|substr(1)}" type="button" aria-label="_{thumbs.forwards}" title="_{thumbs.forwards}" disabled></button>#{endif}',thumbsBulletsTemplate:'#{if buttonsEnabled}<div class="thumbs__bullets">#{for bullet in 1..${bullets}}${thumbsBulletTemplate}#{endfor}</div>#{endif}',thumbsBulletTemplate:'<button class="thumbs__bullet ${thumbsBulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',thumbsViewportSelector:".js-thumbs-viewport",thumbsListSelector:".js-thumbs-list",thumbsSelector:".js-thumbs-item",thumbsBackwardsSelector:".js-thumbs-backwards",thumbsForwardsSelector:".js-thumbs-forwards",thumbsBulletsSelector:".js-thumbs-bullet",onPage:2,mediaQueries:{},onInit:null}};n.galleryThumbsMixin={thumbsRender:function(){var e=this,t=n.extend(!0,{},e.params.galleryThumbs,{items:e.state.items,buttonsEnabled:e.state.itemsQuantity>e.state.galleryThumbs.onPage,bullets:e.state.galleryThumbs.bulletsQuantity}),t=e.format(e.params.galleryThumbs.template,t);return e.$viewport.after(t),e.getElements(e.params.galleryThumbs),e},thumbsUpdate:function(){var e=this;return e.$thumbs.filter('[aria-current="true"]').removeAria("current"),e.$thumbs.filter('[data-index="'+e.state.currentRealIndex+'"]').aria("current","true"),e.state.galleryThumbs.currentBulletIndex=Math.ceil(e.state.currentRealIndex/e.state.galleryThumbs.onPage),(e.state.currentRealIndex-1>e.state.galleryThumbs.targetDOMIndex+e.state.galleryThumbs.onPage-1||e.state.currentRealIndex-1<e.state.galleryThumbs.targetDOMIndex)&&e.thumbsGoToBullet(e.state.galleryThumbs.currentBulletIndex),e},thumbsBulletsUpdate:function(){return this.$thumbsBullets.filter('[aria-current="true"]').removeAria("current"),this.$thumbsBullets.filter('[data-index="'+this.state.galleryThumbs.currentBulletIndex+'"]').aria("current","true"),this},thumbsButtonsUpdate:function(){var e=this;return e.$thumbsBackwards.prop("disabled",1===e.state.galleryThumbs.currentBulletIndex),e.$thumbsForwards.prop("disabled",e.state.galleryThumbs.currentBulletIndex===e.state.galleryThumbs.bulletsQuantity),e},thumbsOnTransitionEnd:function(){var e=this;return e.cancelDelay(e.state.galleryThumbs.transitionDelay),e.$thumbsList.removeClass(e.params.transitionClassName),e.$thumbsList.removeClass(e.params.slowTransitionClassName),e.state.galleryThumbs.isTransition=!1,e.state.galleryThumbs.preventClick=!1,e},thumbsGoTo:function(e,t){var a=this,r=a.clamp(0,e,a.state.itemsQuantity);r<0||a.state.itemsQuantity<=a.state.galleryThumbs.onPage?r=0:r+a.state.galleryThumbs.onPage>a.state.itemsQuantity&&(r=a.state.itemsQuantity-a.state.galleryThumbs.onPage);var n=a.$thumbs.eq(r),e=a.$thumbs.eq(r).data("index");return a.state.galleryThumbs.current||(a.state.galleryThumbs.current=n.get(0),a.state.galleryThumbs.$current=n),a.state.galleryThumbs.preventClick=!t,a.state.galleryThumbs.currentDOMIndex=r,a.state.galleryThumbs.targetDOMIndex=r,a.state.galleryThumbs.currentBulletIndex=Math.ceil((e+1)/a.state.galleryThumbs.onPage),a.moveListToPositionLeft(a.$thumbsList,a.getItemPosition(n),a.state.galleryThumbs,t),a.thumbsBulletsUpdate(),a.thumbsButtonsUpdate(),a},thumbsGoForwards:function(){var e=this.state.galleryThumbs.currentDOMIndex+this.state.galleryThumbs.onPage;return this.thumbsGoTo(e)},thumbsGoBackwards:function(){var e=this.state.galleryThumbs.currentDOMIndex-this.state.galleryThumbs.onPage;return this.thumbsGoTo(e)},thumbsGoToBullet:function(e){return e=(e-1)*this.state.galleryThumbs.onPage,this.thumbsGoTo(e),this},thumbsBindEvents:function(){var r=this;return r.on("transitionend",r.params.galleryThumbs.thumbsListSelector,function(e){e.stopPropagation(),n(e.target).is(r.params.galleryThumbs.thumbsListSelector)&&r.call(r.thumbsOnTransitionEnd)}),r.on("click",r.params.galleryThumbs.thumbsBackwardsSelector,function(e){e.preventDefault(),r.throttle("thumbsBackwards",r.thumbsGoBackwards)}),r.on("click",r.params.galleryThumbs.thumbsForwardsSelector,function(e){e.preventDefault(),r.throttle("thumbsForwards",r.thumbsGoForwards)}),r.on("click",r.params.galleryThumbs.thumbsBulletsSelector,function(e){e.preventDefault();var t=n(this).data("index");r.throttle("thumbsForwards",function(){r.thumbsGoToBullet(t)})}),r.on("click",r.params.galleryThumbs.thumbsSelector,function(e){var t,a;e.preventDefault(),r.state.galleryThumbs.isTransition||r.state.galleryThumbs.preventClick||(e=(t=n(this)).data("index"),a=r.state.currentDOMIndex+e-r.state.currentRealIndex,r.throttle("goTo",function(){r.state.galleryThumbs.current=t.get(0),r.state.galleryThumbs.$current=t,r.goTo(a)}))}),r.bind("resize",r.$WINDOW,function(){r.throttle("resizeThumbs",function(){r.thumbsGoTo(r.state.galleryThumbs.targetDOMIndex,!0)},15)}),r.params.swipe&&r.hasPlugin("depotSwipe")&&r.$thumbsViewport.depotSwipe({targetSelector:r.params.galleryThumbs.thumbsListSelector,touchThreshold:r.params.swipeThreshold,mouse:!0,onStart:function(e){e.preventDefault(),r.state.galleryThumbs.preventClick=!0},onMove:function(e,t){e.preventDefault(),e=r.$thumbs.eq(r.state.galleryThumbs.targetDOMIndex),e=r.getItemPosition(e),0!=(t=t.current.left-t.start.left)&&r.moveListToPositionLeft(r.$thumbsList,e+t,r.state.galleryThumbs,!0)},onEnd:function(e,t){e.preventDefault(),e.stopPropagation(),0<t.delta?r.thumbsGoBackwards():r.thumbsGoForwards()},onCancel:function(e,t){0!==t.delta?(r.state.galleryThumbs.preventClick=!0,t=r.$thumbs.eq(r.state.galleryThumbs.targetDOMIndex),r.moveListToPositionLeft(r.$thumbsList,r.getItemPosition(t),r.state.galleryThumbs)):r.state.galleryThumbs.preventClick=!1}}),r},initGalleryThumbs:function(){var a=this;a.getInitialState=a.proxyCallback(a.getInitialState,function(){var e=a.params.galleryThumbs.onPage,t=document.documentElement.clientWidth;return 740<=t&&(e=3),1420<=t&&(e=5),t=Math.ceil(a.state.itemsQuantity/e),n.extend(!0,{},this,{galleryThumbs:{$current:null,current:null,targetDOMIndex:0,currentDOMIndex:0,currentBulletIndex:0,direction:0,isTransition:!1,preventClick:!1,onPage:e,bulletsQuantity:t,transitionDelay:null}})}),a.params=n.extend(!0,{},a.translate(e),a.params),a.state=a.getInitialState(),a.params.onChange=a.proxyCallback(a.params.onChange,function(e,t){t||a.thumbsUpdate()}),a.thumbsRender(),a.thumbsGoTo(a.params.startFrom,!0),a.thumbsUpdate(),a.thumbsBindEvents(),a.call(a.params.galleryThumbs.onInit)}}}(jQuery),function(a){"use strict";a.fn.aria=function(e,t){return arguments.length&&1<arguments.length?this.each(function(){a.attr(this,"aria-"+e,t)}):a.attr(this.get(0),"aria-"+e)},a.fn.removeAria=function(e){return this.each(function(){a.removeAttr(this,"aria-"+e)})}}(jQuery),function(o){"use strict";var t={mapFeatures:{featuresSelector:".js-map-features",featuresCloseSelector:".js-map-features-close",featuresListSelector:".js-map-features-list",featuresItemsSelector:".js-map-features-item",featuresScrollbarSelector:".js-map-features-scrollbar",featuresThumbSelector:".js-map-features-thumb",featuresSearchSelector:".js-map-features-search",featuresTemplate:'<div class="map__features features features_map ${featuresSelector|substr(1)}" aria-hidden="${hidden}">${featuresCloseTemplate}${featuresLabelTemplate}${featuresSearchTemplate}${featuresListTemplate}${featuresScrollbarTemplate}</div>',featuresCloseTemplate:'<button class="features__close ${featuresCloseSelector|substr(1)}" type="button" title="_{buttons.close}" aria-label="_{buttons.close}"></button>',featuresLabelTemplate:'#{if label}<div class="features__heading">${label|ft}</div>#{endif}',featuresSearchTemplate:'#{if searchParam}<form class="features__search ${featuresSearchSelector|substr(1)}"><div class="field field_default field_round js-form-field"><input class="field__element field__element_search" type="search" name="search" id="features_search_${id}" autocomplete="off" list="features_list_${id}"><datalist id="features_list_${id}">#{for city in cities}<option value="${city}">#{endfor}</datalist><label class="field__label js-form-field-label" for="features_search_${id}">_{features.search}</label><button class="field__button button button_field ${featuresSearchButtonSelector|substr(1)}" type="submit" title="_{buttons.search}" aria-label="_{buttons.search}"><span class="button__icon button__icon_search"></span></button></div></form>#{endif}',featuresListTemplate:'<div class="features__overflow"><div class="features__list ${featuresListSelector|substr(1)}">#{for item in items}${featuresItemsTemplate}#{endfor}</div></div>',featuresItemsTemplate:'<div class="features__item ${featuresItemsSelector|substr(1)}" data-id="${item.id}"><div class="features__city">${item.city|ft}</div><div class="features__label">${item.label|ft}</div><div class="features__address">${item.address|ft}</div>#{if item.phone|length}#{for phone in item.phone}<div class="features__phone"><a href="tel:${phone|normPhone}">${phone}</a></div>#{endfor}#{endif}</div>',featuresScrollbarTemplate:'<div class="features__scrollbar ${featuresScrollbarSelector|substr(1)}"><div class="features__thumb ${featuresThumbSelector|substr(1)}"></div></div>',externalParams:[],searchParam:"",onInit:null},dictionary:{buttons:{close:{ru:"Закрыть",en:"Close"},search:{ru:"Искать",en:"Search"}},features:{empty:{ru:"Нет элементов для отображения",en:"No items to display"},search:{ru:"Искать",en:"Search"}}}};o.mapFeaturesMixin={renderMapFeatures:function(s){var i=this;i.$features&&i.$features.length&&(i.state.mapFeatures.city="",i.state.mapFeatures.isVisible=!1,i.$features.remove());var e=o.extend(!0,i.cleanObject(i.params.mapFeatures),{id:i.hash,label:i.state.response&&i.state.response.label||"",items:s,hidden:!i.state.mapFeatures.isVisible,cities:function(){return s.reduce(function(e,t){return t=t.city,-1===e.indexOf(t)&&e.push(t),e},[])},filters:{normPhone:function(e){const t=e.toString().split(/[^0-9]+доб[^0-9]+/i),a=t[0];return e=t[1]&&t[1].replace(/[^0-9+]/g,""),a&&a.replace(/^[8]/,"+7").replace(/[^0-9+]/g,"")+(e?";ext="+e:"")}}}),e=i.format(i.params.mapFeatures.featuresTemplate,e);return i.$viewport.append(e),i.getElements(i.params.mapFeatures),i.updateMapFeaturesScrollbar(),i.$featuresScrollbar.depotSwipe({targetSelector:i.params.mapFeatures.featuresThumbSelector,onStart:function(e,t){var a=i.$featuresList.get(0).scrollHeight,r=i.$featuresScrollbar.height();i.state.mapFeatures.featuresListScrollTop=i.$featuresList.scrollTop(),i.state.mapFeatures.featuresScrollbarScale=a/r},onMove:function(e,t){var a;t.isActive&&(a=i.state.mapFeatures.featuresListScrollTop,t=(t.current.top-t.start.top)*i.state.mapFeatures.featuresScrollbarScale,i.$featuresList.scrollTop(a+t),i.updateMapFeaturesScrollbar())}}),i.$featuresSearch.depotForm({validation:!1,onSubmit:function(e){e&&e.preventDefault();for(var t=o.depotParse(this.state.formData),a=s.length,r=-1,n=0;n<a;n++)if(s[n].city===t.search){r=n;break}-1!==r?(i.applyMapFeaturesCity(t.search),e=i.$featuresItems.eq(r),i.$featuresList.animate({scrollTop:e.position().top+i.$featuresList.scrollTop()},{step:function(){i.triggerTo(i.$featuresList,"update")}})):o.depotNotifications.info({ru:"Нет точек в выбранном городе, попробуйте поискать в соседних",en:"There are no points in the selected city, try searching in nearby"})}}),i},updateMapFeaturesScrollbar:function(){var e,t,a,r=this;return r.$featuresList&&r.$featuresList.length&&(a=r.$featuresList.height(),t=r.$featuresList.get(0).scrollHeight,e=r.$featuresList.scrollTop(),t=parseFloat((a/t*100).toFixed(6)),a=parseFloat((e/a*100).toFixed(6)),r.$featuresThumb.css(r.prefixed({height:t+"%",transform:"translate3d(0,"+a+"%,0)"}))),r},getMapFeaturesParams:function(){var t=o.depotHash.toObject()||{},a=this.cleanObject();return this.params.mapFeatures.externalParams.forEach(function(e){a[e]=t[e]}),a},updateMapFeaturesParams:function(){var e=this.getMapFeaturesParams();return o.extend(!0,this.cleanObject(this.state.externalParams),e),this},showMapFeatures:function(){return this.state.mapFeatures.isVisible=!0,this.$features.aria("hidden","false"),this},applyMapFeaturesCity:function(e){var t=this;return t.state.mapFeatures.city=e,(e=t.cache.points.search('properties.city == "'+e+'"')).getLength()||(e=t.cache.points),e.applyBoundsToMap(t.cache.map,{checkZoomRange:!0,flying:!1,useMapMargin:!0}).then(function(){t.cache.map.getZoom()>t.params.mapOptions.zoom&&t.cache.map.setZoom(t.params.mapOptions.zoom,{checkZoomRange:!0,flying:!1,useMapMargin:!0})}),t},hideMapFeatures:function(){var e=this;return e.state.mapFeatures.isVisible=!1,e.$features.aria("hidden","true"),e.deselectMapFeatures(),e.applyMapFeaturesCity(e.state.mapFeatures.city),e},toggleMapFeature:function(e){var t=this;return t.$featuresItems.filter('[data-id="'+e+'"]').hasClass(t.params.activeClassName)?t.deselectMapFeature(e):t.selectMapFeature(e),t},selectMapFeature:function(e){var t=this;t.deselectMapFeatures();var a=t.$featuresItems.filter('[data-id="'+e+'"]').addClass(t.params.activeClassName),r=t.cache.points.search('properties.id == "'+e+'"').setProperties("isActive",!0);return r.getLength()&&(e=r.get(0),t.state.mapFeatures.city=e.properties.get("city"),t.cache.map.setCenter(r.getCenter(t.cache.map,{useMapMargin:!0,flying:!0})),t.cache.map.setZoom(t.params.mapOptions.zoom),t.$featuresList.animate({scrollTop:a.position().top+t.$featuresList.scrollTop()},{step:function(){t.triggerTo(t.$featuresList,"update")}})),t.state.mapFeatures.isVisible||t.showMapFeatures(),t},deselectMapFeature:function(e){var t=this;return t.$featuresItems.filter('[data-id="'+e+'"]').removeClass(t.params.activeClassName),t.cache.points.search('properties.id == "'+e+'"').setProperties("isActive",!1),t.cache.points.search("properties.isActive=true").getLength()||t.hideMapFeatures(),t},deselectMapFeatures:function(){var e=this;return e.$featuresItems.filter("."+e.params.activeClassName).removeClass(e.params.activeClassName),e.cache.points.search("properties.isActive == true").setProperties("isActive",!1),e},bindMapFeaturesEvents:function(){var a=this;return a.on("map:points:ready",function(e,t){a.renderMapFeatures(t.points)}),a.on("click",a.params.mapFeatures.featuresCloseSelector,function(e){e.preventDefault(),a.debounce("hideMapFeatures",a.hideMapFeatures)}),a.on("click",a.params.mapFeatures.featuresItemsSelector,function(e){e.preventDefault(),a.toggleMapFeature(o(this).data("id"))}),a.on("wheel update",a.params.mapFeatures.featuresListSelector,function(e){a.updateMapFeaturesScrollbar()}),a.bind("resize",a.$WINDOW,function(){a.updateMapFeaturesScrollbar()}),o.depotHash.onChange(function(){a.throttle("hashChange",function(){a.inViewport()&&(a.updateMapFeaturesParams(),a.getPoints())})}),a},initMapFeatures:function(){var e=this;e.getInitialState=e.proxyCallback(e.getInitialState,function(){return o.extend(!0,e.cleanObject(this),{mapFeatures:{city:"",isVisible:1420<=document.documentElement.clientWidth,featuresListScrollTop:0,featuresScrollbarScale:1}})}),e.params=o.extend(!0,{},e.translate(t),e.params),e.params.getExternalParams=e.proxyCallback(e.params.getExternalParams,function(){return o.extend(!0,e.cleanObject(this),e.getMapFeaturesParams())}),e.state=e.getInitialState(),e.updateMapFeaturesParams(),e.bindMapFeaturesEvents(),e.call(e.params.mapFeatures.onInit)}}}(jQuery),function(o){"use strict";function r(e,t){return this.call(this._init,e,t)}r.prototype=o.extend(!0,{},o.depotProto,{pluginName:"mapWrapper",defaults:{viewportSelector:".js-map-viewport",canvasSelector:".js-map-canvas",processingClassName:"is-processing",errorClassName:"is-error",centerParam:"center",lazy:!0,empty:!1,mapOptions:{zoom:16},ajax:{type:"GET"},setPointsSilent:!1,placeMark:{preset:"islands#redDotIcon"},center:"55.721184, 37.652292",marginAreas:[{top:0,left:0,width:"100%",height:10},{bottom:0,left:0,width:"100%",height:10},{left:0,top:0,width:10,height:"100%"},{right:0,top:0,width:10,height:"100%"}],debug:!1,cache:{type:"session",expires:"15m"},processPoint:null,getExternalParams:null,getFeatureCollection:null,onReady:null,onResize:null,onPointClick:null},getInitialState:function(){var e=this,t=e.$container.data()||{};return{request:null,apiKey:t.apiKey,center:e.toCoordinates(t[e.params.centerParam]||e.params.center),setPointsSilent:e.params.setPointsSilent,externalParams:e.cleanObject()}},inViewport:function(){function a(e){return"none"!==e.css("display")&&"hidden"!==window.getComputedStyle(e.get(0)).visibility}if("hidden"===document.visibilityState)return!1;var r=a(this.$container);if(!r)return!1;if(this.$container.parents().each(function(e,t){return a(o(t))||(r=!1),r}),!r)return!1;var e=o("js-sticky"),n=0;e.each(function(e,t){n+=o(t).outerHeight()});var t=this.$container.offset().top,s=t+this.$container.outerHeight(!0),i=(e=this.$WINDOW.scrollTop()+n)+this.$WINDOW.innerHeight();return!(s<e||i<t)},loadStart:function(){var e=this;return e.params.debug&&console.time(e.eventNameSpace),e.$container.removeClass(e.params.errorClassName),e.$container.addClass(e.params.processingClassName),e},loadEnd:function(){var e=this;return e.$container.removeClass(e.params.processingClassName),e.params.debug&&console.timeEnd(e.eventNameSpace),e},loadFail:function(){var e=this;return e.$container.removeClass(e.params.processingClassName),e.$container.addClass(e.params.errorClassName),o.depotNotifications.warn({ru:"Карта: что-то пошло не так. Попробуйте обновить страницу или вернуться позже.",en:"Map: something went wrong. Try refreshing the page or come back later."}),e.params.debug&&console.timeEnd(e.eventNameSpace),e},checkViewportLoadAPI:function(){var e=this,t=-1!==["loading","initializing","initialized","ready"].indexOf(e.state.api),a=e.inViewport();return!t&&a&&(e.loadAPI(),e.unbind("","viewport",e.$WINDOW),e.unbind("","viewport",e.$DOCUMENT),e.params.empty||e.getPoints()),e},loadAPI:function(){var t=this;t.state.api="loading",t.loadStart();var e=t.format("https://api-maps.yandex.ru/2.1/?#{if apiKey}apikey=${apiKey}&#{endif}lang=${lang}",{apiKey:t.state.apiKey,lang:t.LANGUAGE});return t.addScripts({src:e,exports:"ymaps"},function(e){e?(t.loadFail(),t.call(t.params.onError,e)):t.initAPI()}),t},initAPI:function(){var t=this;return t.wait("initAPI",function(){if(window.ymaps&&"loading"===t.state.api){t.state.api="initializing";try{window.ymaps.ready(function(){t.state.api="initialized"})}catch(e){t.error({action:"MapWrapper.initAPI",data:{error:e},name:e.text,number:e.number,message:e.message})}}return"initialized"===t.state.api},function(){t.state.api="ready",t.$container.trigger("map:ready:api"),t.drawMap(),t.setPoints(t.cache.pointsArray,t.state.setPointsSilent)}),t},loadPoints:function(r,t){var n=this,s=o.param(n.state.externalParams,!0);return n.state.request||(n.state.request=o.ajax({url:r,type:n.params.ajax.type,dataType:"json",data:s,success:function(e){n.state.request=null,e&&e.success?(n.state.points="loaded",n.state.response=e,n.setPoints(e.points),n.params.cache&&!n.DEBUG&&o.depotStorage.setItem("mapResponse-"+t,e,n.params.cache)):(n.state.points="empty",n.$container.trigger("points:error"),n.error({action:"MapWrapper.loadPoints",data:{url:r,data:s,response:e},name:"Error",number:0,message:e.error||"Неожиданный ответ сервера"}))},error:function(e,t,a){n.state.points="empty",n.$container.trigger("points:error"),n.error({action:"MapWrapper.loadPoints",data:{url:r,data:s},name:t,number:e.status,message:a})}})),n},getPoints:function(){var e=this;e.state.points="loading",e.state.externalParams=o.extend(!0,e.cleanObject(e.state.externalParams),e.call(e.params.getExternalParams));var t,a=(n=e.$container.data()).pointsArray,r=n.pointsVar,n=n.pointsUrl;return a&&"array"===e.getType(a)?(e.info("--debug","::getPoints","Источник: pointsArray",a),e.setPoints(a),e.state.points="loaded"):r&&window[r]?(e.info("--debug","::getPoints","Источник: pointsVar",r),e.setPoints(window[r]),e.state.points="loaded"):n&&"string"==typeof n&&n.length?(r=n+"?"+o.depotParse(e.state.externalParams,{reverse:!0}),e.info("--debug","::getPoints","Источник: pointsUrl",r),e.params.cache&&!e.DEBUG&&(t=o.depotStorage.getItem("mapResponse-"+r,e.params.cache.type))&&"object"==typeof t?(e.state.points="loaded",e.state.response=t,e.setPoints(t.points)):e.loadPoints(n,r)):(e.state.points="empty",e.warn("::getPoints","Не удалось получить данные")),e},toCoordinates:function(t){var a=[],e=this.getType(t);try{"string"===e?-1!==t.indexOf(";")?o.each(t.split(/;\s*/),function(e,t){a.push(t.split(/,\s*/))}):a=t.split(/,\s*/):"object"===e?a=[t.lat||t.latitude,t.lon||t.longitude]:"array"===e&&(a=t)}catch(e){this.error({action:"MapWrapper.toCoordinates",data:{source:t},name:e.name,number:e.number,message:e.message})}return a},normalizePoint:function(e){var t=this,a={},r=t.getType(e);return"string"===r||"array"===r?a={coordinates:e}:"object"===r&&(a=e),"function"===t.getType(t.params.processPoint)&&(a=t.call(t.params.processPoint,a)),a},getFeatureCollection:function(e){var n=this,s=[];return o.each(e,function(e,t){var a=n.normalizePoint(t),r=n.toCoordinates(a.coordinates),t="function"==typeof n.params.placeMark?n.call(n.params.placeMark,window.ymaps):n.params.placeMark;s.push({type:"Feature",properties:a,geometry:{type:"Point",coordinates:r},options:t})}),window.ymaps.geoQuery({type:"FeatureCollection",features:s})},setPoints:function(t,e){var a=this;return void 0!==e&&(a.state.setPointsSilent=e),(a.cache.pointsArray=t)&&t.length?a.wait("setPoints",function(){var e="ready"===a.state.api,t="ready"===a.state.map;return e&&t},function(){var e=a.call(a.params.getFeatureCollection,a.cache.pointsArray)||a.getFeatureCollection(a.cache.pointsArray);a.cache.points&&a.cache.points.removeFromMap(a.cache.map),a.cache.points=e,a.state.setPointsSilent||(a.cache.points.addToMap(a.cache.map),a.centerMap()),a.cache.points.addEvents("click",function(e){a.call(a.params.onPointClick,e)}),a.cache.visiblePoints=a.cache.points,a.state.points="ready",a.pubPoints(t)},!0):(a.clearMap(),a.params.empty||a.warn("setPoints: Нет данных для отображения")),a},addPoints:function(t,e){var a=this,r={silent:!1,add:!0};return void 0!==e&&("object"==typeof e?(r.silent=(void 0!==e.silent?e:r).silent,r.add=(void 0!==e.add?e:r).add):r.silent=e),a.state.setPointsSilent=r.silent,r.add&&(a.cache.pointsArray=a.cache.pointsArray.concat(t)),t&&t.length?a.wait("addPoints",function(){var e="ready"===a.state.api,t="ready"===a.state.map;return e&&t},function(){var e=(e=a.call(a.params.getFeatureCollection,t))||a.getFeatureCollection(t);a.cache.points=a.cache.points.add(e),a.state.setPointsSilent||(a.cache.visiblePoints=a.cache.visiblePoints.add(e),e.addToMap(a.cache.map),a.centerMap()),e.addEvents("click",function(e){a.call(a.params.onPointClick,e)}),a.state.points="ready",a.pubPoints(t)}):(a.clearMap(),a.params.empty||a.warn("addPoints: Нет данных для отображения")),a},clearMap:function(){var e=this;return"ready"===e.state.points&&e.cache.points&&(e.cache.points.removeFromMap(e.cache.map),e.cache.map.setCenter(e.state.center,{useMapMargin:!0}),e.cache.map.setZoom(e.params.mapOptions.zoom,{useMapMargin:!0}),e.state.points="empty"),e.params.empty&&e.$container.trigger("map:empty"),e},drawMap:function(){var a=this;return a.wait("drawMap",function(e){return"ready"===a.state.api},function(){a.cache.map=new window.ymaps.Map(a.$canvas.get(0),o.extend(!0,{zoom:a.params.mapOptions.zoom,center:a.state.center,behaviors:["drag","dblClickZoom","multiTouch"],controls:[]},a.params.mapOptions)),a.params.marginAreas&&a.params.marginAreas.length&&o.each(a.params.marginAreas,function(e,t){a.cache.map.margin.addArea(t)}),a.state.map="ready",a.$container.trigger("map:ready"),a.loadEnd(),a.call(a.params.onReady)}),a},centerMap:function(t){var n=this;return n.wait("centerMap",function(e){var t="ready"===n.state.api,a="ready"===n.state.points,r="ready"===n.state.map;return"empty"===n.state.points&&e(),t&&r&&a},function(){var e=n.cache.visiblePoints;t&&(e=t),e&&void 0!==e.getLength?e.applyBoundsToMap(n.cache.map,{checkZoomRange:!0,flying:!1,useMapMargin:!0}).then(function(){n.cache.map.getZoom()>n.params.mapOptions.zoom&&n.cache.map.setZoom(n.params.mapOptions.zoom,{checkZoomRange:!0,flying:!1,useMapMargin:!0})}):n.warn("centerMap: Нет данных для отображения")}),n},pubPoints:function(e){return this.$container.trigger("map:points:ready",{points:e}),this},bindEvents:function(){var r=this;return r.bind("scroll resize",r.$WINDOW,function(){r.throttle("scroll",function(){"ready"===r.state.map&&r.call(r.params.onResize)})}),r.params.lazy&&(r.bind("scroll resize hashchange","viewport",r.$WINDOW,function(e){r.throttle("viewport-scroll",function(){r.delay(r.checkViewportLoadAPI,500)})}),r.bind("click visibilitychange","viewport",r.$DOCUMENT,function(e){r.throttle("visibilitychange",r.checkViewportLoadAPI)})),r.$container.on("map:reload",function(e,a){r.throttle("map:reload",function(){var e,t;a&&(void 0!==a.silent&&(r.state.setPointsSilent=a.silent),void 0!==a.externalParams&&"object"==typeof a.externalParams&&(e=a.externalParams,t=a.extend)),e&&(r.state.externalParams=t?o.extend(!0,{},r.state.externalParams,e):e),r.getPoints()})}),r.$container.on("map:clear",function(e){r.throttle("map:clear",function(){r.clearMap()})}),r.$container.on("map:zoomIn",function(){"ready"===r.state.map&&r.cache.map.setZoom(r.cache.map.getZoom()+1)}),r.$container.on("map:zoomOut",function(){"ready"===r.state.map&&r.cache.map.setZoom(r.cache.map.getZoom()-1)}),r.$container.on("map:zoomTo",function(e,t){t=e.zoom||t.zoom,"ready"===r.state.map&&void 0!==t&&r.cache.map.setZoom(t)}),r},init:function(){var e=this;return e.params.lazy?e.delay(e.checkViewportLoadAPI):(e.loadAPI(),e.params.empty||e.getPoints()),e.call(e.params.onInit),e}}),o.fn.mapWrapper=function(a){return this.each(function(e,t){o.data(t,"mapWrapper",new r(t,a))})}}(jQuery),function(l){"use strict";var e={popupVariants:{variantsSelector:".js-popup-variant",variantToggleSelector:".js-popup-variant-toggle",dataParam:"variant",defaultVariant:!1,redirects:{},beforeShowPopupVariant:null,onShowPopupVariant:null,onHidePopupVariant:null,onInit:null,getInitialState:null}};l.popupVariantsMixin={updatePopupVariant:function(){var e,t,a=this;return a.params.useHash&&(t=new RegExp("^"+a.params.popupVariants.dataParam+"=(.*)$","i"),(t=l.depotParse(l.depotHash.getMatched(t)))&&void 0!==(e=t[a.params.popupVariants.dataParam])?a.state.popupVariants.currentVariantId!==e&&a.showPopupVariant(e):a.hide()),a},showPopupVariant:function(s){var i,o=this;return!o.call(o.params.popupVariants.beforeShowPopupVariant,s)&&l.depotHash.has(o.state.hash)&&(i=0,o.$variants.each(function(e,t){var a=l(t),r=a.data(o.params.popupVariants.dataParam),n=void 0!==r&&void 0!==s&&r.toString()===s.toString();n?(i+=1,o.state.popupVariants.currentVariantId=s,o.call(o.params.popupVariants.onShowPopupVariant,t,r)):n||a.attr("hidden")||(o.state.popupVariants.currentVariantId===r&&(o.state.popupVariants.currentVariantId=void 0),a.find("form").trigger("reset"),o.call(o.params.popupVariants.onHidePopupVariant,t,r)),a.attr("hidden",!n)}),i||(o.params.popupVariants.redirects[s]?(o.info("--debug","Вариант %s не найден, но есть редирект, переадресация на %s",s,o.params.popupVariants.redirects[s]),o.showPopupVariant(o.params.popupVariants.redirects[s])):o.params.popupVariants.defaultVariant&&s!==o.params.popupVariants.defaultVariant?(o.info("--debug","Вариант %s не найден, переадресация на дефолтный",s),o.showPopupVariant(o.params.popupVariants.defaultVariant)):(o.info("--debug","Вариант %s не найден",s),o.hide()))),o},initPopupVariants:function(){var n=this;n.getInitialState=n.proxyCallback(n.getInitialState,function(){return l.extend(!0,{},this,{popupVariants:{}})}),n.params=l.extend(!0,{},n.translate(e),n.params),n.getElements(n.params.popupVariants),n.state=n.getInitialState(),n.show=n.proxyCallback(n.show,function(){n.debounce("update",n.updatePopupVariant)}),n.params.beforeHide=n.proxyCallback(n.params.beforeHide,function(){n.$variants.each(function(e,t){var a=l(t),r=a.data(n.params.popupVariants.dataParam);n.state.popupVariants.currentVariantId===r&&(a.attr("hidden",!0),a.find("form").trigger("reset"),a=new RegExp(n.format("^${paramName}=${value}$",{paramName:n.params.popupVariants.dataParam,value:n.state.popupVariants.currentVariantId}),"i"),l.depotHash.removeMatched(a),n.call(n.params.popupVariants.onHidePopupVariant,t,r))})}),n.params.onHashChange=n.proxyCallback(n.params.onHashChange,function(){n.debounce("update",n.updatePopupVariant)}),n.on("click",n.params.popupVariants.variantToggleSelector,function(e){e.preventDefault();var t=l(this);n.debounce("variant",function(){var e=t.data("id");n.showPopupVariant(e)})}),n.on("variant:show",function(t,a){n.debounce("variant",function(){var e;t&&a&&a[n.params.popupVariants.dataParam]&&(e=a[n.params.popupVariants.dataParam],n.showPopupVariant(e))})}),n.call(n.params.popupVariants.onInit)}}}(jQuery),function(l){"use strict";l(function(){l.depotProto.$WINDOW.on("load resize init:vars",function(e){document.documentElement.style.setProperty("--vh",.01*document.documentElement.clientHeight+"px"),document.documentElement.style.setProperty("--vw",.01*document.documentElement.clientWidth+"px")}).trigger("init:vars"),l.depotProto.delay(function(){l.depotProto.$WINDOW.on("online",function(){document.visibilityState&&"visible"===document.visibilityState&&(l.depotNotifications.info({ru:"Подключение к сети восстановлено.",en:"Network connection has been restored."}),l(".js-offline").length&&!location.pathname.match(/\/offline\//)&&window.location.reload())}),l.depotProto.$WINDOW.on("offline",function(){document.visibilityState&&"visible"===document.visibilityState&&l.depotNotifications.warn({ru:"Проверьте подключение к сети.",en:"Check your network connection."})})}),window.Modernizr&&!Modernizr.objectfit&&l.depotProto.addScripts({src:"local/templates/grunwald/vendor/objectFitImages.min.js",exports:"objectFitImages"},function(e){e||window.objectFitImages(null,{watchMQ:!0})}),l('[loading="lazy"]').depotLazy(),l.depotProto.$DOCUMENT.on("lazy:added",function(e,t){(e=(e=l(e.target)).is('[loading="lazy"]')?e:e.find('[loading="lazy"]'))&&e.length&&e.depotLazy(t)}),l.depotProto.$BODY.on("click","[data-clickable]",function(e){var t,a,r,n,s=l(e.target),i=l(this).find("a").get(0);s.closest("a, button").length&&!s.is(i)||i&&(t=location.href.replace(location.hash,""),a=i.href.replace(i.hash,""),r=l.depotHash.get(i),n=e.ctrlKey||e.metaKey,void 0===r||a!==t||n?s.is(i)||(s=i.target,n&&(i.target="_blank"),i.click(),i.target=s):(e.preventDefault(),l.depotHash.add(r)))}),l(".js-header").fixHeader({mediaQuery:"screen and (min-width: 1000px)"}),l(".js-level").depotLevel(),l(".js-dropdown-popup").depotDropdown({kickOff:!0}),l(".js-carousel-banner").depotGallery({viewportSelector:".js-carousel-viewport",listSelector:".js-carousel-list",itemsSelector:".js-carousel-item",ratio:502/1440,mixins:[l.galleryNavigationMixin,l.galleryRotationMixin],galleryNavigation:{template:'<div class="carousel__navigation">${buttonBackwardsTemplate}${buttonForwardsTemplate}</div>${bulletsTemplate}',buttonBackwardsTemplate:'<button class="carousel__button carousel__button_backwards ${backwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"#{if backwardsDisabled} disabled#{endif}></button>',buttonForwardsTemplate:'<button class="carousel__button carousel__button_forwards ${forwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"#{if forwardsDisabled} disabled#{endif}></button>',bulletsTemplate:'#{if showNavigation}<div class="carousel__bullets">#{for bullet in 1..${bullets}}${bulletTemplate}#{endfor}</div>#{endif}',bulletTemplate:'<button class="carousel__bullet ${bulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',backwardsSelector:".js-carousel-backwards",forwardsSelector:".js-carousel-forwards",bulletsSelector:".js-carousel-bullet"},galleryRotation:{delay:12e3},beforeInit:function(){return this.initGalleryNavigation(),this.initGalleryRotation(),this}}),l(".js-map-default").mapWrapper({lazy:!0,placeMark:function(e){return{preset:"islands#greenIcon",iconLayout:e.templateLayoutFactory.createClass('<div class="map__marker"></div>'),iconShape:{type:"Polygon",coordinates:[[[0,0],[-15,-20],[-15,-40],[15,-40],[15,-20]]]}}}}),l(".js-map-production").mapWrapper({lazy:!0,cache:!1,mapOptions:{controls:["zoomControl"]},marginAreas:[{top:0,left:0,width:"100%",height:10},{bottom:0,left:0,width:"100%",height:10},{left:0,top:0,width:"25%",height:"100%"},{right:0,top:0,width:"25%",height:"100%"}],placeMark:function(e){return{preset:"islands#greenIcon",iconLayout:e.templateLayoutFactory.createClass('<div class="map__marker{% if properties.isActive %} is-active{% endif %}"></div>'),iconShape:{type:"Polygon",coordinates:[[[0,0],[-9,-12],[-9,-24],[9,-24],[9,-12]]]}}},mixins:[l.mapFeaturesMixin],mapFeatures:{},beforeInit:function(){this.initMapFeatures()},processPoint:function(e){return e.id=e.coordinates.replace(/[^0-9]/g,""),e},onPointClick:function(e){e=e.get("target").properties.get("id"),this.toggleMapFeature(e)}}),l(".js-map-customer-service").mapWrapper({lazy:!0,empty:!0,cache:!1,marginAreas:[{top:0,left:0,width:"100%",height:10},{bottom:0,left:0,width:"100%",height:10},{left:0,top:0,width:"25%",height:"100%"},{right:0,top:0,width:"25%",height:"100%"}],placeMark:function(e){return{preset:"islands#greenIcon",iconLayout:e.templateLayoutFactory.createClass('<div class="map__marker{% if properties.isActive %} is-active{% endif %}"></div>'),iconShape:{type:"Polygon",coordinates:[[[0,0],[-9,-12],[-9,-24],[9,-24],[9,-12]]]}}},mixins:[l.mapFeaturesMixin],mapFeatures:{searchParam:"city",externalParams:["source"]},dictionary:{features:{search:{ru:"Город",en:"City"}}},beforeInit:function(){this.initMapFeatures()},processPoint:function(e){return e.id=e.coordinates.replace(/[^0-9]/g,""),e},onPointClick:function(e){e=e.get("target").properties.get("id"),this.toggleMapFeature(e)}}),l(".js-title-calendar").depotCalendar({template:'${beforeTemplate}<div class="calendar__viewport js-calendar-viewport">${monthPickerGridTemplate}</div>${afterTemplate}',beforeTemplate:'<div class="calendar__before">${buttonBackwardsTemplate}${buttonForwardsTemplate}${yearTemplate}</div>',afterTemplate:'<div class="calendar__after">${monthPickerApplyTemplate}</div>',mixins:[l.calendarNavigationMixin,l.calendarMonthPickerMixin],calendarNavigation:{step:"year"},calendarMonthPicker:{onApply:function(){var e=l.depotParse(window.location.search),e=l.extend(e,{year:this.state.calendarMonthPicker.year,month:this.state.calendarMonthPicker.month});window.location.search=l.depotParse(e,{reverse:!0})}},beforeInit:function(){return this.initCalendarNavigation(),this.initCalendarMonthPicker(),this}}),l(".js-feed-news").depotLoaderMore({targetSelector:".js-feed-list",itemsSelector:".js-feed-item",buttonSelector:".js-feed-button",pageParam:"PAGEN_1",onSuccess:function(e){return e&&(e=l(e).find(this.params.itemsSelector),this.$target.append(e),l('[loading="lazy"]',this.$target).trigger("lazy:added")),this}}),l(".js-feed-search").depotLoaderMore({targetSelector:".js-feed-list",itemsSelector:".js-feed-item",buttonSelector:".js-feed-button",pageParam:"PAGEN_1",onSuccess:function(e){return e&&(this.$target.append(e),l('[loading="lazy"]',this.$target).trigger("lazy:added")),this}}),l.depotSandbox(".js-title-news",{filterSelector:".js-title-filter",filterToggleSelector:".js-title-filter-toggle",filterButtonsSelector:".js-title-filter-button",extend:{getInitialState:function(){return{filterHidden:!0}},filterApply:function(e){var t=l.depotParse(window.location.search),e=l.extend(t,e.data());return window.location.search=l.depotParse(e,{reverse:!0,empty:!1}),this},filterToggle:function(){var e=this;return e.state.filterHidden=!e.state.filterHidden,e.$filterToggle.aria("expanded",!e.state.filterHidden),e.$filter.attr("hidden",e.state.filterHidden),e},bindEvents:function(){var t=this;return t.on("click",t.params.filterToggleSelector,function(e){e.preventDefault(),t.throttle("filterToggle",t.filterToggle)}),t.on("click",t.params.filterButtonsSelector,function(e){e.preventDefault(),t.filterApply(l(this))}),t}}},"feed"),l(".js-figure").depotFigure(),l(".js-dropdown-tabs").depotDropdown({itemsSelector:".js-dropdown-item",kickOff:!0,onClick:function(e){var t=this;(e=l(e.target).closest(t.params.itemsSelector)).length&&(t.$items.removeClass(t.params.activeClassName),e.addClass(t.params.activeClassName)),t.collapse()},onInit:function(){var e,t=this,a=l.depotHash.toObject();return a&&a.source&&(e=t.$items.filter(function(e,t){return(t=l.depotHash.toObject(l.depotHash.get(t)))&&t.source===a.source})).length&&e.addClass(t.params.activeClassName),t.bind("dropdown:reset",t.$container.parent(),function(){t.$items.removeClass(t.params.activeClassName),l.depotHash.removeMatched(/source=(.*)/)}),t}}),l(".js-tabs-contacts").depotTabs({useHash:!0,beforeChange:function(){this.state.$activeTab.trigger("dropdown:reset")}}),l(".js-tabs-default").depotTabs({useHash:!0}),l(".js-tabs-production").depotTabs(),l(".js-popup-variants").depotPopup({useHash:!0,kickOff:!1,mixins:[l.popupVariantsMixin],popupVariants:{dataParam:"view",onHidePopupVariant:function(e,t){(e=l(e).find(".js-history-slideshow")).length&&e.trigger("slideshow:reset")}},beforeInit:function(){this.initPopupVariants()}}),l(".js-popup-search").depotPopup({useHash:!0,kickOff:!1}),l(".js-popup-menu").depotPopup({useHash:!0,kickOff:!1}),l.depotSandbox(".js-persons",{personsSelector:".js-persons-person",highlightClassName:"is-highlight",extend:{getInitialState:function(){return{animationDelayID:null}},onAnimationEnd:function(){var e=this;return e.cancelDelay(e.state.animationDelayID),e.$persons.removeClass(e.params.highlightClassName),e},bindEvents:function(){var r=this;return r.on("animationend",r.params.personsSelector,function(e){l(e.target).is(r.params.personsSelector)&&r.onAnimationEnd()}),r.$WINDOW.on("highlight",function(e,t){var a=r.$persons.filter('[data-id*="'+t.anchor+'"]');a.length&&(r.bind("wheel mousewheel DOMMouseScroll pointermove MSPointerMove touchmove",r.$DOCUMENT,function(e){("pointermove"!==e.type||"pointermove"===e.type&&"mouse"!==e.pointerType)&&(r.unbind(r.$DOCUMENT,"wheel mousewheel DOMMouseScroll pointermove MSPointerMove touchmove"),r.$HTMLBODY.stop())}),r.$HTMLBODY.animate({scrollTop:a.first().offset().top},{always:function(){r.unbind("wheel mousewheel DOMMouseScroll pointermove MSPointerMove touchmove",r.$DOCUMENT),a.addClass(r.params.highlightClassName),r.state.animationDelayID=r.delay(r.onAnimationEnd,2e3)}}))}),r}}},"persons"),l.depotSandbox(".js-map-svg",{canvasSelector:".js-map-canvas",layerSelector:".js-map-layer",listSelector:".js-map-list",pointsSelector:".js-map-point",groupsSelector:'g[id^="fo-"]',extend:{getInitialState:function(){return{hoverDelayID:null}},getSVGRoot:function(){return l(this.$layer.get(0).contentDocument.getElementsByTagName("svg")[0])},insertFilter:function(e,t){var a,r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"filter"),s=document.createElementNS(r,"feDropShadow");return n.setAttribute("id",t.id),s.setAttribute("dx",t.dx),s.setAttribute("dy",t.dy),s.setAttribute("stdDeviation",t.blur),s.setAttribute("flood-color",t.color),e.getElementsByTagName("defs").length?a=e.getElementsByTagName("defs")[0]:(a=document.createElementNS(r,"defs"),e.appendChild(a)),n.appendChild(s),a.appendChild(n),this},clickGroup:function(e){return this.$WINDOW.trigger("highlight",{anchor:e.id}),this},hoverGroup:function(e){var t=this;return t.cancelDelay(t.state.hoverDelayID),t.state.hoverDelayID=t.delay(function(){t.$groups.removeAttr("style"),e.hasAttribute("style")||e.id&&(t.$groups.parent().append(e),t.$points.removeClass(t.params.activeClassName),e.setAttribute("style","filter:url(#dropshadow)"),t.$points.filter('[data-id="'+e.id+'"]').addClass(t.params.activeClassName))},50),t},initSVG:function(){var t=this;return t.$svg=t.getSVGRoot(),t.$groups=t.$svg.find(t.params.groupsSelector),t.insertFilter(t.$svg.get(0),{id:"dropshadow",dx:"0",dy:"3",blur:"10",color:"rgba(0, 121, 52, .5)"}),t.$groups.on("mouseenter",function(e){t.hoverGroup(this)}),t.$groups.on("click",function(e){e.preventDefault(),t.clickGroup(this)}),t},bindEvents:function(){var s=this;s.$layer.get(0).onload=s.initSVG.bind(s),s.on("click",s.params.listSelector,function(e){var t=s.$layer.width(),a=s.$layer.height(),r=s.$layer.offset().top,n=s.$layer.offset().left;s.format("top: ${top|fixed(6)}%;left: ${left|fixed(6)}%;",{top:(e.originalEvent.pageY-r)/a*100,left:(e.originalEvent.pageX-n)/t*100})})}}},"svgMap");var o={};function e(){l.depotSandbox(".js-switcher-default",{buttonsSelector:".js-switcher-button",targetElements:["~ *"],headElements:["title",'meta[name="description"]','meta[name="keywords"]'],onInsert:function(){e(this.$container.parent())},extend:{getInitialState:function(){return{buttonIndex:0,pushStateEnabled:!0,request:null}},createHistoryState:function(e){var t=window.history&&window.history.state||{};return l.extend(!0,{},t,{switcher:e})},switchTo:function(e){var t=this,a=t.$buttons.eq(e);return a.length&&!a.hasClass(t.params.activeClassName)?(t.state.buttonIndex=e,t.$buttons.removeClass(t.params.activeClassName),a.addClass(t.params.activeClassName),t.contentRequest(a.attr("href"))):t.state.pushStateEnabled||(t.state.pushStateEnabled=!0),t},contentRequest:function(a){var r=this;r.state.request&&r.state.request.abort();var e=r.cache.documents[a];return e?r.contentInsert(a,e):r.state.request=l.ajax({url:a,type:"GET",dataType:"html",complete:function(e,t){200===e.status&&"success"===t&&(t=new DOMParser,e=l(t.parseFromString(e.responseText,"text/html")),r.cache.documents[a]=e,r.contentInsert(a,e))}}),r},contentInsert:function(e,n){var s=this;s.params.headElements&&s.params.headElements.length&&s.params.headElements.forEach(function(e){var t=s.$DOCUMENT.find("head"),a=n.find("head"),r=t.find(e),e=a.find(e);r&&r.length?r.replaceWith(e.clone()):t.append(e.clone())});var t,a=n.find(s.getSelector()+s.params.targetElements).clone();return s.$container.nextAll().trigger("destroy").remove(),s.$container.after(a),a.trigger("lazy:added").trigger("figure:added"),s.state.pushStateEnabled?window.history&&"function"==typeof window.history.pushState&&(t=n.get(0).title||"",a=s.createHistoryState({buttonIndex:s.state.buttonIndex}),window.history.pushState(a,t,e)):s.state.pushStateEnabled=!0,s.call(s.params.onInsert),s},bindEvents:function(){var a=this;a.on("click",a.params.buttonsSelector,function(e){e.preventDefault();var t=l(this).parent().index();a.throttle("switch",function(){a.switchTo(t);var e=a.$container.prev();a.$HTMLBODY.animate({scrollTop:e.offset().top+e.outerHeight(!0)},450)})}),a.bind("popstate",a.$WINDOW,function(e){var t=e.originalEvent.state;t&&t.switcher&&(a.state.pushStateEnabled=!1,a.throttle("switch",function(){a.switchTo(t.switcher.buttonIndex)}))})},init:function(){var e,t,a=this;a.cache={documents:{}},window.history&&window.history.state&&((t=window.history.state)&&t.switcher?(a.state.pushStateEnabled=!1,a.throttle("switch",function(){a.switchTo(t.switcher.buttonIndex)})):"function"==typeof window.history.replaceState&&(e=a.$DOCUMENT.get(0).title||"",t=a.createHistoryState({buttonIndex:a.state.buttonIndex}),window.history.replaceState(t,e)))}}},"switcher"),l.depotSandbox(".js-promo-youtube",{sourceSelector:".js-promo-background",playSelector:".js-promo-play",bodyCroppedClassName:"is-cropped",extend:{getInitialState:function(){return{isActive:!1,playerReady:!1,playerId:"youtube_"+this.hash,videoId:this.$container.data("youtube")}},inViewport:function(){if("hidden"===document.visibilityState)return!1;if(this.$BODY.hasClass(this.params.bodyCroppedClassName))return!1;var e=l("js-sticky"),a=0;e.each(function(e,t){a+=l(t).outerHeight()});var t=this.$container.offset().top,r=t+this.$container.outerHeight(!0),n=(e=this.$WINDOW.scrollTop()+a)+this.$WINDOW.innerHeight();return!(r<e||n<t)},onReady:function(e){var t=this;return t.player=e.target,t.state.isActive||t.player.mute(),t.player.playVideo(),t},onStateChange:function(e){return(e=e&&e.data)===YT.PlayerState.BUFFERING||e===YT.PlayerState.PLAYING?this.$container.removeClass(this.params.processingClassName):e===YT.PlayerState.ENDED&&this.player.playVideo(),this},addPlayer:function(){var t=this;if(!t.inViewport())return t;t.state.playerReady=!0,t.unbind("scroll resize",t.$WINDOW),t.unbind("visibilitychange",t.$DOCUMENT);var e=t.format('<div class="promo__player" id="${playerId}"></div>',t.state);return t.$source.append(e),window.onYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady||function(){window.youTubeIframeAPIReady=!0},t.$container.addClass(t.params.processingClassName),t.addScripts({src:"https://www.youtube.com/iframe_api",exports:["YT","youTubeIframeAPIReady"]},function(e){e||(t.player=new YT.Player(t.state.playerId,{videoId:t.state.videoId,width:t.$container.width(),height:t.$container.height(),playerVars:{hl:t.LANGUAGE,origin:window.location.origin,autoplay:1,autohide:1,disablekb:1,playsinline:1,controls:0,enablejsapi:1,showinfo:0,loop:1,rel:0,fs:0,start:0,end:20},events:{onReady:function(e){t.onReady(e)},onStateChange:function(e){t.onStateChange(e)}}}))}),t},play:function(){var e,t=this;return window.youTubeIframeAPIReady&&(t.$container.addClass(t.params.processingClassName),t.$container.addClass(t.params.activeClassName),t.state.isActive=!0,l(t.player.h).remove(),e=t.format('<div class="promo__player" id="${playerId}"></div>',t.state),t.$source.append(e),t.player=new YT.Player(t.state.playerId,{videoId:t.state.videoId,width:t.$container.width(),height:t.$container.height(),playerVars:{hl:t.LANGUAGE,origin:window.location.origin,autoplay:1,enablejsapi:1},events:{onReady:function(e){t.onReady(e)},onStateChange:function(e){t.onStateChange(e)}}})),t},bindEvents:function(){var t=this;return t.bind("scroll resize",t.$WINDOW,function(){t.throttle("scroll",t.addPlayer)}),t.bind("visibilitychange",t.$DOCUMENT,function(){t.throttle("visibilitychange",t.addPlayer)}),t.on("click",t.params.playSelector,function(e){e.preventDefault(),t.play()}),t},init:function(){this.addPlayer()}}},"promoYouTube"),l(".js-anchors-default").depotAnchors({stickySelector:".js-sticky",sectionsSelector:"[data-anchors]"}),l(".js-tabs-silent").depotTabs(),l(".js-gallery-default").depotGallery({ratio:680/1214,mixins:[l.galleryThumbsMixin],galleryThumbs:{},beforeInit:function(){this.initGalleryThumbs()}}),l(".js-dropdown-details").depotDropdown()}l.depotSandbox(".js-carousel-product",{listSelector:".js-carousel-list",itemsSelector:".js-carousel-item",variable:"carouselItems",extend:{fetchItems:function(r){var e,n,s,i=this,t=window[i.params.variable];return Array.isArray(t)&&t.length?(e=i.$items.first().data("url"),e=t.indexOf(e),t.splice(e,1),n=t.length,s=0,n?l.each(t,function(e,a){l.ajax({url:a,type:"GET",dataType:"html",complete:function(e,t){s+=1,200===e.status&&"success"===t&&(t=new DOMParser,e=l(t.parseFromString(e.responseText,"text/html")),e=(o[a]=e).find(i.params.itemsSelector),i.$list.append(e),e.trigger("lazy:added").trigger("figure:added")),n===s&&i.call(r)}})}):i.call(r)):i.call(r),i},init:function(){return this.fetchItems(function(){l(".js-carousel-product").depotGallery({viewportSelector:".js-carousel-viewport",listSelector:".js-carousel-list",itemsSelector:".js-carousel-item",tooltipPointsSelector:".js-carousel-point",tooltipsSelector:".js-carousel-tooltip",tooltipCloseSelector:".js-carousel-tooltip-close",ratio:566/1006,mixins:[l.galleryNavigationMixin,l.galleryFavoritesMixin,l.galleryContentMixin],galleryNavigation:{template:'<div class="carousel__navigation">${buttonBackwardsTemplate}${buttonForwardsTemplate}</div>${bulletsTemplate}',buttonBackwardsTemplate:'<button class="carousel__button carousel__button_backwards ${backwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"#{if backwardsDisabled} disabled#{endif}></button>',buttonForwardsTemplate:'<button class="carousel__button carousel__button_forwards ${forwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"#{if forwardsDisabled} disabled#{endif}></button>',bulletsTemplate:'#{if showNavigation}<div class="carousel__bullets">#{for bullet in 1..${bullets}}${bulletTemplate}#{endfor}</div>#{endif}',bulletTemplate:'<button class="carousel__bullet ${bulletsSelector|substr(1)}" type="button" data-index="${bullet}"></button>',backwardsSelector:".js-carousel-backwards",forwardsSelector:".js-carousel-forwards",bulletsSelector:".js-carousel-bullet"},galleryContent:{cachedDocuments:o,onInsert:function(){return this.delay(function(){e(l.depotProto.$BODY)},300),this}},beforeInit:function(){return this.initGalleryNavigation(),this.initGalleryFavorites(),this.initGalleryContent(),this},onInit:function(){var t=this;return t.on("click",t.params.tooltipPointsSelector,function(e){e.preventDefault(),e=l(this),(e=t.$tooltips.filter('[data-id="'+e.data("id")+'"]')).hasClass(t.params.activeClassName)?(e.removeClass(t.params.activeClassName),t.off(["click","tooltip"])):(t.$tooltips.removeClass(t.params.activeClassName),e.addClass(t.params.activeClassName),t.on(["click","tooltip"],function(e){l(e.target).closest(t.params.tooltipsSelector).length||(t.$tooltips.removeClass(t.params.activeClassName),t.off(["click","tooltip"]))}))}),t.on("click",t.params.tooltipCloseSelector,function(e){e.preventDefault(),l(this).closest(t.params.tooltipsSelector).removeClass(t.params.activeClassName),t.off(["click","tooltip"])}),t},onChange:function(e,t){return this.$tooltips.removeClass(this.params.activeClassName),this}})}),this.call(this.params.onInit),this}}},"carouselProduct"),e(),l(".js-form-field-select").formFieldSelect(),l(".js-form-field-file").formFieldFile(),l(".js-form-field-range").formFieldRange({getInitialValue:function(e,t,a){var r=(new Date).getHours();return(r<e||t<=r)&&(r=e),{min:r,minLeft:(r-e)/(t=(t-e)/a)*100,max:a=r+a,maxLeft:(a-e)/t*100}}}),l.depotSandbox(".js-feed-production",{toggleSelector:".js-feed-toggle",filterSelector:".js-feed-filter",listSelector:".js-feed-list",itemsSelector:".js-feed-item",emptySelector:".js-feed-empty",favoriteSelector:".js-feed-toggle-item",favoriteTemplate:'<button class="feed__favorite-item ${favoriteSelector|substr(1)}#{if isFavorite} is-active#{endif}" type="button" title="#{if isFavorite}_{buttons.remove}#{else}_{buttons.add}#{endif}" aria-label="#{if isFavorite}_{buttons.remove}#{else}_{buttons.add}#{endif}"></button>',dictionary:{buttons:{add:{ru:"Добавить в избранное",en:"Add to favourites"},remove:{ru:"Удалить из избранного",en:"Remove from favorites"}}},extend:{getInitialState:function(){return{expanded:!0,favorites:l.favorites.getAll()}},updateFavorites:function(){var s=this;return s.$items.each(function(e,t){var a=l(this),r=a.find("a"),n=a.find(s.params.favoriteSelector),r=r.get(0).href,r=l.favorites.generateKey(r),r=!!s.state.favorites[r],r=l.extend(!0,s.cleanObject(s.params),{isFavorite:r}),r=s.format(s.params.favoriteTemplate,r);n&&n.length?n.replaceWith(r):a.prepend(r)}),s},toggleFilter:function(){var e=this;return e.state.expanded=!e.state.expanded,e.$toggle.aria("expanded",e.state.expanded),e.$filter.toggleClass("is-expanded",e.state.expanded),e},filterAny:function(s){var i=s?Object.keys(s).length:0,o=0;return this.$items.each(function(e,t){var a=l(t),r=a.data(),n=0;r&&l.each(s,function(e,t){r[e]&&-1!==r[e].toString().split(/[, ]+/).indexOf(t.toString())&&(n+=1)}),(t=i!==n)&&(o+=1),a.toggleClass("is-hidden",t)}),this.$empty.prop("hidden",this.$items.length!==o),this},bindEvents:function(){var r=this;return l.favorites.onChange(function(e){r.state.favorites=e,r.updateFavorites()}),r.on("click",r.params.favoriteSelector,function(e){e.preventDefault();var t=l(this).closest(r.params.itemsSelector),a=t.find("a").get(0).href,e=l.favorites.generateKey(a);l.favorites.toggleItem(e,{image:t.find(".card__image").attr("src"),label:t.find(".card__label").text(),text:t.find(".card__text").text(),url:a})}),r.on("click",r.params.toggleSelector,function(e){e.preventDefault(),r.throttle("toggle",r.toggleFilter)}),r},init:function(){var t=this;t.updateFavorites(),t.toggleFilter(),t.$filter.depotForm({validation:!1,onChangeSubmit:!0,onSubmit:function(){var e=l.depotParse(this.state.formData,{empty:!1});t.filterAny(e)}})}}}),l.depotSandbox(".js-feed-favorite",{listSelector:".js-feed-list",itemsSelector:".js-feed-item",removeItemSelector:".js-feed-remove-item",itemTemplate:'#{for item in items}<div class="feed__item feed__item_third js-feed-item"><button class="feed__remove-item js-feed-remove-item" type="button" title="_{buttons.remove}" aria-label="_{buttons.remove}"></button><article class="card card_production card_favorite" data-clickable><div class="card__picture"><img class="card__image" loading="lazy" src="${item.image}" width="391" height="220" intrinsicsize="391x220" alt=""></div><div class="card__body"><div class="card__label" role="heading" aria-level="4"><a class="card__link" href="${item.url}">${item.label|ft}</a></div><div class="card__text">${item.text|ft}</div></div></article></div>#{empty}<div class="feed__empty">_{empty}</div>#{endfor}',dictionary:{empty:{ru:"Вы ещё не добавляли избранные.",en:"You have not added any favorites yet."},buttons:{remove:{ru:"Удалить из избранного",en:"Remove from favorites"}}},extend:{getInitialState:function(){return{items:l.favorites.getAll()}},render:function(e){return e=this.format(this.params.itemTemplate,{items:e}),this.$list.html(e),this},bindEvents:function(){var t=this;return l.favorites.onChange(function(e){t.render(e)}),t.on("click",t.params.removeItemSelector,function(e){e.preventDefault(),e=l(this).closest(t.params.itemsSelector).find("a").get(0).href,e=l.favorites.generateKey(e),l.favorites.removeItem(e)}),t},init:function(){this.render(this.state.items)}}}),l.depotSandbox(".js-favorites",{extend:{update:function(e){this.$container.attr("data-quantity",Object.keys(e).length)},bindEvents:function(){var t=this;return l.favorites.onChange(function(e){t.update(e)}),t},init:function(){this.update(l.favorites.getAll())}}},"favorites"),l(".js-form-multipart").depotForm({ajax:!0,dataType:"html",validators:{"is-file-quantity":{test:function(e,t,a){var r=(r=e.getAttribute("class").match(/is-file-quantity:([^ ]+)/))&&parseFloat(r[1])||0;return e.files.length<=r},messagePath:"errors.file.quantity"},"is-file-size":{test:function(e,t,a){for(var r=e.getAttribute("class").match(/is-file-size:([^ ]+)/),n=r&&parseFloat(r[1])||0,s=e.files,i=s.length,o=0,l=!0;o<i;o+=1)s.item(o).size>n&&(l=!1);return l},messagePath:"errors.file.size"}},dictionary:{errors:{file:{size:{ru:"Проверьте размер ${files.length|plural(файла, файлов)}",en:"Check the size of ${files.length|plural(file, files)}"},quantity:{ru:"Проверьте количество файлов",en:"Check the count of files"}}}},mixins:[l.formGRecaptchaMixin,l.formResponseMixin,l.formMessageMixin],formGRecaptcha:{render:!0},beforeInit:function(){this.initFormGRecaptcha(),this.initFormResponse(),this.initFormMessage()}}),l(".js-form-search").depotForm({ajax:!1}),l(".js-dropdown-hidden").depotDropdown({beforeInit:function(){var e=this;return e.params.toggleSelector=e.format("#${toggleId}",{toggleId:e.$panel.attr("id").replace("panel","button")}),e.getElements(e.params,!0),e}}),l.depotSandbox(".js-history",{itemsSelector:".js-history-item",slideshowSelector:".js-history-slideshow",yearSelector:".js-history-year",closeSelector:".js-history-close",extend:{bindEvents:function(){var a=this;return a.on("click",a.params.itemsSelector,function(e){var t=l(this);l(e.target).closest(a.params.slideshowSelector).length||(e.preventDefault(),e=t.find(a.params.slideshowSelector),t.addClass(a.params.visibleClassName),e.slideDown())}),a.on("click",a.params.yearSelector,function(e){l(this).closest(a.params.itemsSelector).hasClass(a.params.visibleClassName)&&(e.preventDefault(),e.stopPropagation(),a.triggerTo(a.params.closeSelector,"click"))}),a.on("click",a.params.closeSelector,function(e){e.preventDefault();var t=(e=l(this).closest(a.params.itemsSelector)).find(a.params.slideshowSelector);e.removeClass(a.params.visibleClassName),t.delay(250).slideUp(function(){t.trigger("slideshow:reset")})}),a}}},"history"),l(".js-overflow-content").depotOverflow(),l.depotSandbox(".js-history-slideshow",{listSelector:".js-slideshow-list",itemsSelector:".js-slideshow-item",backwardsSelector:".js-slideshow-backwards",forwardsSelector:".js-slideshow-forwards",counterSelector:".js-slideshow-counter",navigationTemplate:'<div class="slideshow__navigation">${buttonBackwardsTemplate}${buttonForwardsTemplate}${counterTemplate}</div>',buttonBackwardsTemplate:'<button class="slideshow__button slideshow__button_backwards ${backwardsSelector|substr(1)}" type="button" aria-label="_{buttons.backwards}" title="_{buttons.backwards}"#{if backwardsDisabled} disabled#{endif}></button>',buttonForwardsTemplate:'<button class="slideshow__button slideshow__button_forwards ${forwardsSelector|substr(1)}" type="button" aria-label="_{buttons.forwards}" title="_{buttons.forwards}"#{if forwardsDisabled} disabled#{endif}></button>',counterTemplate:'<div class="slideshow__counter ${counterSelector|substr(1)}">${counterTextTemplate}</div>',counterTextTemplate:"${is}/${of}",dictionary:{buttons:{backwards:{ru:"Назад",en:"Backwards"},forwards:{ru:"Вперед",en:"Forwards"}}},extend:{getInitialState:function(){return{quantity:this.$items.length,currentIndex:0}},renderNavigation:function(){var e=this,t=l.extend(!0,e.cleanObject(e.params),{backwardsDisabled:0===e.state.currentIndex,forwardsDisabled:e.state.currentIndex+1===e.state.quantity,is:e.state.currentIndex+1,of:e.state.quantity}),t=e.format(e.params.navigationTemplate,t);return e.$container.append(t),e.getElements(),e},update:function(){var e=this;return e.$backwards.prop("disabled",0===e.state.currentIndex),e.$forwards.prop("disabled",e.state.currentIndex===e.state.quantity-1),e.$counter.html(e.format(e.params.counterTextTemplate,{is:e.state.currentIndex+1,of:e.state.quantity})),e},goTo:function(e){var t=this,e=t.clamp(0,e,t.state.quantity-1);return t.$items.removeClass(t.params.activeClassName),t.$items.eq(e).addClass(t.params.activeClassName).find('[loading="lazy"]').trigger("lazy:load"),t.state.currentIndex=e,t.update(),t},goForwards:function(){var e=this.state.currentIndex+=1;return this.goTo(e),this},goBackwards:function(){var e=--this.state.currentIndex;return this.goTo(e),this},bindEvents:function(){var t=this;return t.on("slideshow:reset",function(){t.goTo(0)}),t.on("click",t.params.forwardsSelector,function(e){e.preventDefault(),t.throttle("goForwards",t.goForwards)}),t.on("click",t.params.backwardsSelector,function(e){e.preventDefault(),t.throttle("goBackwards",t.goBackwards)}),t},init:function(){return this.renderNavigation(),this}}},"slideshow")})}(jQuery);