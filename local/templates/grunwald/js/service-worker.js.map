{"version":3,"sources":["../../../../markup/js/service-worker/service-worker.js"],"names":[],"mappings":"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","file":"service-worker.js","sourcesContent":["var STATIC_CACHE_NAME = 'grunwald-static:2021-10-15T10:08:06';\nvar DATA_CACHE_NAME = 'grunwald-data';\nvar ABS_PATH = 'local/templates/grunwald/';\n\nfunction selectImage(url, params) {\n    return url.replace(/(\\.[a-z]+)$/, function (ext) {\n        var prefix = '';\n        if (params) {\n            if (params.retina === 'true') {\n                prefix = '@2x';\n            }\n            if (params.webp === 'true') {\n                ext = '.webp';\n            }\n        }\n        return prefix + ext;\n    });\n}\n\nfunction precache(params) {\n    return Promise.all([\n        caches.open(STATIC_CACHE_NAME).then(function (cache) {\n            return cache.addAll([\n                ABS_PATH + 'vendor/normalize.min.css',\n                ABS_PATH + 'css/global.min.css',\n\n                ABS_PATH + 'vendor/jquery.min.js',\n                ABS_PATH + 'js/global.min.js',\n\n                ABS_PATH + 'img/sprite.svg',\n\n                // selectImage(ABS_PATH + 'img/tech.png', params)\n            ]);\n        }),\n        // caches.open(DATA_CACHE_NAME).then(function (cache) {\n        //     return cache.addAll([\n        //         '/offline/'\n        //     ]);\n        // })\n    ]).then(function () {\n        return self.skipWaiting();\n    });\n}\n\nfunction getCacheName(request) {\n    return request.url.match(new RegExp(ABS_PATH, 'i')) ? STATIC_CACHE_NAME : DATA_CACHE_NAME;\n}\n\nfunction get(request) {\n    return fetch(request).then(function (response) {\n        if (response.status < 400) {\n            var clonedResponse = response.clone();\n            var cacheName = getCacheName(request);\n            caches.open(cacheName).then(function (cache) {\n                cache.put(request, clonedResponse);\n            });\n        }\n\n        return response;\n    }).catch(function () {\n        return caches.open(getCacheName(request)).then(function (cache) {\n            return cache.match(request).then(function (cachedResponse) {\n                if (cachedResponse) {\n                    return cachedResponse;\n                    // } else if (request.mode === 'navigate') {\n                    //     return cache.match('/offline/');\n                } else if (request.destination === 'image') {\n                    return new Response('<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"120\" height=\"80\" viewBox=\"0 0 120 80\"><path fill=\"#F0F0F0\" fill-rule=\"nonzero\" d=\"M68.929 27.6L58.313 44.8l-10.456-8.428L31 62h59L68.929 27.6zM37.32 31.9c3.49 0 6.3220003-2.885 6.3220003-6.45C43.643 21.89 40.81 19 37.32 19 33.832 19 31 21.89 31 25.45c0 3.565 2.832 6.45 6.321 6.45h-.001z\"/></svg>', {\n                        status: 503,\n                        statusText: 'SW: Service Unavailable',\n                        headers: new Headers({\n                            'Content-Type': 'image/svg+xml'\n                        })\n                    });\n                } else {\n                    return new Response('<h1>Service Unavailable</h1>', {\n                        status: 503,\n                        statusText: 'SW: Service Unavailable',\n                        headers: new Headers({\n                            'Content-Type': 'text/html'\n                        })\n                    });\n                }\n            });\n        });\n    });\n}\n\nfunction remove() {\n    return caches.keys().then(function (cacheNames) {\n        return Promise.all(cacheNames.map(function (cacheName) {\n            if (cacheName !== STATIC_CACHE_NAME && cacheName !== DATA_CACHE_NAME) {\n                return caches.delete(cacheName);\n            }\n        }));\n    });\n}\n\nfunction isValidPathname(pathname) {\n    var isValid = true;\n    var blackList = [\n        '/admin',\n        '/master',\n        '/bitrix',\n        '/ajax',\n        '/forms',\n        'service-worker.min.js'\n    ];\n\n    blackList.forEach(function (substr) {\n        if (pathname.indexOf(substr) !== -1) {\n            isValid = false;\n        }\n    });\n\n    return isValid;\n}\n\nself.addEventListener('install', function (event) {\n    var params = {};\n    new URL(self.location).searchParams.forEach(function (paramValue, paramName) {\n        params[paramName] = paramValue;\n    });\n    event.waitUntil(precache(params));\n});\n\nself.addEventListener('activate', function (event) {\n    event.waitUntil(remove());\n    event.waitUntil(self.clients.claim());\n});\n\nself.addEventListener('fetch', function (event) {\n    var requestURL = new URL(event.request.url);\n\n    var isValidMethod = event.request.method === 'GET';\n    var isValidOrigin = requestURL.origin === self.location.origin;\n\n    if (isValidMethod && isValidOrigin && isValidPathname(requestURL.pathname)) {\n        event.respondWith(get(event.request));\n    }\n});\n"]}