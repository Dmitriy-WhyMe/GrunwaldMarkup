var STATIC_CACHE_NAME="grunwald-static:2021-10-15T10:08:06",DATA_CACHE_NAME="grunwald-data",ABS_PATH="local/templates/grunwald/";function selectImage(e,t){return e.replace(/(\.[a-z]+)$/,function(e){var n="";return t&&("true"===t.retina&&(n="@2x"),"true"===t.webp&&(e=".webp")),n+e})}function precache(e){return Promise.all([caches.open(STATIC_CACHE_NAME).then(function(e){return e.addAll([ABS_PATH+"vendor/normalize.min.css",ABS_PATH+"css/global.min.css",ABS_PATH+"vendor/jquery.min.js",ABS_PATH+"js/global.min.js",ABS_PATH+"img/sprite.svg"])})]).then(function(){return self.skipWaiting()})}function getCacheName(e){return e.url.match(new RegExp(ABS_PATH,"i"))?STATIC_CACHE_NAME:DATA_CACHE_NAME}function get(a){return fetch(a).then(function(e){var n,t;return e.status<400&&(n=e.clone(),t=getCacheName(a),caches.open(t).then(function(e){e.put(a,n)})),e}).catch(function(){return caches.open(getCacheName(a)).then(function(e){return e.match(a).then(function(e){return e||("image"===a.destination?new Response('<svg xmlns="http://www.w3.org/2000/svg" width="120" height="80" viewBox="0 0 120 80"><path fill="#F0F0F0" fill-rule="nonzero" d="M68.929 27.6L58.313 44.8l-10.456-8.428L31 62h59L68.929 27.6zM37.32 31.9c3.49 0 6.3220003-2.885 6.3220003-6.45C43.643 21.89 40.81 19 37.32 19 33.832 19 31 21.89 31 25.45c0 3.565 2.832 6.45 6.321 6.45h-.001z"/></svg>',{status:503,statusText:"SW: Service Unavailable",headers:new Headers({"Content-Type":"image/svg+xml"})}):new Response("<h1>Service Unavailable</h1>",{status:503,statusText:"SW: Service Unavailable",headers:new Headers({"Content-Type":"text/html"})}))})})})}function remove(){return caches.keys().then(function(e){return Promise.all(e.map(function(e){if(e!==STATIC_CACHE_NAME&&e!==DATA_CACHE_NAME)return caches.delete(e)}))})}function isValidPathname(n){var t=!0;return["/admin","/master","/bitrix","/ajax","/forms","service-worker.min.js"].forEach(function(e){-1!==n.indexOf(e)&&(t=!1)}),t}self.addEventListener("install",function(e){var t={};new URL(self.location).searchParams.forEach(function(e,n){t[n]=e}),e.waitUntil(precache(t))}),self.addEventListener("activate",function(e){e.waitUntil(remove()),e.waitUntil(self.clients.claim())}),self.addEventListener("fetch",function(e){var n=new URL(e.request.url),t="GET"===e.request.method,a=n.origin===self.location.origin;t&&a&&isValidPathname(n.pathname)&&e.respondWith(get(e.request))});